import{C as S,l as C,y as G,i as z,g as n,o as l,a as v,u as o,m as N,w,b as e,e as F,j as p,h as m,k as g,t as f,F as k,p as P,f as E,n as R,P as A}from"./app-CEeYir6r.js";import{A as q}from"./AuthenticatedLayout-Tlnfhv92.js";import{S as y}from"./sweetalert2.esm.all-B0Dix5B2.js";import{_ as J}from"./BreadcrumbComponent-HUmZLL1a.js";import"./ApplicationLogo-FsgzC6CS.js";import"./LoadingComponent-aaeIiFjG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AntdIcon-VOH8iImw.js";const K={class:"pb-12 pt-6"},T={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Q={class:"p-6 text-gray-900"},W={class:"grid grid-cols-1 gap-6"},X={key:0,class:"mt-1 text-sm text-red-600"},Y={key:0,class:"mt-1 text-sm text-red-600"},Z={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},ee={class:"space-y-1 text-center"},te={key:0,class:"flex gap-4 mb-4"},se=["src"],oe=["onClick"],re={class:"text-sm text-gray-600"},ae={class:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},ie={key:0,class:"mt-1 text-sm text-red-600"},de={class:"grid grid-cols-2 gap-6"},ne={key:0,class:"mt-1 text-sm text-red-600"},le={key:0,class:"mt-1 text-sm text-red-600"},ce={key:0,class:"mt-1 text-sm text-red-600"},ue={key:0,class:"mt-1 text-sm text-red-600"},me={key:0,class:"mt-1 text-sm text-red-600"},pe={key:0,class:"mt-1 text-sm text-red-600"},ge={key:0,class:"mt-1 text-sm text-red-600"},fe={class:"grid grid-cols-2 gap-6"},_e=["max"],ye={key:0,class:"mt-1 text-sm text-red-600"},xe=["min"],be={key:0,class:"mt-1 text-sm text-red-600"},he={key:1,class:"mt-1 text-sm text-red-600"},ve={class:"mt-6 border-t border-gray-600 pt-6"},ke={class:"overflow-x-auto"},we={class:"min-w-full divide-y divide-gray-200"},Pe={class:"bg-white divide-y divide-gray-200"},Ue={class:"px-6 py-4 whitespace-nowrap"},je=["onUpdate:modelValue"],Ce={class:"px-6 py-4 whitespace-nowrap"},Ee=["onUpdate:modelValue"],Re={class:"px-6 py-4"},Ve=["onUpdate:modelValue"],$e={class:"px-6 py-4"},De={class:"space-y-2"},Me={key:0,class:"flex flex-wrap gap-2"},Oe=["src"],Be=["onClick"],Le={class:"flex justify-center border-2 border-gray-300 border-dashed rounded-md"},Ie={class:"space-y-1 text-center"},Se={class:"text-sm text-gray-600"},Ge=["for"],ze=["id","onChange"],Ne={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Fe=["onClick"],Ae={class:"mt-6 flex justify-end"},qe=["disabled"],et={__name:"Create",setup(Je){const s=S({name:"",description:"",images:[],display_price_adult:null,display_price_child:null,adult_surcharge:null,child_surcharge:null,package_days:2,terms_and_conditions:"",location:"",package_start_date:"",package_end_date:"",room_types:[{name:"",max_occupancy:2,description:"",images:[],imagePreviews:[]}]}),_=C(""),x=C([]),V=()=>{s.room_types.push({name:"",max_occupancy:2,description:"",images:[],imagePreviews:[]})},$=i=>{s.room_types.splice(i,1)},D=i=>{const t=Array.from(i.target.files),a=10*1024*1024,d=["image/jpeg","image/png","image/gif"],u=[];if(t.forEach(r=>{d.includes(r.type)||u.push(`${r.name} is not a valid image file. Only JPG, PNG, and GIF are allowed.`),r.size>a&&u.push(`${r.name} is too large. Maximum file size is 10MB.`)}),u.length>0){y.fire({title:"Invalid Images",html:u.join("<br>"),icon:"error",confirmButtonText:"OK"});return}s.images=[...s.images,...t],t.forEach(r=>{x.value.push(URL.createObjectURL(r))})},M=i=>{s.images.splice(i,1),URL.revokeObjectURL(x.value[i]),x.value.splice(i,1)},O=(i,t)=>{const a=Array.from(i.target.files),d=10*1024*1024,u=["image/jpeg","image/png","image/gif"],r=[];if(a.forEach(c=>{u.includes(c.type)||r.push(`${c.name} is not a valid image file. Only JPG, PNG, and GIF are allowed.`),c.size>d&&r.push(`${c.name} is too large. Maximum file size is 10MB.`)}),r.length>0){y.fire({title:"Invalid Images",html:r.join("<br>"),icon:"error",confirmButtonText:"OK"});return}s.room_types[t].images=[...s.room_types[t].images||[],...a],a.forEach(c=>{s.room_types[t].imagePreviews||(s.room_types[t].imagePreviews=[]),s.room_types[t].imagePreviews.push(URL.createObjectURL(c))})},B=(i,t)=>{s.room_types[i].images.splice(t,1),URL.revokeObjectURL(s.room_types[i].imagePreviews[t]),s.room_types[i].imagePreviews.splice(t,1)};G(()=>{s.room_types.forEach(i=>{i.imagePreviews&&i.imagePreviews.forEach(t=>URL.revokeObjectURL(t))}),x.value.forEach(i=>URL.revokeObjectURL(i))});const U=()=>{if(_.value="",s.package_start_date&&s.package_end_date){const i=new Date(s.package_start_date),t=new Date(s.package_end_date),a=Math.abs(t-i),d=Math.ceil(a/(1e3*60*60*24));t<=i?_.value="End date must be after start date":d<1&&(_.value="End date must be at least one day after start date")}},L=()=>{const t=["image/jpeg","image/png","image/gif"],a=[];if(s.images.forEach(r=>{t.includes(r.type)||a.push(`${r.name} is not a valid image file. Only JPG, PNG, and GIF are allowed.`),r.size>10485760&&a.push(`${r.name} is too large. Maximum file size is 10MB.`)}),a.length>0){y.fire({title:"Invalid Images",html:a.join("<br>"),icon:"error",confirmButtonText:"OK"});return}if(U(),_.value){y.fire({title:"Validation Error",text:_.value,icon:"error",confirmButtonText:"OK"});return}const d=[];if(s.room_types.forEach((r,c)=>{var b;(b=r.name)!=null&&b.trim()||d.push(`Room type ${c+1}: Name is required`),(!r.max_occupancy||r.max_occupancy<1)&&d.push(`Room type ${c+1}: Maximum occupancy must be at least 1`),r.images&&r.images.forEach((h,j)=>{t.includes(h.type)||d.push(`Room type ${c+1}, Image ${j+1}: Invalid file type. Only JPG, PNG, and GIF are allowed.`),h.size>10485760&&d.push(`Room type ${c+1}, Image ${j+1}: File too large. Maximum size is 10MB.`)})}),d.length>0){y.fire({title:"Validation Error",html:d.join("<br>"),icon:"error",confirmButtonText:"OK"});return}const u=new FormData;Object.keys(s).forEach(r=>{r!=="room_types"&&r!=="images"&&u.append(r,s[r])}),s.images.length>0&&s.images.forEach((r,c)=>{u.append(`images[${c}]`,r)}),s.room_types.forEach((r,c)=>{u.append(`room_types[${c}][name]`,r.name),u.append(`room_types[${c}][max_occupancy]`,r.max_occupancy),u.append(`room_types[${c}][description]`,r.description||""),r.images&&r.images.length>0&&r.images.forEach((b,h)=>{u.append(`room_types[${c}][images][${h}]`,b)})}),s.post(route("packages.store"),{forceFormData:!0,data:u,onSuccess:()=>{y.fire({icon:"success",title:"Success",text:"Package created successfully"})},onError:r=>{y.fire({icon:"error",title:"Error",text:Object.values(r).flat().join(`
`)})}})},I=z(()=>[{title:"Packages",link:route("packages.index")},{title:"Create Package"}]);return(i,t)=>(l(),n(k,null,[v(o(N),{title:"Create Package"}),v(q,null,{header:w(()=>t[11]||(t[11]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},null,-1)])),default:w(()=>[e("div",K,[e("div",T,[e("div",H,[e("div",Q,[v(J,{breadcrumbs:I.value,class:"mb-9"},null,8,["breadcrumbs"]),e("form",{onSubmit:F(L,["prevent"])},[e("div",W,[e("div",null,[t[12]||(t[12]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),p(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=a=>o(s).name=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[g,o(s).name]]),o(s).errors.name?(l(),n("div",X,f(o(s).errors.name),1)):m("",!0)]),e("div",null,[t[13]||(t[13]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),p(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=a=>o(s).description=a),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,o(s).description]]),o(s).errors.description?(l(),n("div",Y,f(o(s).errors.description),1)):m("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Package Images",-1)),e("div",Z,[e("div",ee,[o(s).images&&o(s).images.length>0?(l(),n("div",te,[(l(!0),n(k,null,P(x.value,(a,d)=>(l(),n("div",{key:d,class:"relative group"},[e("img",{src:a,class:"h-24 w-full object-cover rounded-lg"},null,8,se),e("button",{type:"button",onClick:u=>M(d),class:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity"},t[14]||(t[14]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,oe)]))),128))])):m("",!0),e("div",re,[e("label",ae,[t[15]||(t[15]=e("span",null,"Upload Images",-1)),e("input",{type:"file",onChange:D,accept:"image/*",multiple:"",class:"sr-only"},null,32)])]),t[16]||(t[16]=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])]),o(s).errors.images?(l(),n("div",ie,f(o(s).errors.images),1)):m("",!0)]),e("div",de,[e("div",null,[t[18]||(t[18]=e("label",{for:"display_price_adult",class:"block text-sm font-medium text-gray-700"},[e("b",{class:"text-[15px]"},"Display Price"),E(" / Adult Base Price")],-1)),p(e("input",{type:"number",id:"display_price_adult","onUpdate:modelValue":t[2]||(t[2]=a=>o(s).display_price_adult=a),step:"0.01",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,o(s).display_price_adult]]),o(s).errors.display_price_adult?(l(),n("div",ne,f(o(s).errors.display_price_adult),1)):m("",!0)]),e("div",null,[t[19]||(t[19]=e("label",{for:"display_price_adult",class:"block text-sm font-medium text-gray-700"},"Child Base Price",-1)),p(e("input",{type:"number",id:"display_price_child","onUpdate:modelValue":t[3]||(t[3]=a=>o(s).display_price_child=a),step:"0.01",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,o(s).display_price_child]]),o(s).errors.display_price_child?(l(),n("div",le,f(o(s).errors.display_price_child),1)):m("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{for:"adult_surcharge",class:"block text-sm font-medium text-gray-700"},"Adult Surcharge",-1)),p(e("input",{type:"number",id:"adult_surcharge","onUpdate:modelValue":t[4]||(t[4]=a=>o(s).adult_surcharge=a),step:"0.01",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,o(s).adult_surcharge]]),o(s).errors.adult_surcharge?(l(),n("div",ce,f(o(s).errors.adult_surcharge),1)):m("",!0)]),e("div",null,[t[21]||(t[21]=e("label",{for:"child_surcharge",class:"block text-sm font-medium text-gray-700"},"Child Surcharge",-1)),p(e("input",{type:"number",id:"child_surcharge","onUpdate:modelValue":t[5]||(t[5]=a=>o(s).child_surcharge=a),step:"0.01",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,o(s).child_surcharge]]),o(s).errors.child_surcharge?(l(),n("div",ue,f(o(s).errors.child_surcharge),1)):m("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{for:"package_days",class:"block text-sm font-medium text-gray-700"},"Package Duration (Nights)",-1)),p(e("input",{type:"number",id:"package_days","onUpdate:modelValue":t[6]||(t[6]=a=>o(s).package_days=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[g,o(s).package_days]]),o(s).errors.package_days?(l(),n("div",me,f(o(s).errors.package_days),1)):m("",!0)])]),e("div",null,[t[23]||(t[23]=e("label",{for:"terms_and_conditions",class:"block text-sm font-medium text-gray-700"},"Terms and Conditions",-1)),p(e("textarea",{id:"terms_and_conditions","onUpdate:modelValue":t[7]||(t[7]=a=>o(s).terms_and_conditions=a),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,o(s).terms_and_conditions]]),o(s).errors.terms_and_conditions?(l(),n("div",pe,f(o(s).errors.terms_and_conditions),1)):m("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Location",-1)),p(e("input",{type:"text",id:"location","onUpdate:modelValue":t[8]||(t[8]=a=>o(s).location=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,o(s).location]]),o(s).errors.location?(l(),n("div",ge,f(o(s).errors.location),1)):m("",!0)]),e("div",fe,[e("div",null,[t[25]||(t[25]=e("label",{for:"package_start_date",class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),p(e("input",{type:"date",id:"package_start_date","onUpdate:modelValue":t[9]||(t[9]=a=>o(s).package_start_date=a),max:o(s).package_end_date?o(s).package_end_date:void 0,class:R(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(s).errors.package_start_date||o(s).errors.package_end_date}]),required:"",onChange:U},null,42,_e),[[g,o(s).package_start_date]]),o(s).errors.package_start_date?(l(),n("div",ye,f(o(s).errors.package_start_date),1)):m("",!0)]),e("div",null,[t[26]||(t[26]=e("label",{for:"package_end_date",class:"block text-sm font-medium text-gray-700"},"End Date",-1)),p(e("input",{type:"date",id:"package_end_date","onUpdate:modelValue":t[10]||(t[10]=a=>o(s).package_end_date=a),min:o(s).package_start_date?new Date(new Date(o(s).package_start_date).getTime()+864e5).toISOString().split("T")[0]:void 0,class:R(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(s).errors.package_end_date}]),required:""},null,10,xe),[[g,o(s).package_end_date]]),o(s).errors.package_end_date?(l(),n("div",be,f(o(s).errors.package_end_date),1)):m("",!0),_.value?(l(),n("div",he,f(_.value),1)):m("",!0)])]),e("div",ve,[e("div",{class:"flex justify-between items-center mb-4"},[t[27]||(t[27]=e("h3",{class:"text-lg font-medium text-gray-900"},"Room Types",-1)),e("button",{type:"button",onClick:V,class:"px-4 py-2 text-xs bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200"}," Add Room Type ")]),e("div",ke,[e("table",we,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Room Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Max Occupancy"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Images"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Pe,[(l(!0),n(k,null,P(o(s).room_types,(a,d)=>{var u;return l(),n("tr",{key:d},[e("td",Ue,[p(e("input",{type:"text","onUpdate:modelValue":r=>a.name=r,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Room Type Name",required:""},null,8,je),[[g,a.name]])]),e("td",Ce,[p(e("input",{type:"number","onUpdate:modelValue":r=>a.max_occupancy=r,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",min:"1",required:""},null,8,Ee),[[g,a.max_occupancy]])]),e("td",Re,[p(e("input",{type:"text","onUpdate:modelValue":r=>a.description=r,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Description"},null,8,Ve),[[g,a.description]])]),e("td",$e,[e("div",De,[(u=a.imagePreviews)!=null&&u.length?(l(),n("div",Me,[(l(!0),n(k,null,P(a.imagePreviews,(r,c)=>(l(),n("div",{key:c,class:"relative"},[e("img",{src:r,class:"h-20 w-20 object-cover rounded"},null,8,Oe),e("button",{type:"button",onClick:b=>B(d,c),class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"},t[28]||(t[28]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Be)]))),128))])):m("",!0),e("div",Le,[e("div",Ie,[e("div",Se,[e("label",{for:"room-type-images-"+d,class:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},[t[29]||(t[29]=e("span",null,"Upload images",-1)),e("input",{id:"room-type-images-"+d,type:"file",multiple:"",accept:"image/*",class:"sr-only",onChange:r=>O(r,d)},null,40,ze)],8,Ge),t[30]||(t[30]=e("p",{class:"pl-1"},"or drag and drop",-1))])])])])]),e("td",Ne,[e("button",{type:"button",onClick:r=>$(d),class:"text-red-600 hover:text-red-900"}," Remove ",8,Fe)])])}),128))])])])])]),e("div",Ae,[v(o(A),{href:i.route("packages.index"),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 mr-3 text-xs"},{default:w(()=>t[32]||(t[32]=[E(" Cancel ")])),_:1},8,["href"]),e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs",disabled:o(s).processing}," Create Package ",8,qe)])],32)])])])])]),_:1})],64))}};export{et as default};
