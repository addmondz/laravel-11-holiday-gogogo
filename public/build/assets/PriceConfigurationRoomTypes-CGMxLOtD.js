import{a as k,r as h,i as L,g as l,o,b as s,h as T,j as y,x as w,F as x,y as _,M as Fe,f as V,u as $,t as b,v as ae,z as ne,q as F,n as oe,c as be,K as He,I as Ye}from"./app-ChtDtwsB.js";import{S as P}from"./sweetalert2.esm.all-B0Dix5B2.js";import{L as Qe}from"./LoadingComponent-DzgVbIA0.js";import{_ as We}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as W}from"./AntdIcon-ByLapXLr.js";var Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};function he(d){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?Object(arguments[i]):{},g=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(u).filter(function(m){return Object.getOwnPropertyDescriptor(u,m).enumerable}))),g.forEach(function(m){Je(d,m,u[m])})}return d}function Je(d,i,u){return i in d?Object.defineProperty(d,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):d[i]=u,d}var H=function(i,u){var g=he({},i,u.attrs);return k(W,he({},g,{icon:Ge}),null)};H.displayName="CopyOutlined";H.inheritAttrs=!1;var Xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};function xe(d){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?Object(arguments[i]):{},g=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(u).filter(function(m){return Object.getOwnPropertyDescriptor(u,m).enumerable}))),g.forEach(function(m){Ze(d,m,u[m])})}return d}function Ze(d,i,u){return i in d?Object.defineProperty(d,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):d[i]=u,d}var le=function(i,u){var g=xe({},i,u.attrs);return k(W,xe({},g,{icon:Xe}),null)};le.displayName="EyeInvisibleOutlined";le.inheritAttrs=!1;var Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};function _e(d){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?Object(arguments[i]):{},g=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(u).filter(function(m){return Object.getOwnPropertyDescriptor(u,m).enumerable}))),g.forEach(function(m){et(d,m,u[m])})}return d}function et(d,i,u){return i in d?Object.defineProperty(d,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):d[i]=u,d}var re=function(i,u){var g=_e({},i,u.attrs);return k(W,_e({},g,{icon:Ke}),null)};re.displayName="EyeOutlined";re.inheritAttrs=!1;var tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};function Ce(d){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?Object(arguments[i]):{},g=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(u).filter(function(m){return Object.getOwnPropertyDescriptor(u,m).enumerable}))),g.forEach(function(m){st(d,m,u[m])})}return d}function st(d,i,u){return i in d?Object.defineProperty(d,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):d[i]=u,d}var Y=function(i,u){var g=Ce({},i,u.attrs);return k(W,Ce({},g,{icon:tt}),null)};Y.displayName="MinusOutlined";Y.inheritAttrs=!1;var at={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};function ke(d){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?Object(arguments[i]):{},g=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(u).filter(function(m){return Object.getOwnPropertyDescriptor(u,m).enumerable}))),g.forEach(function(m){nt(d,m,u[m])})}return d}function nt(d,i,u){return i in d?Object.defineProperty(d,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):d[i]=u,d}var Q=function(i,u){var g=ke({},i,u.attrs);return k(W,ke({},g,{icon:at}),null)};Q.displayName="PlusOutlined";Q.inheritAttrs=!1;const ot={class:"space-y-6"},lt={class:"bg-white shadow rounded-lg p-6"},rt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},it=["value"],ut=["value"],dt=["value"],ct={class:"mt-6 flex gap-2"},pt=["disabled"],gt={key:0},mt={key:1},vt={key:0,class:"bg-white shadow rounded-lg p-6"},ft={key:0,class:"flex items-center justify-center min-h-[300px]"},yt={key:1,class:"text-center text-gray-500"},bt={key:2,class:"space-y-10"},ht={class:"flex items-center justify-between"},xt={class:"space-x-2"},_t=["disabled"],Ct={key:0},kt={key:1,class:"px-3 py-2"},St={key:0,class:"mb-4"},Tt={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},wt={class:"flex items-start space-x-3"},Ot={class:"flex-1"},$t={class:"text-sm text-blue-700"},At={class:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800"},Pt={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4"},jt={class:"flex items-center justify-between"},Vt=["data-package-config-id"],Dt={class:"flex items-center justify-between"},Mt={class:"font-medium text-gray-900"},Rt={class:"space-x-2"},Ut={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4"},Et={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},It={class:"flex flex-col space-y-2"},Bt={class:"flex items-center space-x-2"},Nt=["onUpdate:modelValue"],qt=["onUpdate:modelValue"],zt=["onClick"],Lt=["onClick"],Ft={class:"flex flex-col space-y-2"},Ht={class:"flex items-center space-x-2"},Yt=["onUpdate:modelValue"],Qt=["onUpdate:modelValue"],Wt=["onClick"],Gt=["onClick"],Jt={class:"flex flex-col space-y-2"},Xt={class:"flex items-center space-x-2"},Zt=["onUpdate:modelValue"],Kt=["onUpdate:modelValue"],es=["onClick"],ts=["onClick"],ss={style:{"margin-top":"10px"}},as={class:"overflow-x-auto border rounded-lg"},ns={class:"min-w-full text-sm"},os={class:"bg-gray-200"},ls=["colspan"],rs={class:"px-4 py-2 align-middle whitespace-nowrap font-medium text-gray-800"},is={class:"flex flex-col items-start justify-start w-32"},us={class:"text-xs text-gray-600"},ds={key:0,class:"flex items-center rounded-md shadow-sm border border-gray-300 focus-within:ring-2 focus-within:ring-indigo-500"},cs=["onUpdate:modelValue","onInput"],ps=["onClick"],gs={key:1,class:"mt-1 font-medium"},ms={key:1,style:{"margin-top":"0"}},vs={class:"overflow-x-auto border rounded-lg"},fs={class:"min-w-full text-sm"},ys={class:"bg-gray-200"},bs={class:"px-4 py-2 text-left"},hs={class:"flex items-center gap-2"},xs=["onClick","title"],_s={class:"px-4 py-3 font-medium text-gray-800 whitespace-nowrap"},Cs={key:0,class:"flex"},ks=["onUpdate:modelValue"],Ss=["onClick"],Ts={key:2,class:"flex items-center justify-end pt-6 border-t"},ws={class:"space-x-2"},Os=["disabled"],$s={key:0},As={key:1,class:"px-3 py-2"},Ps={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",style:{"margin-top":"0"}},js={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-3/4 shadow-lg rounded-md bg-white"},Vs={class:"mt-3"},Ds={class:"space-y-6"},Ms={class:"bg-gray-50 p-4 rounded-lg"},Rs={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Us=["value"],Es=["value"],Is=["value"],Bs={class:"bg-green-50 p-4 rounded-lg"},Ns={class:"flex items-center justify-between"},qs={class:"text-sm text-gray-500 mr-2"},zs=["onUpdate:modelValue"],Ls=["value"],Fs=["onUpdate:modelValue"],Hs=["value"],Ys={class:"flex gap-2"},Qs=["onUpdate:modelValue"],Ws=["value"],Gs=["onClick"],Js={key:0,class:"bg-green-50 p-4 rounded-lg"},Xs={class:"space-y-2 max-h-48 overflow-y-auto"},Zs=["id","value"],Ks=["for"],ea={class:"text-gray-500"},ta={class:"bg-yellow-50 p-4 rounded-lg"},sa={class:"space-y-2"},aa={class:"flex items-center"},na={class:"flex items-center"},oa={class:"flex justify-end space-x-3 pt-4"},la=["disabled"],ra={key:0},ia={key:1},ua={__name:"PriceConfigurationRoomTypes",props:{packageId:{type:Number,required:!0},seasonTypes:{type:Array,required:!0},dateTypes:{type:Array,required:!0},packageUniqueRoomTypes:{type:Object,required:!0},allSeasonTypes:{type:Array,required:!0},allDateTypes:{type:Array,required:!0},assignedSeasonTypes:{type:Array,required:!0},assignedDateTypes:{type:Array,required:!0}},setup(d){const i=d,u=h(""),g=h(""),m=h(""),q=h(!1),Z=h(!1),S=h(!1),R=h(!1),U=h(!1),D=h({}),C=h({}),K=h(!1),G=h(!1);h(!1),h(!1);const J=h([]),ee=h([]),c=h({sourceSeason:"",sourceDateType:"",sourceRoomType:"",selectedSourceConfig:null,targetConfigurations:[{season:"",dateType:"",roomType:""}],includeBaseCharges:!0,includeSurcharges:!0}),E=h(1),Se=()=>{c.value.targetConfigurations.push({season:"",dateType:"",roomType:""}),E.value++},Te=n=>{c.value.targetConfigurations.length>1&&(c.value.targetConfigurations.splice(n,1),E.value--)},we=()=>{ze(),K.value=!0},A=h([]),ie=h({}),Oe=L(()=>!!u.value&&!!g.value),ue=n=>Number(n??0).toFixed(2);L(()=>c.value.sourceSeason&&c.value.sourceDateType),L(()=>c.value.targetSeason&&c.value.targetDateType),L(()=>u.value&&g.value&&A.value.length>0);const de=L(()=>c.value.targetConfigurations.some(e=>e.season&&e.dateType)?c.value.targetConfigurations.some(e=>e.season===c.value.sourceSeason&&e.dateType===c.value.sourceDateType&&e.roomType===c.value.sourceRoomType)?(P.fire({icon:"error",title:"Error",text:"Source and target cannot be the same"}),!1):!0:!1),$e=/^(\d+)_a_(\d+)_c_(\d+)_i$/,X=n=>{var e;const t=(e=n==null?void 0:n.match)==null?void 0:e.call(n,$e);return t?{a:+t[1],c:+t[2],i:+t[3]}:null},ce=n=>{const t=X(n);if(!t)return n||"";const e=(a,r,f)=>`${a} ${a===1?r:f||r+"s"}`;return`${e(t.a,"Adult")} + ${e(t.c,"Child","Children")} + ${e(t.i,"Infant")}`},Ae=n=>[...n].sort((t,e)=>{const a=X(t)||{a:0,c:0,i:0},r=X(e)||{a:0,c:0,i:0};return a.a!==r.a?r.a-a.a:a.c!==r.c?r.c-a.c:r.i-a.i}),pe=n=>{const t=Object.keys(n||{});return Ae(t).map(a=>[a,n[a]])},Pe=n=>n==="a"||n==="c"||n==="i",je=n=>{const t=Object.keys(n??{}),e=a=>{const r=a[0],p=!Pe(a)?parseInt(a.slice(1),10)||0:-1;return({a:1,c:2,i:3}[r]||9)*100+p};return t.sort((a,r)=>e(a)-e(r))},Ve=n=>{if(!n)return"";const t=n[0],e=n.slice(1);return t==="a"?`Adult ${e}`:t==="c"?`Child ${e}`:t==="i"?`Infant ${e}`:n},De=(n,t,e)=>{var p;if(!n||!t||!e)return;const a=(p=n.base)==null?void 0:p[t];if(!a)return;const r=a[e];if(r==null||r==="")return;const f=String(e)[0];Object.keys(a).forEach(v=>{v.startsWith(f)&&(a[v]=Number(r))})},Me=(n,t,e)=>{var f;if(!n||!t||!e)return;const a=(f=n.surch)==null?void 0:f[t];if(!a)return;const r=a[e];r==null||r===""||Object.keys(n.surch).forEach(p=>{const v=n.surch[p];v&&v[e]!==void 0&&(v[e]=Number(r))})},Re=()=>{A.value.forEach(n=>{C.value[n.room_type_id]||(C.value[n.room_type_id]={adult:{value:0,mode:"value"},child:{value:0,mode:"value"},infant:{value:0,mode:"value"}})})},I=(n,t,e)=>{var M;const a=t==="adult"?"a":t==="child"?"c":"i",r=(M=C.value[n.room_type_id])==null?void 0:M[t];if(!r||!r.value||r.value<=0){P.fire({icon:"warning",title:"Invalid Value",text:"Please enter a positive adjustment value",timer:2e3});return}const f=Number(r.value),p=r.mode==="percentage";Object.keys(n.base).forEach(B=>{const O=n.base[B];Object.keys(O).forEach(N=>{if(N.startsWith(a)){const j=Number(O[N])||0;let z;if(p){const ye=j*(f/100);z=e==="add"?j+ye:j-ye}else z=e==="add"?j+f:j-f;O[N]=Math.max(0,Math.round(z*100)/100)}})});const v=t.charAt(0).toUpperCase()+t.slice(1);P.fire({icon:"success",title:"Adjustment Applied",text:`${e==="add"?"Added":"Subtracted"} ${p?f+"%":"MYR "+f} ${e==="add"?"to":"from"} all ${v} base charges`,timer:1500,showConfirmButton:!1})};let ge="",me=0;const Ue=(n,t,e)=>{Ye(()=>{Ee(n,t)})},Ee=(n,t)=>{var f;if(U.value)return;const e=(f=n.base)==null?void 0:f[t];if(!e)return;const a=X(t);if(!a)return;const r=Math.max(a.a,a.c,a.i);for(let p=1;p<=r;p++){const v=[];if(e[`a${p}`]!==void 0&&v.push({type:`Adult ${p}`,price:Number(e[`a${p}`])}),e[`c${p}`]!==void 0&&v.push({type:`Child ${p}`,price:Number(e[`c${p}`])}),e[`i${p}`]!==void 0&&v.push({type:`Infant ${p}`,price:Number(e[`i${p}`])}),v.length<2)continue;const M={};v.forEach(({type:B,price:O})=>{O>0&&(M[O]||(M[O]=[]),M[O].push(B))});for(const[B,O]of Object.entries(M))if(O.length>=2){const N=`cross-${n.room_type_id}-${t}-slot${p}-${B}`,j=Date.now();if(N===ge&&j-me<3e3)return;ge=N,me=j,P.fire({icon:"warning",title:"Same Price Detected",text:`${O.join(" and ")} have the same price (${B}). Is this intended?`,timer:5e3,showConfirmButton:!0,confirmButtonText:"OK",showDenyButton:!0,denyButtonText:"Don't show again"}).then(z=>{z.isDenied&&(U.value=!0)});return}}},Ie=n=>n==="a"?"Adult (per pax)":n==="c"?"Child (per pax)":"Infant (per pax)",Be=n=>{D.value[n]=!D.value[n]},te=()=>{q.value=!0,Z.value=!0,S.value=!1,ne.post(route("configuration-prices.fetchPricesRoomTypes"),{package_id:i.packageId,season_type_id:u.value,date_type_id:g.value,room_type_id:m.value||void 0}).then(n=>{let t=n==null?void 0:n.data;if(typeof t=="string"){const e=t.replace(/,\s*(?=[}\]])/g,"");try{t=JSON.parse(e)}catch(a){console.error("Failed to parse API string after sanitizing:",a),t=[]}}t=Array.isArray(t)?t:[],ie.value=t.reduce((e,a)=>{var p,v;const r=(a==null?void 0:a.room_type_id)??((p=a==null?void 0:a.room_type)==null?void 0:p.id),f=(v=a==null?void 0:a.room_type)==null?void 0:v.name;return r&&f&&(e[r]=f),e},{}),A.value=t.map(e=>{var r;const a=Array.isArray(e==null?void 0:e.prices)&&e.prices.length?e.prices[0]:null;return{room_type_id:(e==null?void 0:e.room_type_id)??((r=e==null?void 0:e.room_type)==null?void 0:r.id)??0,room_type_capacity:(e==null?void 0:e.room_type_capacity)??0,room_type_name:(e==null?void 0:e.room_type_name)??"",id:(e==null?void 0:e.id)??0,base:(a==null?void 0:a.base)??{},surch:(a==null?void 0:a.surch)??{}}}),t.forEach(e=>{var r;const a=(e==null?void 0:e.room_type_id)??((r=e==null?void 0:e.room_type)==null?void 0:r.id);a&&(D.value[a]=(e==null?void 0:e.default_show_surcharge)??!1)}),Re()}).catch(n=>{console.error(n),P.fire({icon:"error",title:"Error",text:"Failed to fetch price configurations"}),A.value=[]}).finally(()=>{q.value=!1})},Ne=()=>{u.value="",g.value="",m.value="",A.value=[],ie.value={},Z.value=!1,S.value=!1},ve=()=>{S.value=!1,U.value=!1,te()},fe=()=>{R.value=!0;const n=A.value.map(e=>({package_configuration_id:Number(e.id)||null,room_type_id:Number(e.room_type_id)||null,base:e.base??{},surch:e.surch??{}})),t={package_id:i.packageId,season_type_id:u.value,date_type_id:g.value,rooms:n};ne.put(route("configuration-prices.updateRoomTypePrices"),t).then(()=>{S.value=!1,U.value=!1,P.fire({icon:"success",title:"Saved",timer:1200,showConfirmButton:!1}),te()}).catch(e=>{var a,r;console.error(e),P.fire({icon:"error",title:"Error",text:((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to save"})}).finally(()=>{R.value=!1})},se=()=>{K.value=!1,J.value=[],ee.value=[],c.value={sourceSeason:"",sourceDateType:"",sourceRoomType:"",selectedSourceConfig:null,targetConfigurations:[{season:"",dateType:"",roomType:""}],includeBaseCharges:!0,includeSurcharges:!0},E.value=1},qe=n=>{let t=0;return Object.values(n??{}).forEach(e=>{Object.keys(e??{}).forEach(a=>{const r=parseInt(a.slice(1),10);isNaN(r)||(t=Math.max(t,r))})}),t+1},ze=()=>{c.value.sourceSeason=u.value,c.value.sourceDateType=g.value,c.value.sourceRoomType=m.value,J.value=A.value.map(n=>({id:n.id,room_type_id:n.room_type_id,room_type_capacity:n.room_type_capacity,room_type_name:n.room_type_name,base:n.base,surch:n.surch})),J.value.length===1&&(c.value.selectedSourceConfig=J.value[0])},Le=async()=>{var n,t;if(de.value){G.value=!0;try{const e=c.value.targetConfigurations.filter(r=>r.season&&r.dateType),a={package_id:i.packageId,source_season_type_id:c.value.sourceSeason,source_date_type_id:c.value.sourceDateType,source_room_type_id:c.value.sourceRoomType,target_configurations:e.map(r=>({season_type_id:r.season,date_type_id:r.dateType,room_type_id:r.roomType})),include_base_charges:c.value.includeBaseCharges,include_surcharges:c.value.includeSurcharges};await ne.post(route("configuration-prices.duplicateToMultiple"),a),await P.fire({icon:"success",title:"Duplication Successful",text:`Price configuration duplicated to ${e.length} target configuration(s)`,timer:2e3,showConfirmButton:!1}),se()}catch(e){console.error("Duplication error:",e),await P.fire({icon:"error",title:"Duplication Failed",text:((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||"Failed to duplicate price configuration"})}finally{G.value=!1}}};return(n,t)=>(o(),l("div",ot,[s("div",lt,[s("div",rt,[s("div",null,[t[12]||(t[12]=s("label",{class:"block text-sm font-medium text-gray-700"},"Season",-1)),y(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[11]||(t[11]=s("option",{value:""},"Select Season",-1)),(o(!0),l(x,null,_(d.assignedSeasonTypes,e=>(o(),l("option",{key:e.id,value:e.id},b(e.name),9,it))),128))],512),[[w,u.value]])]),s("div",null,[t[14]||(t[14]=s("label",{class:"block text-sm font-medium text-gray-700"},"Date Type",-1)),y(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[13]||(t[13]=s("option",{value:""},"Select Date Type",-1)),(o(!0),l(x,null,_(d.assignedDateTypes,e=>(o(),l("option",{key:e.id,value:e.id},b(e.name),9,ut))),128))],512),[[w,g.value]])]),s("div",null,[t[16]||(t[16]=s("label",{class:"block text-sm font-medium text-gray-700"},"Room Type (Optional)",-1)),y(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>m.value=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[15]||(t[15]=s("option",{value:""},"All Room Types",-1)),(o(!0),l(x,null,_(d.packageUniqueRoomTypes,(e,a)=>(o(),l("option",{key:a,value:a},b(e),9,dt))),128))],512),[[w,m.value]])])]),s("div",ct,[s("button",{onClick:te,disabled:!Oe.value||q.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs disabled:opacity-50 disabled:cursor-not-allowed"},[q.value?(o(),l("span",gt,"Loading...")):(o(),l("span",mt,"Search Prices"))],8,pt),s("button",{onClick:Ne,class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-xs"}," Reset ")])]),Z.value?(o(),l("div",vt,[q.value?(o(),l("div",ft,[k(Qe)])):A.value.length?(o(),l("div",bt,[s("div",ht,[t[17]||(t[17]=s("div",null,[s("h2",{class:"text-lg font-semibold"},"Price Matrix"),s("p",{class:"text-xs text-gray-500"}," Base charge applies to each slot (Adult 1, Adult 2, Child 1, …). Surcharge applies per person (Adult / Child / Infant). ")],-1)),s("div",xt,[S.value?(o(),l(x,{key:0},[s("button",{onClick:ve,class:"px-3 py-2 rounded bg-gray-100 text-gray-700 text-sm"}," Cancel "),s("button",{onClick:fe,class:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",disabled:R.value},[R.value?(o(),l("span",Ct,"Saving...")):(o(),l("span",kt,"Save"))],8,_t)],64)):T("",!0)])]),S.value?(o(),l("div",St,[s("div",Tt,[s("div",wt,[t[27]||(t[27]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),s("div",Ot,[t[25]||(t[25]=s("h3",{class:"text-sm font-medium text-blue-800 mb-1"}," Quick Copy Feature ",-1)),s("p",$t,[t[19]||(t[19]=V(" Click the ")),s("span",At,[k($(H),{class:"h-3 w-3 mr-1"}),t[18]||(t[18]=V(" copy icon "))]),t[20]||(t[20]=V(" next to any price to instantly apply that same value across matching fields. The copy behavior differs slightly between ")),t[21]||(t[21]=s("strong",null,"Base Charge",-1)),t[22]||(t[22]=V(" and ")),t[23]||(t[23]=s("strong",null,"Surcharges",-1)),t[24]||(t[24]=V(": "))]),t[26]||(t[26]=Fe('<ul class="mt-3 text-xs text-blue-700 list-disc list-inside space-y-3" data-v-79f00339><li data-v-79f00339><span class="font-semibold text-blue-800" data-v-79f00339>Base Charge:</span> Copies the value to all fields with the same <strong data-v-79f00339>person type</strong> (e.g. Adults, Children) within the <strong data-v-79f00339>same row</strong>. <div class="mt-1 text-blue-600" data-v-79f00339><span class="font-medium" data-v-79f00339>Example:</span> Clicking the copy icon beside <strong data-v-79f00339>Adult 1</strong> in the row “4 Adults + 0 Children + 0 Infants” will automatically copy that price to <strong data-v-79f00339>Adult 2</strong>, <strong data-v-79f00339>Adult 3</strong>, and <strong data-v-79f00339>Adult 4</strong> in that same row. </div></li><li data-v-79f00339><span class="font-semibold text-blue-800" data-v-79f00339>Surcharges:</span> Copies the value to all fields with the same <strong data-v-79f00339>person type</strong> within the <strong data-v-79f00339>same room</strong>. <div class="mt-1 text-blue-600" data-v-79f00339><span class="font-medium" data-v-79f00339>Example:</span> Clicking the copy icon beside <strong data-v-79f00339>Adult 1</strong> under “Room A” will automatically copy that surcharge value to all the adults surcharge within that same room. </div></li></ul><div class="mt-3 text-xs text-blue-600" data-v-79f00339><span class="font-bold" data-v-79f00339>Remember:</span> Always click <em data-v-79f00339>Save</em> after copying values to confirm your changes. </div>',2))])])])])):T("",!0),S.value&&U.value?(o(),l("div",Pt,[s("div",jt,[t[28]||(t[28]=s("span",{class:"text-sm text-yellow-800"}," Same price alerts are currently hidden. ",-1)),s("button",{onClick:t[3]||(t[3]=e=>U.value=!1),class:"px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700"}," Show alerts again ")])])):T("",!0),(o(!0),l(x,null,_(A.value,e=>(o(),l("div",{key:e.room_type_id,class:"space-y-8","data-package-config-id":e.id},[s("div",Dt,[s("h3",Mt,b(e.room_type_name)+" ( "+b(e.room_type_capacity)+" pax ) ",1),s("div",Rt,[S.value?T("",!0):(o(),l("button",{key:0,onClick:t[4]||(t[4]=a=>S.value=!0),class:"px-5 py-2 rounded bg-indigo-600 text-white text-sm"}," Edit All Prices ")),!S.value&&A.value.length>0?(o(),l("button",{key:1,onClick:we,class:"px-5 py-2 rounded bg-green-600 text-white text-sm hover:bg-green-700"}," Duplicate to Multiple ")):T("",!0)])]),S.value&&C.value[e.room_type_id]?(o(),l("div",Ut,[t[35]||(t[35]=s("h4",{class:"text-sm font-medium text-gray-700 mb-3"},[V(" Global Price Adjustments "),s("span",{class:"text-xs text-gray-500 font-normal ml-2"},"(Apply to all base charges in this room)")],-1)),s("div",Et,[s("div",It,[t[30]||(t[30]=s("label",{class:"text-xs font-medium text-gray-600"},"Adult",-1)),s("div",Bt,[y(s("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":a=>C.value[e.room_type_id].adult.value=a,class:"w-20 rounded-md border-gray-300 text-sm",placeholder:"0"},null,8,Nt),[[F,C.value[e.room_type_id].adult.value,void 0,{number:!0}]]),y(s("select",{"onUpdate:modelValue":a=>C.value[e.room_type_id].adult.mode=a,class:"rounded-md border-gray-300 text-xs"},t[29]||(t[29]=[s("option",{value:"value"},"MYR",-1),s("option",{value:"percentage"},"%",-1)]),8,qt),[[w,C.value[e.room_type_id].adult.mode]]),s("button",{onClick:a=>I(e,"adult","add"),class:"px-2 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",title:"Add to all adult prices"},[k($(Q))],8,zt),s("button",{onClick:a=>I(e,"adult","subtract"),class:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",title:"Subtract from all adult prices"},[k($(Y))],8,Lt)])]),s("div",Ft,[t[32]||(t[32]=s("label",{class:"text-xs font-medium text-gray-600"},"Child",-1)),s("div",Ht,[y(s("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":a=>C.value[e.room_type_id].child.value=a,class:"w-20 rounded-md border-gray-300 text-sm",placeholder:"0"},null,8,Yt),[[F,C.value[e.room_type_id].child.value,void 0,{number:!0}]]),y(s("select",{"onUpdate:modelValue":a=>C.value[e.room_type_id].child.mode=a,class:"rounded-md border-gray-300 text-xs"},t[31]||(t[31]=[s("option",{value:"value"},"MYR",-1),s("option",{value:"percentage"},"%",-1)]),8,Qt),[[w,C.value[e.room_type_id].child.mode]]),s("button",{onClick:a=>I(e,"child","add"),class:"px-2 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",title:"Add to all child prices"},[k($(Q))],8,Wt),s("button",{onClick:a=>I(e,"child","subtract"),class:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",title:"Subtract from all child prices"},[k($(Y))],8,Gt)])]),s("div",Jt,[t[34]||(t[34]=s("label",{class:"text-xs font-medium text-gray-600"},"Infant",-1)),s("div",Xt,[y(s("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":a=>C.value[e.room_type_id].infant.value=a,class:"w-20 rounded-md border-gray-300 text-sm",placeholder:"0"},null,8,Zt),[[F,C.value[e.room_type_id].infant.value,void 0,{number:!0}]]),y(s("select",{"onUpdate:modelValue":a=>C.value[e.room_type_id].infant.mode=a,class:"rounded-md border-gray-300 text-xs"},t[33]||(t[33]=[s("option",{value:"value"},"MYR",-1),s("option",{value:"percentage"},"%",-1)]),8,Kt),[[w,C.value[e.room_type_id].infant.mode]]),s("button",{onClick:a=>I(e,"infant","add"),class:"px-2 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",title:"Add to all infant prices"},[k($(Q))],8,es),s("button",{onClick:a=>I(e,"infant","subtract"),class:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",title:"Subtract from all infant prices"},[k($(Y))],8,ts)])])])])):T("",!0),s("section",ss,[s("div",as,[s("table",ns,[s("thead",os,[s("tr",null,[s("th",{class:"px-4 py-2 text-left",colspan:qe(e.base)}," Base Charge ",8,ls)])]),s("tbody",null,[(o(!0),l(x,null,_(pe(e.base),([a,r],f)=>(o(),l("tr",{key:a,class:oe(f%2?"bg-white":"bg-gray-50")},[s("td",rs,b(ce(a)),1),(o(!0),l(x,null,_(je(r),p=>(o(),l("td",{class:"px-4 py-2",key:p},[s("div",is,[s("span",us,b(Ve(p)),1),S.value?(o(),l("div",ds,[y(s("input",{type:"number",step:"0.01",class:"w-full rounded-l-md border-none focus:ring-0 px-3 py-2","onUpdate:modelValue":v=>e.base[a][p]=v,onInput:v=>Ue(e,a)},null,40,cs),[[F,e.base[a][p],void 0,{number:!0}]]),s("button",{type:"button",class:"flex items-center justify-center px-2 border-l border-gray-300 text-gray-500 hover:text-indigo-600 hover:bg-gray-50 rounded-r-md",title:"Copy this pax type's value across this row",onClick:v=>De(e,a,p)},[k($(H),{class:"h-5 w-5"})],8,ps)])):(o(),l("span",gs,"MYR "+b(ue(e.base[a][p])),1))])]))),128))],2))),128))])])])]),e.surch&&Object.keys(e.surch||{}).length?(o(),l("section",ms,[s("div",vs,[s("table",fs,[s("thead",ys,[s("tr",null,[s("th",bs,[s("div",hs,[t[36]||(t[36]=s("span",null,"Surcharge",-1)),s("button",{type:"button",onClick:a=>Be(e.room_type_id),class:oe(["p-1 rounded",D.value[e.room_type_id]?"text-indigo-600 hover:bg-indigo-50":"text-gray-400 hover:bg-gray-100"]),title:D.value[e.room_type_id]?"Hide surcharge table":"Show surcharge table"},[D.value[e.room_type_id]?(o(),be($(re),{key:0,class:"h-4 w-4"})):(o(),be($(le),{key:1,class:"h-4 w-4"}))],10,xs)])]),(o(),l(x,null,_(["a","c","i"],a=>s("th",{key:a,class:"px-4 py-2 text-left"},b(Ie(a)),1)),64))])]),y(s("tbody",null,[(o(!0),l(x,null,_(pe(e.surch),([a,r],f)=>(o(),l("tr",{key:a,class:oe(f%2?"bg-white":"bg-gray-50")},[s("td",_s,b(ce(a)),1),(o(),l(x,null,_(["a","c","i"],p=>s("td",{key:p,class:"px-4 py-2"},[r[p]!==void 0?(o(),l(x,{key:0},[S.value?(o(),l("div",Cs,[y(s("input",{type:"number",step:"0.01",class:"w-24 rounded-l-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500","onUpdate:modelValue":v=>e.surch[a][p]=v},null,8,ks),[[F,e.surch[a][p],void 0,{number:!0}]]),s("button",{type:"button",class:"flex items-center justify-center px-2 border-l border-gray-300 text-gray-500 hover:text-indigo-600 hover:bg-gray-50 rounded-r-md",title:"Copy this surcharge value to all rows",onClick:v=>Me(e,a,p)},[k($(H),{class:"h-5 w-5"})],8,Ss)])):(o(),l(x,{key:1},[V(" MYR "+b(ue(r[p])),1)],64))],64)):T("",!0)])),64))],2))),128))],512),[[He,D.value[e.room_type_id]]])])])])):T("",!0)],8,Vt))),128)),S.value?(o(),l("div",Ts,[s("div",ws,[s("button",{onClick:ve,class:"px-3 py-2 rounded bg-gray-100 text-gray-700 text-sm"}," Cancel "),s("button",{onClick:fe,class:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",disabled:R.value},[R.value?(o(),l("span",$s,"Saving...")):(o(),l("span",As,"Save"))],8,Os)])])):T("",!0)])):(o(),l("div",yt," No price configurations found for the selected filters. "))])):T("",!0),K.value?(o(),l("div",Ps,[s("div",js,[s("div",Vs,[s("div",{class:"flex items-center justify-between"},[t[38]||(t[38]=s("h3",{class:"text-lg font-medium text-gray-900"},"Duplicate Price Configuration",-1)),s("button",{onClick:se,class:"text-gray-400 hover:text-gray-600"},t[37]||(t[37]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t[57]||(t[57]=s("small",{class:"text-gray-500 mb-4 block"},' If you wish to duplicate to all room types, please select "All Room Types" for both target room type and source room type. ',-1)),s("div",Ds,[s("div",Ms,[t[45]||(t[45]=s("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Source Configuration (Copy From)",-1)),s("div",Rs,[s("div",null,[t[40]||(t[40]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Season",-1)),y(s("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>c.value.sourceSeason=e),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[39]||(t[39]=s("option",{value:""},"Select Season",-1)),(o(!0),l(x,null,_(d.assignedSeasonTypes,e=>(o(),l("option",{key:e.id,value:e.id},b(e.name),9,Us))),128))],512),[[w,c.value.sourceSeason]])]),s("div",null,[t[42]||(t[42]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Type",-1)),y(s("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>c.value.sourceDateType=e),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[41]||(t[41]=s("option",{value:""},"Select Date Type",-1)),(o(!0),l(x,null,_(d.assignedDateTypes,e=>(o(),l("option",{key:e.id,value:e.id},b(e.name),9,Es))),128))],512),[[w,c.value.sourceDateType]])]),s("div",null,[t[44]||(t[44]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Room Type (Optional)",-1)),y(s("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>c.value.sourceRoomType=e),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[43]||(t[43]=s("option",{value:""},"All Room Types",-1)),(o(!0),l(x,null,_(d.packageUniqueRoomTypes,(e,a)=>(o(),l("option",{key:a,value:a},b(e),9,Is))),128))],512),[[w,c.value.sourceRoomType]])])])]),s("div",Bs,[s("div",Ns,[t[46]||(t[46]=s("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Target Configuration (Copy To)",-1)),s("div",null,[s("span",qs,"Target Count: "+b(E.value),1),s("button",{onClick:Se,class:"px-2 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 text-xs"}," Add Target ")])]),(o(!0),l(x,null,_(E.value,e=>(o(),l("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",key:e},[s("div",null,[t[48]||(t[48]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Season",-1)),y(s("select",{"onUpdate:modelValue":a=>c.value.targetConfigurations[e-1].season=a,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[47]||(t[47]=s("option",{value:""},"Select Season",-1)),(o(!0),l(x,null,_(d.assignedSeasonTypes,a=>(o(),l("option",{key:a.id,value:a.id},b(a.name),9,Ls))),128))],8,zs),[[w,c.value.targetConfigurations[e-1].season]])]),s("div",null,[t[50]||(t[50]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Type",-1)),y(s("select",{"onUpdate:modelValue":a=>c.value.targetConfigurations[e-1].dateType=a,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[49]||(t[49]=s("option",{value:""},"Select Date Type",-1)),(o(!0),l(x,null,_(d.assignedDateTypes,a=>(o(),l("option",{key:a.id,value:a.id},b(a.name),9,Hs))),128))],8,Fs),[[w,c.value.targetConfigurations[e-1].dateType]])]),s("div",null,[t[52]||(t[52]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Room Type (Optional)",-1)),s("div",Ys,[y(s("select",{"onUpdate:modelValue":a=>c.value.targetConfigurations[e-1].roomType=a,class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[51]||(t[51]=s("option",{value:""},"All Room Types",-1)),(o(!0),l(x,null,_(d.packageUniqueRoomTypes,(a,r)=>(o(),l("option",{key:r,value:r},b(a),9,Ws))),128))],8,Qs),[[w,c.value.targetConfigurations[e-1].roomType]]),E.value>1?(o(),l("button",{key:0,onClick:a=>Te(e-1),class:"px-2 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 text-xs",title:"Remove this target"}," × ",8,Gs)):T("",!0)])])]))),128))]),ee.value.length>0?(o(),l("div",Js,[t[53]||(t[53]=s("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Target Configurations to Update",-1)),s("div",Xs,[(o(!0),l(x,null,_(ee.value,e=>(o(),l("div",{key:`${e.room_type_id}-${e.id}`,class:"flex items-center"},[y(s("input",{type:"checkbox",id:`target-${e.room_type_id}-${e.id}`,value:e,"onUpdate:modelValue":t[8]||(t[8]=a=>c.value.selectedTargetConfigs=a),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,Zs),[[ae,c.value.selectedTargetConfigs]]),s("label",{for:`target-${e.room_type_id}-${e.id}`,class:"ml-2 text-sm text-gray-700"},[V(b(e.room_type_name)+" ("+b(e.room_type_capacity)+" pax) ",1),s("span",ea,"- ID: "+b(e.id),1)],8,Ks)]))),128))])])):T("",!0),s("div",ta,[t[56]||(t[56]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Duplicate Options",-1)),s("div",sa,[s("label",aa,[y(s("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>c.value.includeBaseCharges=e),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:""},null,512),[[ae,c.value.includeBaseCharges]]),t[54]||(t[54]=s("span",{class:"ml-2 text-sm text-gray-700"},"Include Base Charges",-1))]),s("label",na,[y(s("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=e=>c.value.includeSurcharges=e),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:""},null,512),[[ae,c.value.includeSurcharges]]),t[55]||(t[55]=s("span",{class:"ml-2 text-sm text-gray-700"},"Include Surcharges",-1))])])]),s("div",oa,[s("button",{onClick:se,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400"}," Cancel "),s("button",{onClick:Le,disabled:!de.value||G.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[G.value?(o(),l("span",ra,"Duplicating...")):(o(),l("span",ia,"Duplicate Configuration"))],8,la)])])])])])):T("",!0)]))}},va=We(ua,[["__scopeId","data-v-79f00339"]]);export{va as default};
