import{C as O,l as $,i as L,x as T,g as i,o as n,a as f,u as s,m as B,w as v,b as e,e as E,h as l,F as y,s as k,t as c,j as p,k as g,v as N,n as b,P as F,f as G}from"./app-DszDN3Wf.js";import{A as z}from"./AuthenticatedLayout-BNxuPyLp.js";import{S as h}from"./sweetalert2.esm.all-B0Dix5B2.js";import{_ as q}from"./BreadcrumbComponent-BdeX8qUd.js";import{u as A}from"./vue-router-Dd0FyG3S.js";import"./ApplicationLogo-DGwIPKYT.js";import"./LoadingComponent-B_uVTLea.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AntdIcon-D1M0HTdX.js";const K={class:"pb-12 pt-6"},J={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},W={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},H={class:"p-6 text-gray-900"},Q={key:0,class:"mb-4 rounded-md border border-red-200 bg-red-50 p-3"},X={class:"list-disc pl-5 text-sm text-red-700 space-y-1"},Y={class:"grid grid-cols-1 gap-6"},Z={key:0,class:"mt-1 text-sm text-red-600"},ee={key:0,class:"mt-1 text-sm text-red-600"},te={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},se={class:"space-y-1 text-center"},oe={key:0,class:"flex gap-4 mb-4"},ae=["src"],re=["onClick"],de={class:"text-sm text-gray-600"},ie={class:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},ne={key:0,class:"mt-1 text-sm text-red-600"},le={class:"hidden"},ce={key:0,class:"mt-1 text-sm text-red-600"},me={class:"grid grid-cols-2 gap-6"},ue={key:0,class:"mt-1 text-sm text-red-600"},pe={key:0,class:"mt-1 text-sm text-red-600"},ge={class:"grid grid-cols-7 gap-2"},_e=["id","value"],ye=["for"],xe={key:0,class:"mt-1 text-sm text-red-600"},fe={key:0,class:"mt-1 text-sm text-red-600"},ke={key:0,class:"mt-1 text-sm text-red-600"},be={class:"grid grid-cols-2 gap-6"},he=["max"],ve={key:0,class:"mt-1 text-sm text-red-600"},we=["min"],Ue={key:0,class:"mt-1 text-sm text-red-600"},De={key:1,class:"mt-1 text-sm text-red-600"},Ve={class:"mt-6 border-t border-gray-600 pt-6"},Pe={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},Ce={class:"text-sm text-red-600"},Re={class:"overflow-x-auto"},je={class:"min-w-full divide-y divide-gray-200"},Se={class:"bg-white divide-y divide-gray-200"},Ie={class:"px-6 py-4 whitespace-nowrap"},Me=["onUpdate:modelValue"],Oe={key:0,class:"mt-1 text-sm text-red-600"},$e={class:"px-6 py-4 whitespace-nowrap"},Le=["onUpdate:modelValue"],Te={key:0,class:"mt-1 text-sm text-red-600"},Be={class:"px-6 py-4"},Ee=["onUpdate:modelValue"],Ne={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Fe=["onClick"],Ge={class:"mt-6 flex justify-end"},ze=["disabled"],Ze={__name:"Duplicate",props:{package:Object},setup(U){const m=U,t=O({name:m.package.name,description:m.package.description,images:m.package.images||[],display_price_adult:m.package.display_price_adult,display_price_child:m.package.display_price_child,package_min_days:m.package.package_min_days,package_max_days:m.package.package_max_days,weekend_days:m.package.weekend_days||[0,6],terms_and_conditions:m.package.terms_and_conditions,location:m.package.location,package_start_date:m.package.package_start_date,package_end_date:m.package.package_end_date,room_types:m.package.room_types.map(d=>({name:d.name,max_occupancy:d.max_occupancy,description:d.description}))}),_=$("");A();const D=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],V=()=>{t.room_types.push({name:"",max_occupancy:4,description:""})},P=d=>{t.room_types.splice(d,1)},C=d=>{t.icon_photo=d.target.files[0]},R=d=>{const o=Array.from(d.target.files),a=10*1024*1024,r=["image/jpeg","image/png","image/gif"],u=[];if(o.forEach(x=>{r.includes(x.type)||u.push(`${x.name} is not a valid image file. Only JPG, PNG, and GIF are allowed.`),x.size>a&&u.push(`${x.name} is too large. Maximum file size is 10MB.`)}),u.length>0){h.fire({title:"Invalid Images",html:u.join("<br>"),icon:"error",confirmButtonText:"OK"});return}t.images=[...t.images,...o]},j=d=>{t.images[d],t.images.splice(d,1)},S=d=>typeof d=="string"?`/storage/${d}`:typeof window<"u"&&window.URL&&window.URL.createObjectURL?URL.createObjectURL(d):"",w=()=>{if(_.value="",t.package_start_date&&t.package_end_date){const d=new Date(t.package_start_date),o=new Date(t.package_end_date),a=Math.abs(o-d),r=Math.ceil(a/(1e3*60*60*24));o<=d?_.value="End date must be after start date":r<1&&(_.value="End date must be at least one day after start date")}},I=()=>{const o=["image/jpeg","image/png","image/gif"],a=[];if(t.images.forEach(r=>{r instanceof File&&(o.includes(r.type)||a.push(`${r.name} is not a valid image file. Only JPG, PNG, and GIF are allowed.`),r.size>10485760&&a.push(`${r.name} is too large. Maximum file size is 10MB.`))}),a.length>0){h.fire({title:"Invalid Images",html:a.join("<br>"),icon:"error",confirmButtonText:"OK"});return}if(w(),_.value){h.fire({title:"Validation Error",text:_.value,icon:"error",confirmButtonText:"OK"});return}t.post(route("packages.duplicate",m.package.id),{onSuccess:()=>{h.fire({title:"Success!",text:"Package has been duplicated successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{window.location.href=route("packages.index")})},onError:r=>{console.log("Validation errors:",r)}})},M=L(()=>[{title:"Packages",link:route("packages.index")},{title:"Duplicate Package"}]);return T(()=>{t.images.forEach(d=>{d instanceof File&&URL.revokeObjectURL(URL.createObjectURL(d))})}),(d,o)=>(n(),i(y,null,[f(s(B),{title:"Duplicate Package"}),f(z,null,{header:v(()=>o[9]||(o[9]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},null,-1)])),default:v(()=>[e("div",K,[e("div",J,[e("div",W,[e("div",H,[f(q,{breadcrumbs:M.value,class:"mb-9"},null,8,["breadcrumbs"]),e("form",{onSubmit:E(I,["prevent"])},[Object.keys(s(t).errors).length>0&&!s(t).errors.general?(n(),i("div",Q,[e("ul",X,[d.key!=="general"?(n(!0),i(y,{key:0},k(s(t).errors,(a,r)=>(n(),i("li",{key:r},c(a),1))),128)):l("",!0)])])):l("",!0),e("div",Y,[e("div",null,[o[10]||(o[10]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),p(e("input",{type:"text",id:"name","onUpdate:modelValue":o[0]||(o[0]=a=>s(t).name=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[g,s(t).name]]),s(t).errors.name?(n(),i("div",Z,c(s(t).errors.name),1)):l("",!0)]),e("div",null,[o[11]||(o[11]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),p(e("textarea",{id:"description","onUpdate:modelValue":o[1]||(o[1]=a=>s(t).description=a),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,s(t).description]]),s(t).errors.description?(n(),i("div",ee,c(s(t).errors.description),1)):l("",!0)]),e("div",null,[o[15]||(o[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Package Images",-1)),e("div",te,[e("div",se,[s(t).images&&s(t).images.length>0?(n(),i("div",oe,[(n(!0),i(y,null,k(s(t).images,(a,r)=>(n(),i("div",{key:r,class:"relative group"},[e("img",{src:S(a),class:"h-24 w-full object-cover rounded-lg",alt:"Package image"},null,8,ae),e("button",{type:"button",onClick:u=>j(r),class:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity"},o[12]||(o[12]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,re)]))),128))])):l("",!0),e("div",de,[e("label",ie,[o[13]||(o[13]=e("span",null,"Upload Images",-1)),e("input",{type:"file",onChange:R,accept:"image/*",multiple:"",class:"sr-only"},null,32)])]),o[14]||(o[14]=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])]),s(t).errors.images?(n(),i("div",ne,c(s(t).errors.images),1)):l("",!0)]),e("div",le,[o[16]||(o[16]=e("label",{for:"icon_photo",class:"block text-sm font-medium text-gray-700"},"Icon Photo",-1)),e("input",{type:"file",id:"icon_photo",onChange:C,accept:"image/*",class:"mt-1 block w-full"},null,32),s(t).errors.icon_photo?(n(),i("div",ce,c(s(t).errors.icon_photo),1)):l("",!0)]),e("div",me,[e("div",null,[o[17]||(o[17]=e("label",{for:"display_price_adult",class:"block text-sm font-medium text-gray-700"},"Display Price",-1)),p(e("input",{type:"number",id:"display_price_adult","onUpdate:modelValue":o[2]||(o[2]=a=>s(t).display_price_adult=a),step:"0.01",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,s(t).display_price_adult]]),s(t).errors.display_price_adult?(n(),i("div",ue,c(s(t).errors.display_price_adult),1)):l("",!0)]),e("div",null,[o[18]||(o[18]=e("label",{for:"package_min_days",class:"block text-sm font-medium text-gray-700"},"Package Duration (Nights)",-1)),p(e("input",{type:"number",id:"package_min_days","onUpdate:modelValue":o[3]||(o[3]=a=>s(t).package_min_days=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[g,s(t).package_min_days]]),s(t).errors.package_min_days?(n(),i("div",pe,c(s(t).errors.package_min_days),1)):l("",!0)])]),e("div",null,[o[19]||(o[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Weekend Days",-1)),e("div",ge,[(n(),i(y,null,k(D,(a,r)=>e("div",{key:r,class:"flex items-center"},[p(e("input",{type:"checkbox",id:"day-"+r,value:r,"onUpdate:modelValue":o[4]||(o[4]=u=>s(t).weekend_days=u),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,_e),[[N,s(t).weekend_days]]),e("label",{for:"day-"+r,class:"ml-2 text-sm text-gray-700"},c(a),9,ye)])),64))]),o[20]||(o[20]=e("p",{class:"mt-1 text-sm text-gray-500"},"Select which days are considered weekends for pricing purposes.",-1)),s(t).errors.weekend_days?(n(),i("div",xe,c(s(t).errors.weekend_days),1)):l("",!0)]),e("div",null,[o[21]||(o[21]=e("label",{for:"terms_and_conditions",class:"block text-sm font-medium text-gray-700"},"Terms and Conditions",-1)),p(e("textarea",{id:"terms_and_conditions","onUpdate:modelValue":o[5]||(o[5]=a=>s(t).terms_and_conditions=a),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,s(t).terms_and_conditions]]),s(t).errors.terms_and_conditions?(n(),i("div",fe,c(s(t).errors.terms_and_conditions),1)):l("",!0)]),e("div",null,[o[22]||(o[22]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Location",-1)),p(e("input",{type:"text",id:"location","onUpdate:modelValue":o[6]||(o[6]=a=>s(t).location=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,s(t).location]]),s(t).errors.location?(n(),i("div",ke,c(s(t).errors.location),1)):l("",!0)]),e("div",be,[e("div",null,[o[23]||(o[23]=e("label",{for:"package_start_date",class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),p(e("input",{type:"date",id:"package_start_date","onUpdate:modelValue":o[7]||(o[7]=a=>s(t).package_start_date=a),max:s(t).package_end_date?s(t).package_end_date:void 0,class:b(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(t).errors.package_start_date||s(t).errors.package_end_date}]),required:"",onChange:w},null,42,he),[[g,s(t).package_start_date]]),s(t).errors.package_start_date?(n(),i("div",ve,c(s(t).errors.package_start_date),1)):l("",!0)]),e("div",null,[o[24]||(o[24]=e("label",{for:"package_end_date",class:"block text-sm font-medium text-gray-700"},"End Date",-1)),p(e("input",{type:"date",id:"package_end_date","onUpdate:modelValue":o[8]||(o[8]=a=>s(t).package_end_date=a),min:s(t).package_start_date?new Date(new Date(s(t).package_start_date).getTime()+864e5).toISOString().split("T")[0]:void 0,class:b(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(t).errors.package_end_date}]),required:""},null,10,we),[[g,s(t).package_end_date]]),s(t).errors.package_end_date?(n(),i("div",Ue,c(s(t).errors.package_end_date),1)):l("",!0),_.value?(n(),i("div",De,c(_.value),1)):l("",!0)])]),e("div",Ve,[e("div",{class:"flex justify-between items-center mb-4"},[o[25]||(o[25]=e("h3",{class:"text-lg font-medium text-gray-900"},"Room Types",-1)),e("button",{type:"button",onClick:V,class:"px-4 py-2 text-xs bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200"}," Add Room Type ")]),s(t).errors.room_types?(n(),i("div",Pe,[e("div",Ce,c(s(t).errors.room_types),1)])):l("",!0),e("div",Re,[e("table",je,[o[26]||(o[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Room Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Max Occupancy"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Se,[(n(!0),i(y,null,k(s(t).room_types,(a,r)=>(n(),i("tr",{key:r},[e("td",Ie,[p(e("input",{type:"text","onUpdate:modelValue":u=>a.name=u,class:b(["block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(t).errors[`room_types.${r}.name`]}]),placeholder:"Room Type Name",required:""},null,10,Me),[[g,a.name]]),s(t).errors[`room_types.${r}.name`]?(n(),i("div",Oe,c(s(t).errors[`room_types.${r}.name`]),1)):l("",!0)]),e("td",$e,[p(e("input",{type:"number","onUpdate:modelValue":u=>a.max_occupancy=u,class:b(["block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(t).errors[`room_types.${r}.max_occupancy`]}]),min:"1",required:""},null,10,Le),[[g,a.max_occupancy]]),s(t).errors[`room_types.${r}.max_occupancy`]?(n(),i("div",Te,c(s(t).errors[`room_types.${r}.max_occupancy`]),1)):l("",!0)]),e("td",Be,[p(e("input",{type:"text","onUpdate:modelValue":u=>a.description=u,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Description"},null,8,Ee),[[g,a.description]])]),e("td",Ne,[e("button",{type:"button",onClick:u=>P(r),class:"text-red-600 hover:text-red-900"}," Remove ",8,Fe)])]))),128))])])])])]),e("div",Ge,[f(s(F),{href:d.route("packages.index"),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 mr-3 text-xs"},{default:v(()=>o[27]||(o[27]=[G(" Cancel ")])),_:1},8,["href"]),e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs",disabled:s(t).processing}," Create Duplicate ",8,ze)])],32)])])])])]),_:1})],64))}};export{Ze as default};
