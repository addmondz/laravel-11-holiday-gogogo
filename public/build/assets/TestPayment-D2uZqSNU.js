import{l as f,q as b,g as r,o as i,b as t,e as x,j as u,h as n,k as m,t as d,f as y,z as _}from"./app-CrRgH9Pl.js";const w={class:"min-h-screen bg-gray-100 py-12"},k={class:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8"},h={class:"bg-white rounded-lg shadow-lg p-6"},C={key:0,class:"mt-1 text-sm text-red-600"},P={class:"relative"},V={key:0,class:"mt-1 text-sm text-red-600"},q={key:0,class:"mt-1 text-sm text-red-600"},D={key:0,class:"mt-1 text-sm text-red-600"},N={key:0,class:"mt-1 text-sm text-red-600"},U={class:"flex justify-end"},M=["disabled"],T={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},F={__name:"TestPayment",setup(B){const o=f({detail:"",amount:"",order_id:"",customer_name:"",customer_email:"",customer_contact:""}),a=f({}),c=f(!1),v=()=>Date.now().toString();b(()=>{o.value.order_id=v(),o.value.detail="Test payment for holiday package booking - Room reservation for 2 adults and 1 child for 3 nights",o.value.amount="100.01",o.value.customer_name="John Doe",o.value.customer_email="john.doe@example.com",o.value.customer_contact="60123456789"});const p=()=>{a.value={};let s=!0;o.value.detail.trim()||(a.value.detail="Detail is required",s=!1),(!o.value.amount||parseFloat(o.value.amount)<=0)&&(a.value.amount="Please enter a valid amount greater than 0",s=!1),o.value.customer_name.trim()||(a.value.customer_name="Customer name is required",s=!1);const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return o.value.customer_email.trim()?e.test(o.value.customer_email)||(a.value.customer_email="Please enter a valid email address",s=!1):(a.value.customer_email="Customer email is required",s=!1),o.value.customer_contact.trim()||(a.value.customer_contact="Customer contact number is required",s=!1),s},g=async()=>{if(p())try{c.value=!0;const s=await _.post("/create-test-payment-transaction",{detail:o.value.detail,amount:parseFloat(o.value.amount),order_id:o.value.order_id,customer_name:o.value.customer_name,customer_email:o.value.customer_email,customer_contact:o.value.customer_contact});if(s.data.status==="success")console.log("Payment initiated:",s.data),window.open(s.data.url,"_blank");else throw new Error(s.data.message||"Payment initiation failed")}catch(s){console.error("Payment error:",s)}finally{c.value=!1}};return(s,e)=>(i(),r("div",w,[t("div",k,[t("div",h,[e[15]||(e[15]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"Test Payment Form"),t("p",{class:"text-gray-600"},"Please fill up the details below in order to test the payment.")],-1)),t("form",{onSubmit:x(g,["prevent"]),class:"space-y-6"},[t("div",null,[e[6]||(e[6]=t("label",{for:"detail",class:"block text-sm font-medium text-gray-700 mb-2"}," Detail ",-1)),u(t("textarea",{id:"detail","onUpdate:modelValue":e[0]||(e[0]=l=>o.value.detail=l),rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Description of the transaction",required:""},null,512),[[m,o.value.detail]]),a.value.detail?(i(),r("p",C,d(a.value.detail),1)):n("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{for:"amount",class:"block text-sm font-medium text-gray-700 mb-2"}," Amount ",-1)),t("div",P,[e[7]||(e[7]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 sm:text-sm"},"MYR")],-1)),u(t("input",{type:"number",id:"amount","onUpdate:modelValue":e[1]||(e[1]=l=>o.value.amount=l),step:"0.01",min:"0.01",class:"block w-full pl-12 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"0.00",required:""},null,512),[[m,o.value.amount]])]),a.value.amount?(i(),r("p",V,d(a.value.amount),1)):n("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{for:"order_id",class:"block text-sm font-medium text-gray-700 mb-2"}," Order ID ",-1)),u(t("input",{type:"text",id:"order_id","onUpdate:modelValue":e[2]||(e[2]=l=>o.value.order_id=l),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 bg-gray-50",readonly:""},null,512),[[m,o.value.order_id]]),e[10]||(e[10]=t("p",{class:"mt-1 text-sm text-gray-500"},"Order ID is defaulted to timestamp",-1))]),t("div",null,[e[11]||(e[11]=t("label",{for:"customer_name",class:"block text-sm font-medium text-gray-700 mb-2"}," Customer Name ",-1)),u(t("input",{type:"text",id:"customer_name","onUpdate:modelValue":e[3]||(e[3]=l=>o.value.customer_name=l),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Name of the customer",required:""},null,512),[[m,o.value.customer_name]]),a.value.customer_name?(i(),r("p",q,d(a.value.customer_name),1)):n("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{for:"customer_email",class:"block text-sm font-medium text-gray-700 mb-2"}," Customer Email ",-1)),u(t("input",{type:"email",id:"customer_email","onUpdate:modelValue":e[4]||(e[4]=l=>o.value.customer_email=l),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Email of the customer",required:""},null,512),[[m,o.value.customer_email]]),a.value.customer_email?(i(),r("p",D,d(a.value.customer_email),1)):n("",!0)]),t("div",null,[e[13]||(e[13]=t("label",{for:"customer_contact",class:"block text-sm font-medium text-gray-700 mb-2"}," Customer Contact No ",-1)),u(t("input",{type:"tel",id:"customer_contact","onUpdate:modelValue":e[5]||(e[5]=l=>o.value.customer_contact=l),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Contact number of customer",required:""},null,512),[[m,o.value.customer_contact]]),a.value.customer_contact?(i(),r("p",N,d(a.value.customer_contact),1)):n("",!0)]),t("div",U,[t("button",{type:"submit",disabled:c.value,class:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white text-base font-medium rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[c.value?(i(),r("svg",T,e[14]||(e[14]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):n("",!0),y(" "+d(c.value?"Processing...":"Proceed to Payment"),1)],8,M)])],32)])])]))}};export{F as default};
