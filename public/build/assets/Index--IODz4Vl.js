import{r as p,g as d,o as a,a as g,u as x,m as A,w as v,b as t,n,t as o,j as f,q as _,f as c,s as T,x as V,F as M,y as N,h,P as S,W as y}from"./app-D3nqVpAf.js";import{A as Y}from"./AuthenticatedLayout-Bz_VKq9K.js";import{P as z}from"./Pagination-Dt_YHpUr.js";import{h as B}from"./moment-C5S46NFB.js";import"./ApplicationLogo-Ddkw0COh.js";import"./LoadingComponent-WqcP7zIU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AntdIcon-D1uCYuHw.js";const R={class:"pb-12 pt-6"},I={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},U={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},$={class:"p-6 text-gray-900"},L={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-6"},O={class:"p-4"},q={class:"flex items-center"},E={class:"ml-4"},K={class:"text-lg font-semibold text-gray-900"},W={class:"p-4"},H={class:"flex items-center"},G={class:"ml-4"},J={class:"text-lg font-semibold text-gray-900"},Q={class:"p-4"},X={class:"flex items-center"},Z={class:"ml-4"},tt={class:"text-lg font-semibold text-gray-900"},et={class:"p-4"},st={class:"flex items-center"},ot={class:"ml-4"},rt={class:"text-lg font-semibold text-gray-900"},it={class:"p-4"},lt={class:"flex items-center"},dt={class:"ml-4"},at={class:"text-lg font-semibold text-gray-900"},nt={class:"p-4"},ut={class:"flex items-center"},mt={class:"ml-4"},ct={class:"text-lg font-semibold text-gray-900"},gt={class:"mb-6"},xt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 bg-white rounded-lg shadow-sm p-6"},pt={class:"md:col-span-1 lg:col-span-2 space-y-2"},vt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ft={class:"overflow-x-auto"},ht={class:"min-w-full divide-y divide-gray-200"},yt={class:"bg-white divide-y divide-gray-200"},bt={key:0},wt={class:"px-6 py-4 whitespace-nowrap"},kt={class:"text-sm font-medium text-gray-900"},_t={class:"text-sm text-gray-500"},Ct={class:"text-sm text-gray-500"},jt={class:"px-6 py-4 whitespace-nowrap"},Mt={class:"text-sm text-gray-900"},St={class:"text-sm text-gray-500"},Bt={key:0},Dt={key:1},Ft={class:"px-6 py-4"},Pt={class:"flex items-center gap-2"},At={class:"text-sm text-gray-900"},Tt={key:0,class:"relative group"},Vt={class:"px-6 py-4 whitespace-nowrap"},Nt={class:"text-sm text-gray-900"},Yt={class:"text-sm text-gray-500"},zt={class:"px-6 py-4 whitespace-nowrap"},Rt={class:"text-sm font-medium text-gray-900"},It={class:"px-6 py-4 whitespace-nowrap"},Ut={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},$t={class:"flex items-center space-x-3"},Lt=["href"],Ot={class:"mt-6"},Xt={__name:"Index",props:{bookings:Object,filters:Object,summary:Object},setup(r){const u=r,i=p({search:u.filters.search||"",status:u.filters.status||"all",dateFrom:u.filters.dateFrom||"",dateTo:u.filters.dateTo||""}),b=p(u.filters.search||""),w=p(u.filters.dateFrom||""),k=p(u.filters.dateTo||""),D=()=>{y.get(route("bookings.index"),{},{preserveState:!1,preserveScroll:!1})},C=()=>{y.get(route("bookings.index"),{search:b.value,status:i.value.status,dateFrom:w.value,dateTo:k.value},{preserveState:!0,preserveScroll:!0})},F=l=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(l),P=l=>{switch(l){case 0:return"Pending Approval";case 1:return"Approved";case 2:return"Rejected";case 3:return"Payment Completed";case 4:return"Refunded";default:return"Unknown"}},m=l=>{l==="all"?(i.value.status="all",y.get(route("bookings.index"),{search:i.value.search},{preserveState:!0,preserveScroll:!0})):(i.value.status=l,y.get(route("bookings.index"),{search:i.value.search,status:l},{preserveState:!0,preserveScroll:!0}))};return(l,e)=>(a(),d(M,null,[g(x(A),{title:"Bookings"}),g(Y,null,{header:v(()=>e[10]||(e[10]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},null,-1)])),default:v(()=>[t("div",R,[t("div",I,[t("div",U,[t("div",$,[e[34]||(e[34]=t("div",{class:"flex justify-between items-center mb-6"},[t("h3",{class:"text-lg font-medium"},"All Bookings")],-1)),t("div",L,[t("div",{class:n(["bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 cursor-pointer hover:border-indigo-300 transition-colors duration-200",{"border-indigo-500":i.value.status==="all"}]),onClick:e[0]||(e[0]=s=>m("all"))},[t("div",O,[t("div",q,[e[12]||(e[12]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])])],-1)),t("div",E,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Transactions",-1)),t("p",K,o(r.summary.total??0),1)])])])],2),t("div",{class:n(["bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 cursor-pointer hover:border-indigo-300 transition-colors duration-200",{"border-indigo-500":i.value.status==="0"}]),onClick:e[1]||(e[1]=s=>m("0"))},[t("div",W,[t("div",H,[e[14]||(e[14]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",G,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-500"},"Pending Approval",-1)),t("p",J,o(r.summary.pending??0),1)])])])],2),t("div",{class:n(["bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 cursor-pointer hover:border-indigo-300 transition-colors duration-200",{"border-indigo-500":i.value.status==="1"}]),onClick:e[2]||(e[2]=s=>m("1"))},[t("div",Q,[t("div",X,[e[16]||(e[16]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",Z,[e[15]||(e[15]=t("p",{class:"text-sm font-medium text-gray-500"},"Approved",-1)),t("p",tt,o(r.summary.approved??0),1)])])])],2),t("div",{class:n(["bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 cursor-pointer hover:border-indigo-300 transition-colors duration-200",{"border-indigo-500":i.value.status==="2"}]),onClick:e[3]||(e[3]=s=>m("2"))},[t("div",et,[t("div",st,[e[18]||(e[18]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])])],-1)),t("div",ot,[e[17]||(e[17]=t("p",{class:"text-sm font-medium text-gray-500"},"Rejected",-1)),t("p",rt,o(r.summary.rejected??0),1)])])])],2),t("div",{class:n(["bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 cursor-pointer hover:border-indigo-300 transition-colors duration-200",{"border-indigo-500":i.value.status==="3"}]),onClick:e[4]||(e[4]=s=>m("3"))},[t("div",it,[t("div",lt,[e[20]||(e[20]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])])],-1)),t("div",dt,[e[19]||(e[19]=t("p",{class:"text-sm font-medium text-gray-500"},"Payment Completed",-1)),t("p",at,o(r.summary.payment_completed??0),1)])])])],2),t("div",{class:n(["bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 cursor-pointer hover:border-indigo-300 transition-colors duration-200",{"border-indigo-500":i.value.status==="4"}]),onClick:e[5]||(e[5]=s=>m("4"))},[t("div",nt,[t("div",ut,[e[22]||(e[22]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})])])],-1)),t("div",mt,[e[21]||(e[21]=t("p",{class:"text-sm font-medium text-gray-500"},"Refunded",-1)),t("p",ct,o(r.summary.refunded??0),1)])])])],2)]),t("div",gt,[t("div",xt,[t("div",pt,[t("div",vt,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Travel Date From",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=s=>w.value=s),class:"w-full rounded-md border border-gray-300 shadow-sm px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500 text-sm"},null,512),[[_,w.value]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Travel Date To",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[7]||(e[7]=s=>k.value=s),class:"w-full rounded-md border border-gray-300 shadow-sm px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500 text-sm"},null,512),[[_,k.value]])])]),e[25]||(e[25]=t("p",{class:"text-sm text-gray-600"},[c(" ðŸ’¡ "),t("strong",{class:"font-semibold text-gray-800"},"Date Filter:"),c(" Find bookings for specific travel dates. Leave empty to see all bookings. ")],-1))]),t("div",{onKeyup:T(C,["enter"])},[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search Bookings",-1)),f(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=s=>b.value=s),placeholder:"Search by name, email, phone, ID...",class:"w-full rounded-md border border-gray-300 shadow-sm px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500 text-sm"},null,512),[[_,b.value]])],32),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),f(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>i.value.status=s),class:"w-full rounded-md border border-gray-300 shadow-sm px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500 text-sm"},e[27]||(e[27]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"0"},"Pending Approval",-1),t("option",{value:"1"},"Approved",-1),t("option",{value:"2"},"Rejected",-1),t("option",{value:"3"},"Payment Completed",-1),t("option",{value:"4"},"Refunded",-1)]),512),[[V,i.value.status]])])]),t("div",{class:"mt-4 flex justify-start items-center gap-2"},[t("button",{onClick:C,class:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," Search "),t("button",{onClick:D,class:"px-6 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Clear Filters ")])]),t("div",ft,[t("table",ht,[e[33]||(e[33]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Booking Name as per I/C "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Booking ID "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Package "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dates "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Price "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",yt,[r.bookings.data.length===0?(a(),d("tr",bt,e[29]||(e[29]=[t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No bookings found ",-1)]))):(a(!0),d(M,{key:1},N(r.bookings.data,s=>{var j;return a(),d("tr",{key:s.id},[t("td",wt,[t("div",kt,o(s.booking_name),1),t("div",_t,o(s.phone_number),1),t("div",Ct,o(s.booking_email),1)]),t("td",jt,[t("div",Mt,o(s.uuid),1),t("div",St,[c(o(s.adults)+" Adult"+o(s.adults>1?"s":"")+" ",1),s.children>0?(a(),d("span",Bt," , "+o(s.children)+" Child"+o(s.children>1?"ren":""),1)):h("",!0),s.infants>0?(a(),d("span",Dt," , "+o(s.infants)+" Infant"+o(s.infants>1?"s":""),1)):h("",!0)])]),t("td",Ft,[t("div",Pt,[t("span",At,o(((j=s.package)==null?void 0:j.name)||"N/A"),1),s.package?h("",!0):(a(),d("div",Tt,e[30]||(e[30]=[t("svg",{class:"w-4 h-4 text-amber-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("div",{class:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 hidden group-hover:block z-50 w-56 p-3 text-xs text-white bg-gray-800 rounded-lg shadow-xl whitespace-normal"},[c(" Package might be deleted. Please check with admin. "),t("div",{class:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"})],-1)])))])]),t("td",Vt,[t("div",Nt,o(x(B)(s.start_date).format("DD MMM YYYY"))+" - "+o(x(B)(s.end_date).format("DD MMM YYYY")),1),t("div",Yt,o(Math.ceil((new Date(s.end_date)-new Date(s.start_date))/(1e3*60*60*24)))+" nights ",1)]),t("td",zt,[t("div",Rt," MYR "+o(F(s.total_price)),1)]),t("td",It,[t("span",{class:n(["px-4 py-1 text-xs font-semibold rounded-full block min-w-[50px] text-center",s.status==0?"bg-yellow-100 text-yellow-800":s.status==1?"bg-green-100 text-green-800":s.status==2?"bg-red-100 text-red-800":s.status==3?"bg-blue-100 text-blue-800":s.status==4?"bg-slate-400 text-white":"bg-red-100 text-red-800"])},o(P(s.status)),3)]),t("td",Ut,[t("div",$t,[g(x(S),{href:l.route("bookings.show",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:v(()=>e[31]||(e[31]=[c(" View ")])),_:2},1032,["href"]),g(x(S),{href:l.route("bookings.edit",s.id),class:"text-blue-600 hover:text-blue-900 ml-4"},{default:v(()=>e[32]||(e[32]=[c(" Edit ")])),_:2},1032,["href"]),s.package?(a(),d("a",{key:0,href:l.route("quotation.with-hash",s.package.uuid)+"?booking="+s.uuid,class:n(["ml-4",s.status==1?"text-green-600 hover:text-green-900":"text-blue-600 hover:text-blue-900"])},o(s.status==1?"Pay Now":"View Booking"),11,Lt)):h("",!0)])])])}),128))])])]),t("div",Ot,[g(z,{links:r.bookings.links,from:r.bookings.from,to:r.bookings.to,total:r.bookings.total},null,8,["links","from","to","total"])])])])])])]),_:1})],64))}};export{Xt as default};
