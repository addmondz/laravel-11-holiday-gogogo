import{i as z,g as n,o as a,a as y,u as v,m as V,w as b,b as t,h as l,n as k,t as i,f as g,P,F as f,y as _,W as R}from"./app-DmLG6_3N.js";import{A as G}from"./AuthenticatedLayout-B-H8BA2x.js";import{_ as W}from"./BreadcrumbComponent-BmnI0U16.js";import{S as x}from"./sweetalert2.esm.all-B0Dix5B2.js";import{h as H}from"./moment-C5S46NFB.js";import"./ApplicationLogo-CyoZf6_h.js";import"./LoadingComponent-D_-YOXgm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AntdIcon-Cm2R28n6.js";const K={class:"flex justify-between items-center"},U={class:"pb-12 pt-6"},X={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},$={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6 text-gray-900"},Q={class:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200"},Z={class:"flex items-center justify-between"},O={class:"flex items-center"},tt={class:"flex-shrink-0"},et={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},st={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},ot={class:"ml-4"},it={class:"text-lg font-semibold text-gray-900"},nt={key:0,class:"mt-1"},at={class:"text-xs text-gray-500"},rt={class:"font-medium"},lt={key:0,class:"ml-1"},dt={key:0,class:"flex items-center gap-3"},ct={key:1,class:"flex items-center"},gt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8"},ut={class:"space-y-4"},xt={class:"mt-1 text-sm text-gray-900"},mt={class:"mt-1 text-sm text-gray-900"},pt={class:"mt-1 text-sm text-gray-900"},ht={key:0},yt={class:"mt-1 text-sm text-gray-900"},bt={key:1},kt={class:"mt-1 text-sm text-gray-900"},ft={key:2},wt={class:"mt-1 text-sm text-gray-900 flex items-center gap-2"},vt={class:"space-y-4"},_t={class:"mt-1 flex items-center gap-2"},Bt={class:"text-sm text-gray-900"},Ct={key:0,class:"relative group"},At={class:"mt-1 text-sm text-gray-900"},jt={class:"mt-1 text-sm text-gray-900"},Dt={key:0},Tt={class:"mt-1 text-sm font-medium text-gray-900"},Mt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-8"},St={class:"p-6 text-gray-900"},Pt={class:"overflow-x-auto"},Rt={class:"min-w-full divide-y divide-gray-200"},Nt={class:"bg-white divide-y divide-gray-200"},Yt={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"text-sm font-medium text-gray-900"},Ft={key:0,class:"text-xs text-indigo-600 bg-indigo-50 px-2 py-1 rounded whitespace-nowrap"},Et={class:"px-6 py-4 whitespace-nowrap"},It={class:"text-sm text-gray-900"},qt={class:"px-6 py-4 whitespace-nowrap"},zt={class:"text-sm text-gray-900"},Vt={class:"px-6 py-4 whitespace-nowrap"},Gt={class:"text-sm text-gray-900"},Wt={class:"px-6 py-4 whitespace-nowrap"},Ht={class:"text-sm text-gray-900"},Kt={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-8"},Ut={class:"p-6 text-gray-900"},Xt={class:"overflow-x-auto"},$t={class:"min-w-full divide-y divide-gray-200"},Jt={class:"bg-white divide-y divide-gray-200"},Qt={class:"px-6 py-4 whitespace-nowrap"},Zt={class:"text-sm font-medium text-gray-900"},Ot={class:"px-6 py-4"},te={class:"text-sm text-gray-900"},ee={class:"px-6 py-4 whitespace-nowrap"},se={class:"text-sm text-gray-900"},oe={class:"px-6 py-4 whitespace-nowrap"},ie={class:"text-sm text-gray-900"},ne={class:"px-6 py-4 whitespace-nowrap"},ae={class:"text-sm text-gray-900"},re={class:"px-6 py-4 whitespace-nowrap"},le={class:"text-sm text-gray-600 space-y-1"},de={key:0},ce={key:1},ge={key:2},ue={class:"px-6 py-4 whitespace-nowrap"},xe={class:"text-sm font-medium text-gray-900"},me={class:"bg-gray-50"},pe={class:"px-6 py-4 whitespace-nowrap"},he={class:"text-sm font-medium text-gray-900"},ye={key:1,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-8"},be={class:"p-6 text-gray-900"},ke={class:"overflow-x-auto"},fe={class:"min-w-full divide-y divide-gray-200"},we={class:"bg-white divide-y divide-gray-200"},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},_e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ae={class:"px-6 py-4 whitespace-nowrap"},Le={__name:"Show",props:{booking:Object,sstPercent:{type:Number,default:0}},setup(s){const w=s,m=r=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(r),c=r=>{const e=r*(1+w.sstPercent/100);return Math.floor(e)},N=r=>H(r).format("DD MMM YYYY, h:mm A"),Y=z(()=>[{title:"Bookings",link:route("bookings.index")},{title:"Booking Details"}]),B=r=>{switch(r){case 0:return{bg:"bg-yellow-100",icon:"text-yellow-600"};case 1:return{bg:"bg-green-100",icon:"text-green-600"};case 2:return{bg:"bg-red-100",icon:"text-red-600"};case 3:return{bg:"bg-blue-100",icon:"text-blue-600"};case 4:return{bg:"bg-white",icon:"text-slate-600"};default:return{bg:"bg-gray-100",icon:"text-gray-600"}}},C=r=>{switch(r){case 0:return"Pending Approval";case 1:return"Approved";case 2:return"Rejected";case 3:return"Payment Completed";case 4:return"Refunded";default:return""}},L=r=>{navigator.clipboard.writeText(r),alert("Link copied to clipboard")},F=()=>{x.fire({title:"Are you sure?",text:"Are you sure you want to approve this booking?",icon:"question",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, approve it!",cancelButtonText:"Cancel"}).then(r=>{r.isConfirmed&&I()})},E=()=>{x.fire({title:"Are you sure?",text:"Are you sure you want to reject this booking?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, reject it!",cancelButtonText:"Cancel"}).then(r=>{r.isConfirmed&&q()})},I=async()=>{try{const e=await(await fetch(route("bookings.approve",w.booking.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();e.success?x.fire("Approved!","Booking has been approved successfully.","success").then(()=>{R.reload()}):x.fire("Error!",e.message||"Failed to approve booking.","error")}catch{x.fire("Error!","An error occurred while approving the booking.","error")}},q=async()=>{try{const e=await(await fetch(route("bookings.reject",w.booking.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();e.success?x.fire("Rejected!","Booking has been rejected successfully.","success").then(()=>{R.reload()}):x.fire("Error!",e.message||"Failed to reject booking.","error")}catch{x.fire("Error!","An error occurred while rejecting the booking.","error")}};return(r,e)=>(a(),n(f,null,[y(v(V),{title:"Booking Details"}),y(G,null,{header:b(()=>[t("div",K,[e[2]||(e[2]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Booking Details",-1)),y(v(P),{href:r.route("bookings.edit",s.booking.id),class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"},{default:b(()=>e[1]||(e[1]=[g(" Edit Booking ")])),_:1},8,["href"])])]),default:b(()=>{var A,j;return[t("div",U,[t("div",X,[t("div",$,[t("div",J,[y(W,{breadcrumbs:Y.value,class:"mb-6"},null,8,["breadcrumbs"]),t("div",Q,[t("div",Z,[t("div",O,[t("div",tt,[t("div",{class:k(["w-12 h-12 rounded-full flex items-center justify-center",B(s.booking.status).bg])},[(a(),n("svg",{class:k(["w-6 h-6",B(s.booking.status).icon]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[[2,4].includes(s.booking.status)?(a(),n("path",et)):(a(),n("path",st))],2))],2)]),t("div",ot,[e[3]||(e[3]=t("p",{class:"text-sm font-medium text-gray-600"},"Booking Status",-1)),t("p",it,i(C(s.booking.status)),1),s.booking.approval_status&&s.booking.approval_status!=="pending"?(a(),n("div",nt,[t("p",at,[g(i(s.booking.approval_status==="approved"?"Approved":"Rejected")+" by ",1),t("span",rt,i(((A=s.booking.approver)==null?void 0:A.name)||"Admin"),1),s.booking.approval_date?(a(),n("span",lt," on "+i(N(s.booking.approval_date)),1)):l("",!0)])])):l("",!0)])]),s.booking.status===0?(a(),n("div",dt,[t("button",{onClick:F,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"},e[4]||(e[4]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),g(" Approve Booking ")])),t("button",{onClick:E,class:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200"},e[5]||(e[5]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),g(" Reject Booking ")]))])):(a(),n("div",ct,[t("span",{class:k(["px-4 py-2 text-sm font-semibold rounded-full",s.booking.status==0?"bg-yellow-100 text-yellow-800":s.booking.status==1?"bg-green-100 text-green-800":s.booking.status==2?"bg-red-100 text-red-800":s.booking.status==3?"bg-blue-100 text-blue-800":s.booking.status==4?"bg-slate-100 text-slate-800":"bg-gray-100 text-gray-800"])},i(C(s.booking.status)),3)]))])]),t("div",gt,[t("div",null,[e[14]||(e[14]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Booking Information",-1)),t("div",ut,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Booking Name",-1)),t("p",xt,i(s.booking.booking_name),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Phone Number",-1)),t("p",mt,i(s.booking.phone_number),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Tin Number",-1)),t("p",pt,i(s.booking.booking_ic||"-"),1)]),s.booking.special_remarks?(a(),n("div",ht,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"Special Remarks",-1)),t("p",yt,i(s.booking.special_remarks||"-"),1)])):l("",!0),s.booking.uuid?(a(),n("div",bt,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"Booking Reference",-1)),t("p",kt,i(s.booking.uuid||"-"),1)])):l("",!0),s.booking.package?(a(),n("div",ft,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700"},"Pay now / view payment",-1)),t("div",wt,[y(v(P),{href:r.route("quotation.with-hash",s.booking.package.uuid)+"?booking="+s.booking.uuid,class:"text-indigo-600 hover:text-indigo-900 mr-2"},{default:b(()=>e[11]||(e[11]=[g(" Go to payment page ")])),_:1},8,["href"]),t("button",{onClick:e[0]||(e[0]=o=>L(r.route("quotation.with-hash",s.booking.package.uuid)+"?booking="+s.booking.uuid)),class:"flex items-center gap-2 bg-gray-100 px-2 rounded-sm border border-gray-300"},e[12]||(e[12]=[g(" copy link "),t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]))])])):l("",!0)])]),t("div",null,[e[20]||(e[20]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Package Details",-1)),t("div",vt,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700"},"Package",-1)),t("div",_t,[t("span",Bt,i(((j=s.booking.package)==null?void 0:j.name)||"N/A"),1),s.booking.package?l("",!0):(a(),n("div",Ct,e[15]||(e[15]=[t("svg",{class:"w-4 h-4 text-amber-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("div",{class:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 hidden group-hover:block z-50 w-56 p-3 text-xs text-white bg-gray-800 rounded-lg shadow-xl whitespace-normal"},[g(" Package might be deleted. Please check with admin. "),t("div",{class:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"})],-1)])))])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700"},"Dates",-1)),t("p",At,i(new Date(s.booking.start_date).toLocaleDateString())+" - "+i(new Date(s.booking.end_date).toLocaleDateString())+" ("+i(Math.ceil((new Date(s.booking.end_date)-new Date(s.booking.start_date))/(1e3*60*60*24)))+" nights) ",1)]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700"},"Total Guests",-1)),t("p",jt,[g(i(s.booking.adults)+" Adult"+i(s.booking.adults>1?"s":"")+" ",1),s.booking.children>0?(a(),n("span",Dt," , "+i(s.booking.children)+" Child"+i(s.booking.children>1?"ren":""),1)):l("",!0)])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700"},"Total Price",-1)),t("p",Tt,"MYR "+i(m(s.booking.total_price)),1)])])])])])]),t("div",Mt,[t("div",St,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Room Details",-1)),t("div",Pt,[t("table",Rt,[e[21]||(e[21]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Room Type"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Adults"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Children"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Infants"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Guests")])],-1)),t("tbody",Nt,[(a(!0),n(f,null,_(s.booking.rooms,o=>{var d,u;return a(),n("tr",{key:o.id},[t("td",Yt,[t("div",Lt,[g(i(((d=o.room_type)==null?void 0:d.name)||"N/A")+" ",1),(u=o.room_type)!=null&&u.max_occupancy?(a(),n("span",Ft," Max "+i(o.room_type.max_occupancy)+" pax ",1)):l("",!0)])]),t("td",Et,[t("div",It,i(o.adults),1)]),t("td",qt,[t("div",zt,i(o.children),1)]),t("td",Vt,[t("div",Gt,i(o.infants),1)]),t("td",Wt,[t("div",Ht,i(o.adults+o.children+o.infants),1)])])}),128))])])])])]),s.booking.add_ons&&s.booking.add_ons.length>0?(a(),n("div",Kt,[t("div",Ut,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Add-ons Details",-1)),t("div",Xt,[t("table",$t,[e[24]||(e[24]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Add-on Name"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Adults"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Children"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Infants"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prices"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total")])],-1)),t("tbody",Jt,[(a(!0),n(f,null,_(s.booking.add_ons,o=>{var d,u,p,h,D,T,M,S;return a(),n("tr",{key:o.id},[t("td",Qt,[t("div",Zt,i(((d=o.package_add_on)==null?void 0:d.name)||"N/A"),1)]),t("td",Ot,[t("div",te,i(((u=o.package_add_on)==null?void 0:u.description)||"-"),1)]),t("td",ee,[t("div",se,i(o.adults),1)]),t("td",oe,[t("div",ie,i(o.children),1)]),t("td",ne,[t("div",ae,i(o.infants),1)]),t("td",re,[t("div",le,[(p=o.package_add_on)!=null&&p.adult_price?(a(),n("div",de," Adult: MYR "+i(m(c(o.package_add_on.adult_price))),1)):l("",!0),(h=o.package_add_on)!=null&&h.child_price?(a(),n("div",ce," Child: MYR "+i(m(c(o.package_add_on.child_price))),1)):l("",!0),(D=o.package_add_on)!=null&&D.infant_price?(a(),n("div",ge," Infant: MYR "+i(m(c(o.package_add_on.infant_price))),1)):l("",!0)])]),t("td",ue,[t("div",xe," MYR "+i(m(o.adults*c(((T=o.package_add_on)==null?void 0:T.adult_price)||0)+o.children*c(((M=o.package_add_on)==null?void 0:M.child_price)||0)+o.infants*c(((S=o.package_add_on)==null?void 0:S.infant_price)||0))),1)])])}),128)),t("tr",me,[e[23]||(e[23]=t("td",{colspan:"6",class:"px-6 py-4 whitespace-nowrap"},[t("div",{class:"text-sm font-medium text-gray-900"},"Add-ons Total")],-1)),t("td",pe,[t("div",he," MYR "+i(m(s.booking.add_ons.reduce((o,d)=>{var u,p,h;return o+d.adults*c(((u=d.package_add_on)==null?void 0:u.adult_price)||0)+d.children*c(((p=d.package_add_on)==null?void 0:p.child_price)||0)+d.infants*c(((h=d.package_add_on)==null?void 0:h.infant_price)||0)},0))),1)])])])])])])])):l("",!0),s.booking.transactions&&s.booking.transactions.length>0?(a(),n("div",ye,[t("div",be,[t("div",null,[e[27]||(e[27]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Transaction History",-1)),t("div",ke,[t("table",fe,[e[26]||(e[26]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transaction ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Payment Method"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),t("tbody",we,[(a(!0),n(f,null,_(s.booking.transactions,o=>(a(),n("tr",{key:o.id},[t("td",ve,i(new Date(o.created_at).toLocaleDateString()),1),t("td",_e,i(o.transaction_id),1),t("td",Be,i(o.payment_method),1),t("td",Ce," MYR "+i(m(o.amount)),1),t("td",Ae,[t("span",{class:k(["px-2 py-1 text-sm font-semibold rounded-full",o.status==="completed"?"bg-green-100 text-green-800":o.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},i(o.status.charAt(0).toUpperCase()+o.status.slice(1)),3)])]))),128))])])])])])])):l("",!0)])])]}),_:1})],64))}};export{Le as default};
