import{i as O,C as R,l as A,g as d,o as n,a as x,u as r,m as N,w as y,b as s,e as F,j as c,h as m,q as g,t as u,F as w,y as U,v as h,n as f,f as E,P as q,z as B}from"./app-BW_dco3m.js";import{A as G}from"./AuthenticatedLayout-Cc3eX_Fd.js";import{S as b}from"./sweetalert2.esm.all-B0Dix5B2.js";import{_ as W}from"./BreadcrumbComponent-DTkRVYq4.js";import{Q as z}from"./vue-quill.snow-CxSLA-S4.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-DkgaSLoG.js";import"./LoadingComponent-CkUYuyCK.js";import"./AntdIcon-BAcd--AH.js";const J={class:"pb-12 pt-6"},K={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},Q={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},X={class:"p-6 text-gray-900"},Y={class:"grid grid-cols-1 gap-6"},Z={key:0,class:"mt-1 text-sm text-red-600"},ee={key:0,class:"mt-1 text-sm text-red-600"},te={class:"grid grid-cols-2 gap-6"},se={key:0,class:"mt-1 text-sm text-red-600"},re={key:0,class:"mt-1 text-sm text-red-600"},ae={class:"grid grid-cols-7 gap-2"},oe=["id","value"],de=["for"],ne={key:0,class:"mt-1 text-sm text-red-600"},ie={class:"grid grid-cols-2 gap-6"},le={key:0,class:"mt-1 text-sm text-red-600"},me={key:0,class:"mt-1 text-sm text-red-600"},ue={class:"grid grid-cols-1 gap-6"},ce={key:0,class:"mt-1 text-sm text-red-600"},ge={key:0,class:"mt-1 text-sm text-red-600"},pe={class:"grid grid-cols-3 gap-6"},_e={key:0,class:"mt-1 text-sm text-red-600"},xe={key:0,class:"mt-1 text-sm text-red-600"},fe={key:0,class:"mt-1 text-sm text-red-600"},be={key:0,class:"mt-1 text-sm text-red-600"},ke={key:1,class:"mt-4 p-4 bg-gray-50 rounded-md border border-gray-200"},ye=["innerHTML"],we={class:"quill-container"},he={key:0,class:"mt-1 text-sm text-red-600"},ve={key:0,class:"mt-1 text-sm text-red-600"},Ue={key:0,class:"mt-1 text-sm text-red-600"},Ee={class:"grid grid-cols-2 gap-6"},Ve={key:0,class:"mt-1 text-sm text-red-600"},Pe={key:0,class:"mt-1 text-sm text-red-600"},Te={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},Le={class:"space-y-1 text-center"},Se={key:0,class:"flex gap-4 mb-4"},Ce=["src"],je=["onClick"],Ie={class:"text-sm text-gray-600"},Me={class:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},$e={key:0,class:"mt-1 text-sm text-red-600"},De={class:"mt-6 flex justify-end"},Oe=["disabled"],Re={__name:"Edit",props:{package:Object},setup(V){const i=V,P=O(()=>[{title:"Packages",link:route("packages.index")},{title:"Edit Package"}]),T=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=R({name:i.package.name,description:i.package.description,images:i.package.images||[],display_price_adult:i.package.display_price_adult,display_price_child:i.package.display_price_child,package_min_days:i.package.package_max_days,package_max_days:i.package.package_max_days,terms_and_conditions:i.package.terms_and_conditions,extra_remark:i.package.extra_remark||"",location:i.package.location,wordpress_link:i.package.wordpress_link||"",package_start_date:i.package.package_start_date,package_end_date:i.package.package_end_date,weekend_days:i.package.weekend_days||[0,6],sst_enable:!!i.package.sst_enable,no_children_and_infant:!!i.package.no_children_and_infant,infant_max_age_desc:i.package.infant_max_age_desc||"",child_max_age_desc:i.package.child_max_age_desc||"",max_adults:i.package.max_adults||null,max_children:i.package.max_children||null,max_infants:i.package.max_infants||null}),L=o=>{const e=Array.from(o.target.files),a=10*1024*1024,l=["image/jpeg","image/png","image/gif"],p=[];if(e.forEach(_=>{l.includes(_.type)||p.push(`${_.name} is not a valid image file. Only JPG, PNG, and GIF are allowed.`),_.size>a&&p.push(`${_.name} is too large. Maximum file size is 10MB.`)}),p.length>0){b.fire({title:"Invalid Images",html:p.join("<br>"),icon:"error",confirmButtonText:"OK"});return}t.images=[...t.images,...e]},S=o=>{const e=t.images[o];typeof e=="string"&&(t.delete_images||(t.delete_images=[]),t.delete_images.push(e)),t.images.splice(o,1)},v=o=>{if(!o)return"";const e=/(https?:\/\/[^\s]+)/g;return o.replace(e,'<a href="$1" target="_blank" class="text-blue-600 underline">$1</a>')},C=o=>{if(!o)return"";const e=o.split(/\r?\n/).filter(l=>l.trim().length>0);return e.length===0?"":e.length===1?`<p>${v(e[0])}</p>`:`<ul class="list-disc list-inside space-y-1">${e.map(l=>`<li class="mb-1">${v(l.trim())}</li>`).join("")}</ul>`},j=o=>typeof o=="string"?I(o):typeof window<"u"&&window.URL&&window.URL.createObjectURL?URL.createObjectURL(o):"",I=o=>o.startsWith("images/")?`/${o}`:o.startsWith("room-types/")?`/images/${o}`:`/images/${o}`;A(()=>{t.images.forEach(o=>{o instanceof File&&URL.revokeObjectURL(URL.createObjectURL(o))})});const M=()=>{const o=new FormData;Object.keys(t).forEach(e=>{e==="images"?t.images.forEach((a,l)=>{a instanceof File?o.append(`images[${l}]`,a):typeof a=="string"&&o.append(`existing_images[${l}]`,a)}):e==="delete_images"?t.delete_images&&t.delete_images.length>0&&t.delete_images.forEach((a,l)=>{o.append(`delete_images[${l}]`,a)}):Array.isArray(t[e])?o.append(e,JSON.stringify(t[e])):typeof t[e]=="boolean"?o.append(e,t[e]?1:0):o.append(e,t[e])}),B.post(route("packages.update",i.package.id),o,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"X-HTTP-Method-Override":"PUT"}}).then(e=>{b.fire({title:"Success!",text:"Package has been updated successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{window.location.href=route("packages.show",i.package.id)})}).catch(e=>{var a,l,p;if(t.clearErrors(),((a=e.response)==null?void 0:a.status)===422&&e.response.data.errors){const _=e.response.data.errors;Object.entries(_).forEach(([$,k])=>{const D=Array.isArray(k)?k.join(", "):k;t.setError($,D)}),b.fire({title:"Validation Error",text:"Please correct the highlighted errors and try again.",icon:"error"})}else b.fire({title:"Error",text:((p=(l=e.response)==null?void 0:l.data)==null?void 0:p.message)||"Something went wrong.",icon:"error"})})};return(o,e)=>(n(),d(w,null,[x(r(N),{title:"Edit Package"}),x(G,null,{header:y(()=>e[18]||(e[18]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},null,-1)])),default:y(()=>[s("div",J,[s("div",K,[s("div",Q,[s("div",X,[x(W,{breadcrumbs:P.value,class:"mb-9"},null,8,["breadcrumbs"]),s("form",{onSubmit:F(M,["prevent"])},[s("div",Y,[s("div",null,[e[19]||(e[19]=s("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),c(s("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>r(t).name=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[g,r(t).name]]),r(t).errors.name?(n(),d("div",Z,u(r(t).errors.name),1)):m("",!0)]),s("div",null,[e[20]||(e[20]=s("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),c(s("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=a=>r(t).description=a),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,r(t).description]]),r(t).errors.description?(n(),d("div",ee,u(r(t).errors.description),1)):m("",!0)]),s("div",te,[s("div",null,[e[21]||(e[21]=s("label",{for:"display_price_adult",class:"block text-sm font-medium text-gray-700"},"Display Price",-1)),c(s("input",{type:"number",id:"display_price_adult","onUpdate:modelValue":e[2]||(e[2]=a=>r(t).display_price_adult=a),step:"0.01",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,r(t).display_price_adult]]),r(t).errors.display_price_adult?(n(),d("div",se,u(r(t).errors.display_price_adult),1)):m("",!0)]),s("div",null,[e[22]||(e[22]=s("label",{for:"package_max_days",class:"block text-sm font-medium text-gray-700"},"Package Duration (Nights)",-1)),c(s("input",{type:"number",id:"package_max_days","onUpdate:modelValue":e[3]||(e[3]=a=>r(t).package_max_days=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[g,r(t).package_max_days]]),r(t).errors.package_max_days?(n(),d("div",re,u(r(t).errors.package_max_days),1)):m("",!0)]),s("div",null,[e[23]||(e[23]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Weekend Days",-1)),s("div",ae,[(n(),d(w,null,U(T,(a,l)=>s("div",{key:l,class:"flex items-center"},[c(s("input",{type:"checkbox",id:"day-"+l,value:l,"onUpdate:modelValue":e[4]||(e[4]=p=>r(t).weekend_days=p),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,oe),[[h,r(t).weekend_days,void 0,{number:!0}]]),s("label",{for:"day-"+l,class:"ml-2 text-sm text-gray-700"},u(a),9,de)])),64))]),e[24]||(e[24]=s("p",{class:"mt-1 text-sm text-gray-500"},"Select which days are considered weekends for pricing purposes.",-1)),r(t).errors.weekend_days?(n(),d("div",ne,u(r(t).errors.weekend_days),1)):m("",!0)])]),s("div",ie,[s("div",null,[e[25]||(e[25]=s("label",{for:"infant_max_age_desc",class:"block text-sm font-medium text-gray-700"},"Infant Age Description",-1)),c(s("input",{type:"text",id:"infant_max_age_desc","onUpdate:modelValue":e[5]||(e[5]=a=>r(t).infant_max_age_desc=a),class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":r(t).errors.infant_max_age_desc}]),placeholder:"e.g. 0 - 11 months old"},null,2),[[g,r(t).infant_max_age_desc]]),r(t).errors.infant_max_age_desc?(n(),d("div",le,u(r(t).errors.infant_max_age_desc),1)):m("",!0)]),s("div",null,[e[26]||(e[26]=s("label",{for:"child_max_age_desc",class:"block text-sm font-medium text-gray-700"},"Child Age Description",-1)),c(s("input",{type:"text",id:"child_max_age_desc","onUpdate:modelValue":e[6]||(e[6]=a=>r(t).child_max_age_desc=a),class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":r(t).errors.child_max_age_desc}]),placeholder:"e.g. 1 - 12 years old"},null,2),[[g,r(t).child_max_age_desc]]),r(t).errors.child_max_age_desc?(n(),d("div",me,u(r(t).errors.child_max_age_desc),1)):m("",!0)])]),s("div",ue,[s("div",null,[e[27]||(e[27]=s("label",{for:"sst_enable",class:"block text-sm font-medium text-gray-700"},"SST Enable",-1)),c(s("input",{type:"checkbox",id:"sst_enable","onUpdate:modelValue":e[7]||(e[7]=a=>r(t).sst_enable=a),class:"mt-1 block rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[h,r(t).sst_enable]]),e[28]||(e[28]=s("span",{class:"text-xs text-gray-500"}," If enabled, the SST will be added to the total price. ",-1)),r(t).errors.sst_enable?(n(),d("div",ce,u(r(t).errors.sst_enable),1)):m("",!0)]),s("div",null,[e[29]||(e[29]=s("label",{for:"no_children_and_infant",class:"block text-sm font-medium text-gray-700"},"No Children and Infant",-1)),c(s("input",{type:"checkbox",id:"no_children_and_infant","onUpdate:modelValue":e[8]||(e[8]=a=>r(t).no_children_and_infant=a),class:"mt-1 block rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[h,r(t).no_children_and_infant]]),e[30]||(e[30]=s("span",{class:"text-xs text-gray-500"}," If checked, children and infant input fields will be hidden on the quotation page. ",-1)),r(t).errors.no_children_and_infant?(n(),d("div",ge,u(r(t).errors.no_children_and_infant),1)):m("",!0)])]),s("div",pe,[s("div",null,[e[31]||(e[31]=s("label",{for:"max_adults",class:"block text-sm font-medium text-gray-700"},"Max Adults",-1)),c(s("input",{type:"number",id:"max_adults","onUpdate:modelValue":e[9]||(e[9]=a=>r(t).max_adults=a),min:"1",class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":r(t).errors.max_adults}])},null,2),[[g,r(t).max_adults]]),r(t).errors.max_adults?(n(),d("div",_e,u(r(t).errors.max_adults),1)):m("",!0)]),s("div",null,[e[32]||(e[32]=s("label",{for:"max_children",class:"block text-sm font-medium text-gray-700"},"Max Children",-1)),c(s("input",{type:"number",id:"max_children","onUpdate:modelValue":e[10]||(e[10]=a=>r(t).max_children=a),min:"1",class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":r(t).errors.max_children}])},null,2),[[g,r(t).max_children]]),r(t).errors.max_children?(n(),d("div",xe,u(r(t).errors.max_children),1)):m("",!0)]),s("div",null,[e[33]||(e[33]=s("label",{for:"max_infants",class:"block text-sm font-medium text-gray-700"},"Max Infants",-1)),c(s("input",{type:"number",id:"max_infants","onUpdate:modelValue":e[11]||(e[11]=a=>r(t).max_infants=a),min:"1",class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":r(t).errors.max_infants}])},null,2),[[g,r(t).max_infants]]),r(t).errors.max_infants?(n(),d("div",fe,u(r(t).errors.max_infants),1)):m("",!0)])]),s("div",null,[e[35]||(e[35]=s("label",{for:"terms_and_conditions",class:"block text-sm font-medium text-gray-700"},[E(" Terms and Conditions "),s("span",{class:"text-xs text-gray-500 font-normal ml-2"},"(Enter each point on a new line)")],-1)),c(s("textarea",{id:"terms_and_conditions","onUpdate:modelValue":e[12]||(e[12]=a=>r(t).terms_and_conditions=a),rows:"8",placeholder:"Enter each term or condition on a new line. They will be displayed as bullet points on the quotation page.",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,r(t).terms_and_conditions]]),e[36]||(e[36]=s("p",{class:"mt-1 text-xs text-gray-500"}," Each line will be displayed as a bullet point. Use line breaks to separate different terms. ",-1)),r(t).errors.terms_and_conditions?(n(),d("div",be,u(r(t).errors.terms_and_conditions),1)):m("",!0),r(t).terms_and_conditions?(n(),d("div",ke,[e[34]||(e[34]=s("p",{class:"text-xs font-medium text-gray-700 mb-2"},"Preview:",-1)),s("div",{class:"text-sm text-gray-600",innerHTML:C(r(t).terms_and_conditions)},null,8,ye)])):m("",!0)]),s("div",null,[e[37]||(e[37]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Extra Remark",-1)),s("div",we,[x(r(z),{content:r(t).extra_remark,"onUpdate:content":e[13]||(e[13]=a=>r(t).extra_remark=a),contentType:"html",theme:"snow",toolbar:"essential"},null,8,["content"])]),r(t).errors.extra_remark?(n(),d("div",he,u(r(t).errors.extra_remark),1)):m("",!0)]),s("div",null,[e[38]||(e[38]=s("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Location",-1)),c(s("input",{type:"text",id:"location","onUpdate:modelValue":e[14]||(e[14]=a=>r(t).location=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,r(t).location]]),r(t).errors.location?(n(),d("div",ve,u(r(t).errors.location),1)):m("",!0)]),s("div",null,[e[39]||(e[39]=s("label",{for:"wordpress_link",class:"block text-sm font-medium text-gray-700"},"WordPress Link",-1)),c(s("input",{type:"url",id:"wordpress_link","onUpdate:modelValue":e[15]||(e[15]=a=>r(t).wordpress_link=a),placeholder:"https://example.com/package",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,r(t).wordpress_link]]),e[40]||(e[40]=s("p",{class:"mt-1 text-xs text-gray-500"}," Enter the full URL to the WordPress page for this package. ",-1)),r(t).errors.wordpress_link?(n(),d("div",Ue,u(r(t).errors.wordpress_link),1)):m("",!0)]),s("div",Ee,[s("div",null,[e[41]||(e[41]=s("label",{for:"package_start_date",class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),c(s("input",{type:"date",id:"package_start_date","onUpdate:modelValue":e[16]||(e[16]=a=>r(t).package_start_date=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[g,r(t).package_start_date]]),r(t).errors.package_start_date?(n(),d("div",Ve,u(r(t).errors.package_start_date),1)):m("",!0)]),s("div",null,[e[42]||(e[42]=s("label",{for:"package_end_date",class:"block text-sm font-medium text-gray-700"},"End Date",-1)),c(s("input",{type:"date",id:"package_end_date","onUpdate:modelValue":e[17]||(e[17]=a=>r(t).package_end_date=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,r(t).package_end_date]]),r(t).errors.package_end_date?(n(),d("div",Pe,u(r(t).errors.package_end_date),1)):m("",!0)])]),s("div",null,[e[46]||(e[46]=s("label",{class:"block text-sm font-medium text-gray-700"},"Package Images",-1)),s("div",Te,[s("div",Le,[r(t).images&&r(t).images.length>0?(n(),d("div",Se,[(n(!0),d(w,null,U(r(t).images,(a,l)=>(n(),d("div",{key:l,class:"relative group"},[s("img",{src:j(a),class:"h-24 w-full object-cover rounded-lg",alt:"Room type image"},null,8,Ce),s("button",{type:"button",onClick:p=>S(l),class:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity"},e[43]||(e[43]=[s("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,je)]))),128))])):m("",!0),s("div",Ie,[s("label",Me,[e[44]||(e[44]=s("span",null,"Upload Images",-1)),s("input",{type:"file",onChange:L,accept:"image/*",multiple:"",class:"sr-only"},null,32)])]),e[45]||(e[45]=s("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])]),r(t).errors.images?(n(),d("div",$e,u(r(t).errors.images),1)):m("",!0)])]),s("div",De,[x(r(q),{href:o.route("packages.index"),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 mr-3 text-xs"},{default:y(()=>e[47]||(e[47]=[E(" Cancel ")])),_:1},8,["href"]),s("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs",disabled:r(t).processing}," Update Package ",8,Oe)])],32)])])])])]),_:1})],64))}},Je=H(Re,[["__scopeId","data-v-ae44fae1"]]);export{Je as default};
