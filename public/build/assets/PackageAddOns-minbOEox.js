import{r as a,k as F,g as d,o as s,b as e,a as C,h as x,F as q,y as I,c as L,w as E,f as S,t as c,e as N,j as l,q as u}from"./app-DD5QYUKO.js";import{_ as V}from"./Modal.vue_vue_type_script_setup_true_lang-DK-ZPX_i.js";import{L as $}from"./LoadingComponent-D9Qye0eh.js";import{P as K}from"./Pagination-B-MuTL-i.js";import{S as b}from"./sweetalert2.esm.all-B0Dix5B2.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"space-y-6"},O={class:"flex justify-between items-center"},z={class:"overflow-x-auto"},G={key:0,class:"flex justify-center items-center h-full min-h-[400px]"},H={key:1,class:"min-w-full divide-y divide-gray-200"},Q={class:"bg-white divide-y divide-gray-200"},W={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Z={class:"px-6 py-4 text-sm text-gray-900"},ee=["title"],te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},oe={key:0,class:"font-medium"},re={key:1,class:"text-gray-400"},ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},se={key:0,class:"font-medium"},de={key:1,class:"text-gray-400"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ae={key:0,class:"font-medium"},le={key:1,class:"text-gray-400"},ue={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ce=["onClick"],pe=["onClick"],me={key:0},ge={class:"mt-4"},fe={class:"p-6"},be={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded relative"},ve={class:"grid grid-cols-1 gap-6"},xe={class:"grid grid-cols-3 gap-4"},ye={class:"mt-6 flex justify-end space-x-3"},he=["disabled"],ke={class:"p-6"},_e={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded relative"},we={class:"grid grid-cols-1 gap-6"},Ae={class:"grid grid-cols-3 gap-4"},Ce={class:"mt-6 flex justify-end space-x-3"},Pe=["disabled"],Me={__name:"PackageAddOns",props:{packageId:{type:Number,required:!0}},setup(U){const P=U,p=a({data:[],links:[],from:null,to:null,total:0}),y=a(!0),M=a(0),h=a(!1),k=a(!1),m=a(!1),g=a(""),f=a(""),n=a({name:"",description:"",adult_price:null,child_price:null,infant_price:null}),i=a({id:null,name:"",description:"",adult_price:null,child_price:null,infant_price:null}),v=async(r=1)=>{try{const t=await axios.get(route("package-add-ons.index",P.packageId),{params:{page:r}});p.value=t.data,y.value=!1}catch(t){console.error("Error fetching date blockers:",t),y.value=!1}},R=r=>{try{v(r),M.value++}catch(t){console.error("Error changing page:",t)}},_=r=>r?parseFloat(r).toFixed(2):"0.00",w=()=>{h.value=!1,n.value={name:"",description:"",adult_price:null,child_price:null,infant_price:null},g.value=""},A=()=>{k.value=!1,i.value={id:null,name:"",description:"",adult_price:null,child_price:null,infant_price:null},f.value=""},T=async()=>{m.value=!0,g.value="";try{const r=await fetch(route("package-add-ons.store",P.packageId),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(n.value)});if(r.ok)w(),await b.fire("Success!","Package add-on has been created successfully.","success"),v();else{const t=await r.json();g.value=t.message||"An error occurred while creating the add-on."}}catch{g.value="An error occurred while creating the add-on."}finally{m.value=!1}},j=r=>{i.value={id:r.id,name:r.name,description:r.description||"",adult_price:r.adult_price,child_price:r.child_price,infant_price:r.infant_price},k.value=!0},B=async()=>{m.value=!0,f.value="";try{const r=await fetch(route("package-add-ons.update",i.value.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({name:i.value.name,description:i.value.description,adult_price:i.value.adult_price,child_price:i.value.child_price,infant_price:i.value.infant_price})});if(r.ok)A(),await b.fire("Success!","Package add-on has been updated successfully.","success"),v();else{const t=await r.json();f.value=t.message||"An error occurred while updating the add-on."}}catch{f.value="An error occurred while updating the add-on."}finally{m.value=!1}},Y=async r=>{if((await b.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#e3342f",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{(await fetch(route("package-add-ons.destroy",r),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok?(await b.fire("Deleted!","Package add-on has been deleted.","success"),v()):await b.fire("Error!","Failed to delete package add-on.","error")}catch{await b.fire("Error!","An error occurred while deleting the add-on.","error")}};return F(()=>{v()}),(r,t)=>(s(),d("div",J,[e("div",O,[t[13]||(t[13]=e("h3",{class:"text-md font-medium text-gray-900"},"Package Add-ons",-1)),e("button",{onClick:t[0]||(t[0]=o=>h.value=!0),class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs"}," Add Package Add-on ")]),e("div",z,[y.value?(s(),d("div",G,[C($)])):(s(),d("table",H,[t[15]||(t[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Adult Price "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Child Price "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Infant Price "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Q,[(s(!0),d(q,null,I(p.value.data,o=>(s(),d("tr",{key:o.id},[e("td",W,c(o.name),1),e("td",Z,[e("div",{class:"max-w-xs truncate",title:o.description},c(o.description||"No description"),9,ee)]),e("td",te,[o.adult_price?(s(),d("span",oe,"MYR "+c(_(o.adult_price)),1)):(s(),d("span",re,"-"))]),e("td",ie,[o.child_price?(s(),d("span",se,"MYR "+c(_(o.child_price)),1)):(s(),d("span",de,"-"))]),e("td",ne,[o.infant_price?(s(),d("span",ae,"MYR "+c(_(o.infant_price)),1)):(s(),d("span",le,"-"))]),e("td",ue,[e("button",{onClick:D=>j(o),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Edit ",8,ce),e("button",{onClick:D=>Y(o.id),class:"text-red-600 hover:text-red-900"}," Delete ",8,pe)])]))),128)),p.value.data.length===0?(s(),d("tr",me,t[14]||(t[14]=[e("td",{colspan:"6",class:"text-center text-gray-500 py-4 border-t border-b border-gray-300"}," No package add-ons found ",-1)]))):x("",!0)])]))]),e("div",ge,[p.value.data.length>0?(s(),L(K,{links:p.value.links,from:p.value.from,to:p.value.to,total:p.value.total,"component-loading":!0,onPageChange:R,key:M.value},null,8,["links","from","to","total"])):x("",!0)]),C(V,{show:h.value,onClose:w},{default:E(()=>[e("div",fe,[t[22]||(t[22]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Add Package Add-on",-1)),g.value?(s(),d("div",be,[e("button",{onClick:t[1]||(t[1]=o=>g.value=""),class:"absolute top-2 right-2 text-red-700 hover:text-red-900"},t[16]||(t[16]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),S(" "+c(g.value),1)])):x("",!0),e("form",{onSubmit:N(T,["prevent"])},[e("div",ve,[e("div",null,[t[17]||(t[17]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name *",-1)),l(e("input",{type:"text",id:"name","onUpdate:modelValue":t[2]||(t[2]=o=>n.value.name=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[u,n.value.name]])]),e("div",null,[t[18]||(t[18]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),l(e("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=o=>n.value.description=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[u,n.value.description]])]),e("div",xe,[e("div",null,[t[19]||(t[19]=e("label",{for:"adult_price",class:"block text-sm font-medium text-gray-700"},"Adult Price (MYR)",-1)),l(e("input",{type:"number",id:"adult_price","onUpdate:modelValue":t[4]||(t[4]=o=>n.value.adult_price=o),step:"0.01",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[u,n.value.adult_price,void 0,{number:!0}]])]),e("div",null,[t[20]||(t[20]=e("label",{for:"child_price",class:"block text-sm font-medium text-gray-700"},"Child Price (MYR)",-1)),l(e("input",{type:"number",id:"child_price","onUpdate:modelValue":t[5]||(t[5]=o=>n.value.child_price=o),step:"0.01",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[u,n.value.child_price,void 0,{number:!0}]])]),e("div",null,[t[21]||(t[21]=e("label",{for:"infant_price",class:"block text-sm font-medium text-gray-700"},"Infant Price (MYR)",-1)),l(e("input",{type:"number",id:"infant_price","onUpdate:modelValue":t[6]||(t[6]=o=>n.value.infant_price=o),step:"0.01",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[u,n.value.infant_price,void 0,{number:!0}]])])])]),e("div",ye,[e("button",{type:"button",onClick:w,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:m.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 disabled:opacity-50"},c(m.value?"Adding...":"Add Add-on"),9,he)])],32)])]),_:1},8,["show"]),C(V,{show:k.value,onClose:A},{default:E(()=>[e("div",ke,[t[29]||(t[29]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Edit Package Add-on",-1)),f.value?(s(),d("div",_e,[e("button",{onClick:t[7]||(t[7]=o=>f.value=""),class:"absolute top-2 right-2 text-red-700 hover:text-red-900"},t[23]||(t[23]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),S(" "+c(f.value),1)])):x("",!0),e("form",{onSubmit:N(B,["prevent"])},[e("div",we,[e("div",null,[t[24]||(t[24]=e("label",{for:"edit_name",class:"block text-sm font-medium text-gray-700"},"Name *",-1)),l(e("input",{type:"text",id:"edit_name","onUpdate:modelValue":t[8]||(t[8]=o=>i.value.name=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[u,i.value.name]])]),e("div",null,[t[25]||(t[25]=e("label",{for:"edit_description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),l(e("textarea",{id:"edit_description","onUpdate:modelValue":t[9]||(t[9]=o=>i.value.description=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[u,i.value.description]])]),e("div",Ae,[e("div",null,[t[26]||(t[26]=e("label",{for:"edit_adult_price",class:"block text-sm font-medium text-gray-700"},"Adult Price (MYR)",-1)),l(e("input",{type:"number",id:"edit_adult_price","onUpdate:modelValue":t[10]||(t[10]=o=>i.value.adult_price=o),step:"0.01",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[u,i.value.adult_price,void 0,{number:!0}]])]),e("div",null,[t[27]||(t[27]=e("label",{for:"edit_child_price",class:"block text-sm font-medium text-gray-700"},"Child Price (MYR)",-1)),l(e("input",{type:"number",id:"edit_child_price","onUpdate:modelValue":t[11]||(t[11]=o=>i.value.child_price=o),step:"0.01",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[u,i.value.child_price,void 0,{number:!0}]])]),e("div",null,[t[28]||(t[28]=e("label",{for:"edit_infant_price",class:"block text-sm font-medium text-gray-700"},"Infant Price (MYR)",-1)),l(e("input",{type:"number",id:"edit_infant_price","onUpdate:modelValue":t[12]||(t[12]=o=>i.value.infant_price=o),step:"0.01",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[u,i.value.infant_price,void 0,{number:!0}]])])])]),e("div",Ce,[e("button",{type:"button",onClick:A,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:m.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 disabled:opacity-50"},c(m.value?"Updating...":"Update Add-on"),9,Pe)])],32)])]),_:1},8,["show"])]))}},Te=X(Me,[["__scopeId","data-v-de27ba85"]]);export{Te as default};
