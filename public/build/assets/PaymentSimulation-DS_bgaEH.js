import{l as f,g as d,o as u,a as b,b as t,u as v,m as w,h as y,t as a,n as h,F as P,y as k}from"./app-C4hHOT-8.js";import{S as l}from"./sweetalert2.esm.all-B0Dix5B2.js";const _={class:"min-h-screen bg-gray-100 py-12"},C={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},B={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},F={class:"p-6"},S={class:"text-center"},E={class:"text-gray-600 mb-8"},N={class:"max-w-2xl mx-auto bg-gray-50 rounded-lg p-6 mb-8"},Y={class:"grid grid-cols-2 gap-4 text-left"},D={class:"font-medium"},A={class:"font-medium"},T={class:"font-medium"},V={key:0,class:"mb-6 p-4 bg-red-50 rounded-md"},$={class:"text-sm text-red-600"},j={key:1,class:"mb-8"},R={class:"flex justify-center space-x-4"},U=["disabled"],q=["disabled"],z={class:"mt-6"},I=["disabled"],G={__name:"PaymentSimulation",props:{transaction:{type:Object,required:!0}},setup(s){const c=s,o=f(!1),i=f(null),p=n=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n),m=async n=>{var e,r;o.value=!0,i.value=null;try{if((await k.post(`/api/transactions/${c.transaction.id}/update-status`,{status:n})).data.success)n==="completed"?(await l.fire({title:"Payment Successful!",text:"Your payment has been processed successfully.",icon:"success",confirmButtonColor:"#10B981"}),window.location.href=route("bookings.payment.success",c.transaction.booking_id)):(await l.fire({title:"Payment Failed",text:"Your payment could not be processed. Please try again.",icon:"error",confirmButtonColor:"#EF4444"}),window.location.reload());else throw new Error("Failed to update transaction status")}catch(g){i.value=((r=(e=g.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to process payment simulation",l.fire({title:"Error",text:i.value,icon:"error",confirmButtonColor:"#EF4444"})}finally{o.value=!1}},x=()=>{l.fire({title:"Cancel Payment?",text:"Are you sure you want to cancel this payment?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, cancel payment",cancelButtonText:"No, continue payment",confirmButtonColor:"#EF4444"}).then(n=>{n.isConfirmed&&(window.location.href=route("bookings.show",c.transaction.booking_id))})};return(n,e)=>(u(),d(P,null,[b(v(w),{title:"Payment Simulation"}),t("div",_,[t("div",C,[t("div",B,[t("div",F,[t("div",S,[e[7]||(e[7]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-4"},"Payment Processing",-1)),t("p",E," Please complete your payment for booking #"+a(s.transaction.booking_id),1),t("div",N,[e[5]||(e[5]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Transaction Details",-1)),t("div",Y,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm text-gray-600"},"Booking Reference",-1)),t("p",D,a(s.transaction.booking_id),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-600"},"Amount",-1)),t("p",A,"MYR "+a(p(s.transaction.amount)),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-600"},"Status",-1)),t("p",T,[t("span",{class:h(["px-2 py-1 text-sm font-semibold rounded-full",s.transaction.status==="completed"?"bg-green-100 text-green-800":s.transaction.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},a(s.transaction.status.charAt(0).toUpperCase()+s.transaction.status.slice(1)),3)])])])]),i.value?(u(),d("div",V,[t("p",$,a(i.value),1)])):y("",!0),s.transaction.status==="failed"?(u(),d("div",j,e[6]||(e[6]=[t("div",{class:"bg-red-50 border border-red-200 rounded-md p-4 mb-6"},[t("p",{class:"text-red-800"}," Your last payment attempt was unsuccessful. Please try again. ")],-1)]))):y("",!0),t("div",R,[t("button",{onClick:e[0]||(e[0]=r=>m("completed")),class:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",disabled:o.value},a(o.value?"Processing...":"Complete Payment"),9,U),t("button",{onClick:e[1]||(e[1]=r=>m("failed")),class:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",disabled:o.value},a(o.value?"Processing...":"Simulate Failed Payment"),9,q)]),t("div",z,[t("button",{onClick:x,class:"text-gray-600 hover:text-gray-900",disabled:o.value}," Cancel and return to booking ",8,I)])])])])])])],64))}};export{G as default};
