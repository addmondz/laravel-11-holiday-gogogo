import{i as P,g as a,o as r,a as g,u as x,m as M,w as u,b as t,h as c,n as m,t as s,f as l,P as w,F as b,q as v,W as B}from"./app-BzLs-4wL.js";import{A as R}from"./AuthenticatedLayout-B76cbZw_.js";import{_ as N}from"./BreadcrumbComponent-Dx3MXc__.js";import{S as d}from"./sweetalert2.esm.all-B0Dix5B2.js";import{h as L}from"./moment-C5S46NFB.js";import"./ApplicationLogo-CzWtjtH9.js";import"./LoadingComponent-BIHsoWSD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AntdIcon-jozX424Z.js";const F={class:"flex justify-between items-center"},E={class:"pb-12 pt-6"},Y={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},q={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},I={class:"p-6 text-gray-900"},O={class:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200"},V={class:"flex items-center justify-between"},z={class:"flex items-center"},G={class:"flex-shrink-0"},H={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},K={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},U={class:"ml-4"},W={class:"text-lg font-semibold text-gray-900"},X={key:0,class:"mt-1"},$={class:"text-xs text-gray-500"},J={class:"font-medium"},Q={key:0,class:"ml-1"},Z={key:0,class:"flex items-center gap-3"},tt={key:1,class:"flex items-center"},et={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8"},ot={class:"space-y-4"},st={class:"mt-1 text-sm text-gray-900"},nt={class:"mt-1 text-sm text-gray-900"},it={class:"mt-1 text-sm text-gray-900"},at={key:0},rt={class:"mt-1 text-sm text-gray-900"},lt={key:1},dt={class:"mt-1 text-sm text-gray-900"},ct={class:"mt-1 text-sm text-gray-900 flex items-center gap-2"},gt={class:"space-y-4"},ut={class:"mt-1 text-sm text-gray-900"},mt={class:"mt-1 text-sm text-gray-900"},xt={class:"mt-1 text-sm text-gray-900"},bt={key:0},yt={class:"mt-1 text-sm font-medium text-gray-900"},kt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-8"},pt={class:"p-6 text-gray-900"},ft={class:"overflow-x-auto"},ht={class:"min-w-full divide-y divide-gray-200"},wt={class:"bg-white divide-y divide-gray-200"},vt={class:"px-6 py-4 whitespace-nowrap"},Bt={class:"text-sm font-medium text-gray-900"},Ct={class:"text-xs text-indigo-600 bg-indigo-50 px-2 py-1 rounded whitespace-nowrap"},jt={class:"px-6 py-4 whitespace-nowrap"},At={class:"text-sm text-gray-900"},Dt={class:"px-6 py-4 whitespace-nowrap"},St={class:"text-sm text-gray-900"},Tt={class:"px-6 py-4 whitespace-nowrap"},_t={class:"text-sm text-gray-900"},Pt={class:"px-6 py-4 whitespace-nowrap"},Mt={class:"text-sm text-gray-900"},Rt={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-8"},Nt={class:"p-6 text-gray-900"},Lt={class:"overflow-x-auto"},Ft={class:"min-w-full divide-y divide-gray-200"},Et={class:"bg-white divide-y divide-gray-200"},Yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},qt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},It={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Vt={class:"px-6 py-4 whitespace-nowrap"},Qt={__name:"Show",props:{booking:Object},setup(o){const y=o,k=n=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n),C=n=>L(n).format("DD MMM YYYY, h:mm A"),j=P(()=>[{title:"Bookings",link:route("bookings.index")},{title:"Booking Details"}]),p=n=>{switch(n){case 0:return{bg:"bg-yellow-100",icon:"text-yellow-600"};case 1:return{bg:"bg-green-100",icon:"text-green-600"};case 2:return{bg:"bg-red-100",icon:"text-red-600"};case 3:return{bg:"bg-blue-100",icon:"text-blue-600"};case 4:return{bg:"bg-white",icon:"text-slate-600"};default:return{bg:"bg-gray-100",icon:"text-gray-600"}}},f=n=>{switch(n){case 0:return"Pending Approval";case 1:return"Approved";case 2:return"Rejected";case 3:return"Payment Completed";case 4:return"Refunded";default:return""}},A=n=>{navigator.clipboard.writeText(n),alert("Link copied to clipboard")},D=()=>{d.fire({title:"Are you sure?",text:"Are you sure you want to approve this booking?",icon:"question",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, approve it!",cancelButtonText:"Cancel"}).then(n=>{n.isConfirmed&&T()})},S=()=>{d.fire({title:"Are you sure?",text:"Are you sure you want to reject this booking?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, reject it!",cancelButtonText:"Cancel"}).then(n=>{n.isConfirmed&&_()})},T=async()=>{try{const e=await(await fetch(route("bookings.approve",y.booking.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();e.success?d.fire("Approved!","Booking has been approved successfully.","success").then(()=>{B.reload()}):d.fire("Error!",e.message||"Failed to approve booking.","error")}catch{d.fire("Error!","An error occurred while approving the booking.","error")}},_=async()=>{try{const e=await(await fetch(route("bookings.reject",y.booking.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();e.success?d.fire("Rejected!","Booking has been rejected successfully.","success").then(()=>{B.reload()}):d.fire("Error!",e.message||"Failed to reject booking.","error")}catch{d.fire("Error!","An error occurred while rejecting the booking.","error")}};return(n,e)=>(r(),a(b,null,[g(x(M),{title:"Booking Details"}),g(R,null,{header:u(()=>[t("div",F,[e[2]||(e[2]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Booking Details",-1)),g(x(w),{href:n.route("bookings.edit",o.booking.id),class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"},{default:u(()=>e[1]||(e[1]=[l(" Edit Booking ")])),_:1},8,["href"])])]),default:u(()=>{var h;return[t("div",E,[t("div",Y,[t("div",q,[t("div",I,[g(N,{breadcrumbs:j.value,class:"mb-6"},null,8,["breadcrumbs"]),t("div",O,[t("div",V,[t("div",z,[t("div",G,[t("div",{class:m(["w-12 h-12 rounded-full flex items-center justify-center",p(o.booking.status).bg])},[(r(),a("svg",{class:m(["w-6 h-6",p(o.booking.status).icon]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[[2,4].includes(o.booking.status)?(r(),a("path",H)):(r(),a("path",K))],2))],2)]),t("div",U,[e[3]||(e[3]=t("p",{class:"text-sm font-medium text-gray-600"},"Booking Status",-1)),t("p",W,s(f(o.booking.status)),1),o.booking.approval_status&&o.booking.approval_status!=="pending"?(r(),a("div",X,[t("p",$,[l(s(o.booking.approval_status==="approved"?"Approved":"Rejected")+" by ",1),t("span",J,s(((h=o.booking.approver)==null?void 0:h.name)||"Admin"),1),o.booking.approval_date?(r(),a("span",Q," on "+s(C(o.booking.approval_date)),1)):c("",!0)])])):c("",!0)])]),o.booking.status===0?(r(),a("div",Z,[t("button",{onClick:D,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"},e[4]||(e[4]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),l(" Approve Booking ")])),t("button",{onClick:S,class:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200"},e[5]||(e[5]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),l(" Reject Booking ")]))])):(r(),a("div",tt,[t("span",{class:m(["px-4 py-2 text-sm font-semibold rounded-full",o.booking.status==0?"bg-yellow-100 text-yellow-800":o.booking.status==1?"bg-green-100 text-green-800":o.booking.status==2?"bg-red-100 text-red-800":o.booking.status==3?"bg-blue-100 text-blue-800":o.booking.status==4?"bg-slate-100 text-slate-800":"bg-gray-100 text-gray-800"])},s(f(o.booking.status)),3)]))])]),t("div",et,[t("div",null,[e[14]||(e[14]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Booking Information",-1)),t("div",ot,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Booking Name",-1)),t("p",st,s(o.booking.booking_name),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Phone Number",-1)),t("p",nt,s(o.booking.phone_number),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"IC/Passport Number",-1)),t("p",it,s(o.booking.booking_ic),1)]),o.booking.special_remarks?(r(),a("div",at,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"Special Remarks",-1)),t("p",rt,s(o.booking.special_remarks),1)])):c("",!0),o.booking.special_remarks?(r(),a("div",lt,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"Booking Reference",-1)),t("p",dt,s(o.booking.uuid),1)])):c("",!0),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700"},"Pay now / view payment",-1)),t("div",ct,[g(x(w),{href:n.route("quotation.with-hash",o.booking.package.uuid)+"?booking="+o.booking.uuid,class:"text-indigo-600 hover:text-indigo-900 mr-2"},{default:u(()=>e[11]||(e[11]=[l(" Go to payment page ")])),_:1},8,["href"]),t("button",{onClick:e[0]||(e[0]=i=>A(n.route("quotation.with-hash",o.booking.package.uuid)+"?booking="+o.booking.uuid)),class:"flex items-center gap-2 bg-gray-100 px-2 rounded-sm border border-gray-300"},e[12]||(e[12]=[l(" copy link "),t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]))])])])]),t("div",null,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Package Details",-1)),t("div",gt,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700"},"Package",-1)),t("p",ut,s(o.booking.package.name),1)]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700"},"Dates",-1)),t("p",mt,s(new Date(o.booking.start_date).toLocaleDateString())+" - "+s(new Date(o.booking.end_date).toLocaleDateString())+" ("+s(Math.ceil((new Date(o.booking.end_date)-new Date(o.booking.start_date))/(1e3*60*60*24)))+" nights) ",1)]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700"},"Total Guests",-1)),t("p",xt,[l(s(o.booking.adults)+" Adult"+s(o.booking.adults>1?"s":"")+" ",1),o.booking.children>0?(r(),a("span",bt," , "+s(o.booking.children)+" Child"+s(o.booking.children>1?"ren":""),1)):c("",!0)])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700"},"Total Price",-1)),t("p",yt,"MYR "+s(k(o.booking.total_price)),1)])])])])])]),t("div",kt,[t("div",pt,[e[21]||(e[21]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Room Details",-1)),t("div",ft,[t("table",ht,[e[20]||(e[20]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Room Type"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Adults"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Children"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Infants"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Guests")])],-1)),t("tbody",wt,[(r(!0),a(b,null,v(o.booking.rooms,i=>(r(),a("tr",{key:i.id},[t("td",vt,[t("div",Bt,[l(s(i.room_type.name)+" ",1),t("span",Ct," Max "+s(i.room_type.max_occupancy)+" pax ",1)])]),t("td",jt,[t("div",At,s(i.adults),1)]),t("td",Dt,[t("div",St,s(i.children),1)]),t("td",Tt,[t("div",_t,s(i.infants),1)]),t("td",Pt,[t("div",Mt,s(i.adults+i.children+i.infants),1)])]))),128))])])])])]),o.booking.transactions&&o.booking.transactions.length>0?(r(),a("div",Rt,[t("div",Nt,[t("div",null,[e[23]||(e[23]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Transaction History",-1)),t("div",Lt,[t("table",Ft,[e[22]||(e[22]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transaction ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Payment Method"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),t("tbody",Et,[(r(!0),a(b,null,v(o.booking.transactions,i=>(r(),a("tr",{key:i.id},[t("td",Yt,s(new Date(i.created_at).toLocaleDateString()),1),t("td",qt,s(i.transaction_id),1),t("td",It,s(i.payment_method),1),t("td",Ot," MYR "+s(k(i.amount)),1),t("td",Vt,[t("span",{class:m(["px-2 py-1 text-sm font-semibold rounded-full",i.status==="paid"?"bg-green-100 text-green-800":i.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},s(i.status.charAt(0).toUpperCase()+i.status.slice(1)),3)])]))),128))])])])])])])):c("",!0)])])]}),_:1})],64))}};export{Qt as default};
