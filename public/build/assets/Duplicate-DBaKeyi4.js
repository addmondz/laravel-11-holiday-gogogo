import{C as P,l as E,i as R,g as r,o as i,a as x,u as s,m as T,w as f,b as e,e as N,j as l,h as p,k as c,t as u,n as b,F as v,p as q,P as B,f as O}from"./app-DCl2SVmg.js";import{A as M}from"./AuthenticatedLayout-BCqB2sjZ.js";import{S as y}from"./sweetalert2.esm.all-DWO__QVt.js";import{_ as j}from"./BreadcrumbComponent-BnoS9uaY.js";import{u as A}from"./vue-router-Crlvbc61.js";import"./ApplicationLogo-DJjvvGN4.js";import"./LoadingComponent-D1Em1gCA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AntdIcon-ed2GXhIi.js";const F={class:"pb-12 pt-6"},K={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},L={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},I={class:"p-6 text-gray-900"},$={class:"grid grid-cols-1 gap-6"},z={key:0,class:"mt-1 text-sm text-red-600"},G={key:0,class:"mt-1 text-sm text-red-600"},H={class:"hidden"},J={key:0,class:"mt-1 text-sm text-red-600"},Q={class:"grid grid-cols-2 gap-6"},W={key:0,class:"mt-1 text-sm text-red-600"},X={key:0,class:"mt-1 text-sm text-red-600"},Y={key:0,class:"mt-1 text-sm text-red-600"},Z={key:0,class:"mt-1 text-sm text-red-600"},ee={class:"grid grid-cols-2 gap-6"},te=["max"],ae={key:0,class:"mt-1 text-sm text-red-600"},se=["min"],oe={key:0,class:"mt-1 text-sm text-red-600"},de={key:1,class:"mt-1 text-sm text-red-600"},re={class:"mt-6 border-t border-gray-600 pt-6"},ie={class:"overflow-x-auto"},ne={class:"min-w-full divide-y divide-gray-200"},le={class:"bg-white divide-y divide-gray-200"},ce={class:"px-6 py-4 whitespace-nowrap"},pe=["onUpdate:modelValue"],ue={class:"px-6 py-4 whitespace-nowrap"},me=["onUpdate:modelValue"],ge={class:"px-6 py-4"},_e=["onUpdate:modelValue"],xe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},fe=["onClick"],ye={class:"mt-6 flex justify-end"},ke=["disabled"],Pe={__name:"Duplicate",props:{package:Object},setup(h){const n=h,t=P({name:n.package.name,description:n.package.description,icon_photo:null,display_price_adult:n.package.display_price_adult,display_price_child:n.package.display_price_child,package_min_days:n.package.package_min_days,package_max_days:n.package.package_max_days,terms_and_conditions:n.package.terms_and_conditions,location:n.package.location,package_start_date:n.package.package_start_date,package_end_date:n.package.package_end_date,room_types:n.package.room_types.map(d=>({name:d.name,max_occupancy:d.max_occupancy,description:d.description}))}),m=E(""),w=A(),D=()=>{t.room_types.push({name:"",max_occupancy:2,description:""})},V=d=>{t.room_types.splice(d,1)},U=d=>{t.icon_photo=d.target.files[0]},k=()=>{if(m.value="",t.package_start_date&&t.package_end_date){const d=new Date(t.package_start_date),a=new Date(t.package_end_date),o=Math.abs(a-d),_=Math.ceil(o/(1e3*60*60*24));a<=d?m.value="End date must be after start date":_<1&&(m.value="End date must be at least one day after start date")}},C=()=>{if(k(),m.value){y.fire({title:"Validation Error",text:m.value,icon:"error",confirmButtonText:"OK"});return}t.post(route("packages.duplicate",n.package.id),{preserveScroll:!0,onSuccess:()=>{y.fire({title:"Success!",text:"Package has been duplicated successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{w.visit(route("packages.index"))})},onError:d=>{d.package_end_date&&y.fire({title:"Validation Error",text:d.package_end_date,icon:"error",confirmButtonText:"OK"})}})},S=R(()=>[{title:"Packages",link:route("packages.index")},{title:"Duplicate Package"}]);return(d,a)=>(i(),r(v,null,[x(s(T),{title:"Duplicate Package"}),x(M,null,{header:f(()=>a[8]||(a[8]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},null,-1)])),default:f(()=>[e("div",F,[e("div",K,[e("div",L,[e("div",I,[x(j,{breadcrumbs:S.value,class:"mb-9"},null,8,["breadcrumbs"]),e("form",{onSubmit:N(C,["prevent"])},[e("div",$,[e("div",null,[a[9]||(a[9]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),l(e("input",{type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=o=>s(t).name=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[c,s(t).name]]),s(t).errors.name?(i(),r("div",z,u(s(t).errors.name),1)):p("",!0)]),e("div",null,[a[10]||(a[10]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),l(e("textarea",{id:"description","onUpdate:modelValue":a[1]||(a[1]=o=>s(t).description=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[c,s(t).description]]),s(t).errors.description?(i(),r("div",G,u(s(t).errors.description),1)):p("",!0)]),e("div",H,[a[11]||(a[11]=e("label",{for:"icon_photo",class:"block text-sm font-medium text-gray-700"},"Icon Photo",-1)),e("input",{type:"file",id:"icon_photo",onChange:U,accept:"image/*",class:"mt-1 block w-full"},null,32),s(t).errors.icon_photo?(i(),r("div",J,u(s(t).errors.icon_photo),1)):p("",!0)]),e("div",Q,[e("div",null,[a[12]||(a[12]=e("label",{for:"display_price_adult",class:"block text-sm font-medium text-gray-700"},"Display Price",-1)),l(e("input",{type:"number",id:"display_price_adult","onUpdate:modelValue":a[2]||(a[2]=o=>s(t).display_price_adult=o),step:"0.01",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[c,s(t).display_price_adult]]),s(t).errors.display_price_adult?(i(),r("div",W,u(s(t).errors.display_price_adult),1)):p("",!0)]),e("div",null,[a[13]||(a[13]=e("label",{for:"package_min_days",class:"block text-sm font-medium text-gray-700"},"Package Duration (Nights)",-1)),l(e("input",{type:"number",id:"package_min_days","onUpdate:modelValue":a[3]||(a[3]=o=>s(t).package_min_days=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[c,s(t).package_min_days]]),s(t).errors.package_min_days?(i(),r("div",X,u(s(t).errors.package_min_days),1)):p("",!0)])]),e("div",null,[a[14]||(a[14]=e("label",{for:"terms_and_conditions",class:"block text-sm font-medium text-gray-700"},"Terms and Conditions",-1)),l(e("textarea",{id:"terms_and_conditions","onUpdate:modelValue":a[4]||(a[4]=o=>s(t).terms_and_conditions=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[c,s(t).terms_and_conditions]]),s(t).errors.terms_and_conditions?(i(),r("div",Y,u(s(t).errors.terms_and_conditions),1)):p("",!0)]),e("div",null,[a[15]||(a[15]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Location",-1)),l(e("input",{type:"text",id:"location","onUpdate:modelValue":a[5]||(a[5]=o=>s(t).location=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[c,s(t).location]]),s(t).errors.location?(i(),r("div",Z,u(s(t).errors.location),1)):p("",!0)]),e("div",ee,[e("div",null,[a[16]||(a[16]=e("label",{for:"package_start_date",class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),l(e("input",{type:"date",id:"package_start_date","onUpdate:modelValue":a[6]||(a[6]=o=>s(t).package_start_date=o),max:s(t).package_end_date?s(t).package_end_date:void 0,class:b(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(t).errors.package_start_date||s(t).errors.package_end_date}]),required:"",onChange:k},null,42,te),[[c,s(t).package_start_date]]),s(t).errors.package_start_date?(i(),r("div",ae,u(s(t).errors.package_start_date),1)):p("",!0)]),e("div",null,[a[17]||(a[17]=e("label",{for:"package_end_date",class:"block text-sm font-medium text-gray-700"},"End Date",-1)),l(e("input",{type:"date",id:"package_end_date","onUpdate:modelValue":a[7]||(a[7]=o=>s(t).package_end_date=o),min:s(t).package_start_date?new Date(new Date(s(t).package_start_date).getTime()+864e5).toISOString().split("T")[0]:void 0,class:b(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(t).errors.package_end_date}]),required:""},null,10,se),[[c,s(t).package_end_date]]),s(t).errors.package_end_date?(i(),r("div",oe,u(s(t).errors.package_end_date),1)):p("",!0),m.value?(i(),r("div",de,u(m.value),1)):p("",!0)])]),e("div",re,[e("div",{class:"flex justify-between items-center mb-4"},[a[18]||(a[18]=e("h3",{class:"text-lg font-medium text-gray-900"},"Room Types",-1)),e("button",{type:"button",onClick:D,class:"px-4 py-2 text-xs bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200"}," Add Room Type ")]),e("div",ie,[e("table",ne,[a[19]||(a[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Room Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Max Occupancy"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",le,[(i(!0),r(v,null,q(s(t).room_types,(o,_)=>(i(),r("tr",{key:_},[e("td",ce,[l(e("input",{type:"text","onUpdate:modelValue":g=>o.name=g,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Room Type Name",required:""},null,8,pe),[[c,o.name]])]),e("td",ue,[l(e("input",{type:"number","onUpdate:modelValue":g=>o.max_occupancy=g,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",min:"1",required:""},null,8,me),[[c,o.max_occupancy]])]),e("td",ge,[l(e("input",{type:"text","onUpdate:modelValue":g=>o.description=g,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Description"},null,8,_e),[[c,o.description]])]),e("td",xe,[e("button",{type:"button",onClick:g=>V(_),class:"text-red-600 hover:text-red-900"}," Remove ",8,fe)])]))),128))])])])])]),e("div",ye,[x(s(B),{href:d.route("packages.index"),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 mr-3 text-xs"},{default:f(()=>a[20]||(a[20]=[O(" Cancel ")])),_:1},8,["href"]),e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs",disabled:s(t).processing}," Create Duplicate ",8,ke)])],32)])])])])]),_:1})],64))}};export{Pe as default};
