import{l as y,i as K,C as B,s as E,g as c,o as u,b as t,h as S,a as q,F as M,p as Y,c as z,w as V,t as f,e as F,j as b,u as n,x as I,k,z as L,W as P}from"./app-dD2YvLEX.js";import{_ as j}from"./Modal.vue_vue_type_script_setup_true_lang-Bom4znkQ.js";import{P as G}from"./Pagination-DeaKkiuc.js";import{S as w}from"./sweetalert2.esm.all-B0Dix5B2.js";import{h as A}from"./moment-C5S46NFB.js";import"./LoadingComponent-wt9sqAVP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"space-y-6"},J={class:"flex justify-between items-center"},Q={class:"overflow-x-auto"},R={class:"min-w-full divide-y divide-gray-200"},X={class:"bg-white divide-y divide-gray-200"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ee={class:"px-6 py-4 text-sm text-gray-900"},te={class:"px-6 py-4 text-sm text-gray-900"},se={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ae=["onClick"],oe=["onClick"],ne={key:1},de={key:0,class:"mt-4"},re={class:"p-6"},ie={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},le={class:"space-y-4"},ue=["value"],pe={class:"mt-6 flex justify-end space-x-3"},ce=["disabled"],me={class:"p-6"},ge={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},ye={class:"space-y-4"},fe={class:"mt-6 flex justify-end space-x-3"},ve=["disabled"],Ce={__name:"SeasonTypes",props:{package:{type:Object,required:!0},seasons:{type:Object,required:!0,default:()=>({data:[],links:[],from:0,to:0,total:0,current_page:1,last_page:1,per_page:10})},seasonTypes:{type:Array,required:!0,default:()=>[]}},setup(v){const m=v,C=y(0),i=y(m.seasons||{data:[],links:[],from:0,to:0,total:0,current_page:1,last_page:1,per_page:10}),g=y(!1),x=y(!1),r=y(""),p=y(""),_=K(()=>({links:i.value.links,from:i.value.from,to:i.value.to,total:i.value.total})),d=B({season_type_id:"",start_date:"",end_date:"",package_id:m.package.id,return_to_package:!0}),o=B({id:null,name:"",description:"",package_id:m.package.id,return_to_package:!0});E(g,s=>{s||(r.value="")}),E(x,s=>{s||(p.value="")});const h=async s=>{try{const l=(await L.get(route("packages.seasons",m.package.id),{params:{page:s}})).data;i.value.data=l.data,i.value.links=l.links,i.value.from=l.from,i.value.to=l.to,i.value.total=l.total,i.value.current_page=l.current_page,i.value.last_page=l.last_page,i.value.per_page=l.per_page,C.value++}catch(e){console.error("Error fetching season types:",e)}},N=()=>{if(!d.season_type_id){r.value="Season type is required";return}if(!d.start_date){r.value="Start date is required";return}if(!d.end_date){r.value="End date is required";return}d.post(route("seasons.store"),{preserveScroll:!0,onSuccess:()=>{g.value=!1,d.reset(),w.fire({icon:"success",title:"Success",text:"Season created successfully"}),P.get(route("packages.show",m.package.id))},onError:s=>{s.season_type_id?r.value=s.season_type_id:s.start_date?r.value=s.start_date:s.end_date?r.value=s.end_date:s.date_range?r.value=s.date_range:r.value="Failed to create season. Please try again."}})},U=s=>{o.reset(),o.id=s.id,o.name=s.name||"",o.description=s.description||"",o.package_id=parseInt(m.package.id),o.return_to_package=!0,x.value=!0},T=()=>{x.value=!1,o.reset(),p.value=""},$=()=>{var s;if(!((s=o.name)!=null&&s.trim())){p.value="Season type name is required";return}o.put(route("season-types.update",o.id),{preserveScroll:!0,onSuccess:()=>{x.value=!1,o.reset(),w.fire({icon:"success",title:"Success",text:"Season type updated successfully"}),h(1)},onError:e=>{e.name?p.value=e.name:e.description?p.value=e.description:e.package_id?p.value=e.package_id:p.value="Failed to update season type. Please try again."}})},O=s=>{w.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#e3342f",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!",showConfirmButton:!0,showCloseButton:!0}).then(e=>{e.isConfirmed&&P.delete(route("season-types.destroy",s),{data:{return_to_package:!0},preserveState:!0,preserveScroll:!0,onSuccess:()=>{w.fire({title:"Deleted!",text:"Season type has been deleted.",icon:"success",showConfirmButton:!0,confirmButtonText:"OK",confirmButtonColor:"#4F46E5"}),h(1)}})})};return(s,e)=>{var l,D;return u(),c("div",H,[t("div",J,[e[8]||(e[8]=t("h3",{class:"text-md font-medium text-gray-900"},"Season Types",-1)),t("button",{onClick:e[0]||(e[0]=a=>g.value=!0),class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs"}," Add Season ")]),t("div",Q,[t("table",R,[e[10]||(e[10]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Start Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"End Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",X,[v.seasons.data.length>0?(u(!0),c(M,{key:0},Y(v.seasons.data,a=>(u(),c("tr",{key:a.id},[t("td",Z,f(a.type.name),1),t("td",ee,f(n(A)(a.start_date).format("MM/DD/YYYY")),1),t("td",te,f(n(A)(a.end_date).format("MM/DD/YYYY")),1),t("td",se,[t("button",{onClick:W=>U(a),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Edit ",8,ae),t("button",{onClick:W=>O(a.id),class:"text-red-600 hover:text-red-900"}," Delete ",8,oe)])]))),128)):(u(),c("tr",ne,e[9]||(e[9]=[t("td",{colspan:"3",class:"text-center text-gray-500 py-4 border-t border-b border-gray-300"},"No season types found",-1)])))])])]),((D=(l=v.seasons)==null?void 0:l.links)==null?void 0:D.length)>0?(u(),c("div",de,[(u(),z(G,{links:_.value.links,from:_.value.from,to:_.value.to,total:_.value.total,"component-loading":!0,onPageChange:h,key:C.value},null,8,["links","from","to","total"]))])):S("",!0),q(j,{show:g.value,onClose:e[5]||(e[5]=()=>{g.value=!1,n(d).reset(),r.value.value=""})},{default:V(()=>[t("div",re,[e[15]||(e[15]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Add Season",-1)),r.value?(u(),c("div",ie,f(r.value),1)):S("",!0),t("form",{onSubmit:F(N,["prevent"])},[t("div",le,[t("div",null,[e[12]||(e[12]=t("label",{for:"season_type_id",class:"block text-sm font-medium text-gray-700"},"Season Type",-1)),b(t("select",{id:"season_type_id","onUpdate:modelValue":e[1]||(e[1]=a=>n(d).season_type_id=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},[e[11]||(e[11]=t("option",{value:""},"Select a season type",-1)),(u(!0),c(M,null,Y(v.seasonTypes,a=>(u(),c("option",{key:a.id,value:a.id},f(a.name),9,ue))),128))],512),[[I,n(d).season_type_id]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"start_date",class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),b(t("input",{type:"date",id:"start_date","onUpdate:modelValue":e[2]||(e[2]=a=>n(d).start_date=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[k,n(d).start_date]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"end_date",class:"block text-sm font-medium text-gray-700"},"End Date",-1)),b(t("input",{type:"date",id:"end_date","onUpdate:modelValue":e[3]||(e[3]=a=>n(d).end_date=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[k,n(d).end_date]])])]),t("div",pe,[t("button",{type:"button",onClick:e[4]||(e[4]=()=>{g.value=!1,n(d).reset(),r.value.value=""}),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-xs"}," Cancel "),t("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs",disabled:n(d).processing}," Create Season ",8,ce)])],32)])]),_:1},8,["show"]),q(j,{show:x.value,onClose:T},{default:V(()=>[t("div",me,[e[18]||(e[18]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Edit Season Type",-1)),p.value?(u(),c("div",ge,f(p.value),1)):S("",!0),t("form",{onSubmit:F($,["prevent"])},[t("div",ye,[t("div",null,[e[16]||(e[16]=t("label",{for:"edit_name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),b(t("input",{type:"text",id:"edit_name","onUpdate:modelValue":e[6]||(e[6]=a=>n(o).name=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[k,n(o).name]])]),t("div",null,[e[17]||(e[17]=t("label",{for:"edit_description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),b(t("textarea",{id:"edit_description","onUpdate:modelValue":e[7]||(e[7]=a=>n(o).description=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3"},null,512),[[k,n(o).description]])])]),t("div",fe,[t("button",{type:"button",onClick:T,class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-xs"}," Cancel "),t("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs",disabled:n(o).processing}," Update Season Type ",8,ve)])],32)])]),_:1},8,["show"])])}}};export{Ce as default};
