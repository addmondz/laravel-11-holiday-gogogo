import{l as f,W as m,g as n,o as d,a as u,u as i,m as C,w as c,b as t,j as y,k as M,p as N,F as v,q as Y,t as a,f as p,h as w,n as _,P as b}from"./app-DLJ_53kK.js";import{A as F}from"./AuthenticatedLayout-DnXUNr9R.js";import{P as V}from"./Pagination-CE24QTR2.js";import{d as j}from"./debounce-CN89xpx-.js";import{h as k}from"./moment-C5S46NFB.js";import"./ApplicationLogo-Bc-7xAtf.js";import"./LoadingComponent-CF3ub17z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AntdIcon-DvKp3LaM.js";const A={class:"pb-12 pt-6"},I={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},R={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},U={class:"p-6 text-gray-900"},O={class:"mb-6"},T={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},q={class:"md:col-span-2"},E={class:"overflow-x-auto"},L={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},z={key:0},G={class:"px-6 py-4 whitespace-nowrap"},H={class:"text-sm font-medium text-gray-900"},J={class:"text-sm text-gray-500"},K={class:"text-sm text-gray-500"},Q={class:"px-6 py-4 whitespace-nowrap"},X={class:"text-sm text-gray-900"},Z={class:"px-6 py-4 whitespace-nowrap"},$={class:"text-sm text-gray-900"},tt={class:"px-6 py-4 whitespace-nowrap"},et={class:"text-sm text-gray-900"},st={class:"text-sm text-gray-500"},at={class:"px-6 py-4 whitespace-nowrap"},rt={class:"text-sm text-gray-900"},ot={key:0},it={key:1},nt={class:"px-6 py-4 whitespace-nowrap"},dt={class:"text-sm font-medium text-gray-900"},lt={class:"px-6 py-4 whitespace-nowrap"},ut={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ct={class:"flex items-center space-x-3"},mt=["href"],pt={class:"mt-6"},kt={__name:"Index",props:{bookings:Object,filters:Object,summary:Object},setup(o){const x=o,l=f({search:x.filters.search||"",status:route().params.status||"all"}),h=f(x.filters.search),P=()=>{l.value={search:"",status:"all"},m.get(route("bookings.index"),{},{preserveState:!0,preserveScroll:!0})},S=()=>{m.get(route("bookings.index"),{search:l.value.search,status:l.value.status},{preserveState:!0,preserveScroll:!0})},g=j(r=>{m.get(route("bookings.index"),{search:r.target.value},{preserveState:!0,preserveScroll:!0})},1e3),B=r=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(r),D=r=>{switch(r){case 0:return"Pending Payment";case 1:return"Payment Completed";case 2:return"Booking Confirmed";case 3:return"Booking Rejected";case 4:return"Refunded";default:return"Unknown"}};return(r,s)=>(d(),n(v,null,[u(i(C),{title:"Bookings"}),u(F,null,{header:c(()=>s[3]||(s[3]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},null,-1)])),default:c(()=>[t("div",A,[t("div",I,[t("div",R,[t("div",U,[s[9]||(s[9]=t("div",{class:"flex justify-between items-center mb-6"},[t("h3",{class:"text-lg font-medium"},"All Bookings")],-1)),t("div",O,[t("div",T,[t("div",q,[y(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>h.value=e),placeholder:"Search bookings...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onInput:s[1]||(s[1]=(...e)=>i(g)&&i(g)(...e))},null,544),[[M,h.value]])]),t("div",null,[y(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>l.value.status=e),onChange:S,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},s[4]||(s[4]=[t("option",{value:"all"},"All Bookings",-1),t("option",{value:"0"},"Pending Payment",-1),t("option",{value:"1"},"Payment Completed",-1),t("option",{value:"2"},"Booking Confirmed",-1),t("option",{value:"3"},"Booking Rejected",-1),t("option",{value:"4"},"Refunded",-1)]),544),[[N,l.value.status]])]),t("div",null,[t("button",{onClick:P,class:"w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Clear Filters ")])])]),t("div",E,[t("table",L,[s[8]||(s[8]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Booking Name "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Booking ID "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Package "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dates "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Guests "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Price "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",W,[o.bookings.data.length===0?(d(),n("tr",z,s[5]||(s[5]=[t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No bookings found ",-1)]))):(d(!0),n(v,{key:1},Y(o.bookings.data,e=>(d(),n("tr",{key:e.id},[t("td",G,[t("div",H,a(e.booking_name),1),t("div",J,a(e.phone_number),1),t("div",K,a(e.booking_email),1)]),t("td",Q,[t("div",X,a(e.uuid),1)]),t("td",Z,[t("div",$,a(e.package.name),1)]),t("td",tt,[t("div",et,a(i(k)(e.start_date).format("DD MMM YYYY"))+" - "+a(i(k)(e.end_date).format("DD MMM YYYY")),1),t("div",st,a(Math.ceil((new Date(e.end_date)-new Date(e.start_date))/(1e3*60*60*24)))+" nights ",1)]),t("td",at,[t("div",rt,[p(a(e.adults)+" Adult"+a(e.adults>1?"s":"")+" ",1),e.children>0?(d(),n("span",ot," , "+a(e.children)+" Child"+a(e.children>1?"ren":""),1)):w("",!0),e.infants>0?(d(),n("span",it," , "+a(e.infants)+" Infant"+a(e.infants>1?"s":""),1)):w("",!0)])]),t("td",nt,[t("div",dt," MYR "+a(B(e.total_price)),1)]),t("td",lt,[t("span",{class:_(["px-4 py-1 text-xs font-semibold rounded-full block min-w-[50px] text-center",e.status==0?"bg-yellow-100 text-yellow-800":e.status==1?"bg-green-100 text-green-800":e.status==2?"bg-blue-100 text-blue-800":e.status==3?"bg-red-100 text-red-800":e.status==4?"bg-slate-400 text-white":"bg-red-100 text-red-800"])},a(D(e.status)),3)]),t("td",ut,[t("div",ct,[u(i(b),{href:r.route("bookings.show",e.id),class:"text-indigo-600 hover:text-indigo-900"},{default:c(()=>s[6]||(s[6]=[p(" View ")])),_:2},1032,["href"]),u(i(b),{href:r.route("bookings.edit",e.id),class:"text-blue-600 hover:text-blue-900 ml-4"},{default:c(()=>s[7]||(s[7]=[p(" Edit ")])),_:2},1032,["href"]),t("a",{href:r.route("quotation.with-hash",e.package.uuid)+"?booking="+e.uuid,class:_(["ml-4",["ml-4",e.status!=0?"text-blue-600 hover:text-blue-900":e.status==0?"text-green-600 hover:text-green-900":"text-red-600 hover:text-red-900"]])},a(e.status==0?"Pay Now":"View Payment"),11,mt)])])]))),128))])])]),t("div",pt,[u(V,{links:o.bookings.links,from:o.bookings.from,to:o.bookings.to,total:o.bookings.total},null,8,["links","from","to","total"])])])])])])]),_:1})],64))}};export{kt as default};
