import{a as T,r as h,i as B,g as r,o,b as s,h as x,j as y,x as P,F as _,y as k,B as Ke,f as U,u as j,t as b,q as N,v as se,Q as ie,n as ue,c as ke,z as et,G as tt}from"./app-J-OugY80.js";import{S as V}from"./sweetalert2.esm.all-B0Dix5B2.js";import{L as st}from"./LoadingComponent-DJnqL-ux.js";import{_ as at}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as X}from"./AntdIcon-Bt44NrfY.js";var nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};function we(u){for(var i=1;i<arguments.length;i++){var d=arguments[i]!=null?Object(arguments[i]):{},g=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(d).filter(function(v){return Object.getOwnPropertyDescriptor(d,v).enumerable}))),g.forEach(function(v){lt(u,v,d[v])})}return u}function lt(u,i,d){return i in u?Object.defineProperty(u,i,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[i]=d,u}var G=function(i,d){var g=we({},i,d.attrs);return T(X,we({},g,{icon:nt}),null)};G.displayName="CopyOutlined";G.inheritAttrs=!1;var ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};function Se(u){for(var i=1;i<arguments.length;i++){var d=arguments[i]!=null?Object(arguments[i]):{},g=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(d).filter(function(v){return Object.getOwnPropertyDescriptor(d,v).enumerable}))),g.forEach(function(v){rt(u,v,d[v])})}return u}function rt(u,i,d){return i in u?Object.defineProperty(u,i,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[i]=d,u}var de=function(i,d){var g=Se({},i,d.attrs);return T(X,Se({},g,{icon:ot}),null)};de.displayName="EyeInvisibleOutlined";de.inheritAttrs=!1;var it={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};function Te(u){for(var i=1;i<arguments.length;i++){var d=arguments[i]!=null?Object(arguments[i]):{},g=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(d).filter(function(v){return Object.getOwnPropertyDescriptor(d,v).enumerable}))),g.forEach(function(v){ut(u,v,d[v])})}return u}function ut(u,i,d){return i in u?Object.defineProperty(u,i,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[i]=d,u}var ce=function(i,d){var g=Te({},i,d.attrs);return T(X,Te({},g,{icon:it}),null)};ce.displayName="EyeOutlined";ce.inheritAttrs=!1;var dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};function Oe(u){for(var i=1;i<arguments.length;i++){var d=arguments[i]!=null?Object(arguments[i]):{},g=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(d).filter(function(v){return Object.getOwnPropertyDescriptor(d,v).enumerable}))),g.forEach(function(v){ct(u,v,d[v])})}return u}function ct(u,i,d){return i in u?Object.defineProperty(u,i,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[i]=d,u}var W=function(i,d){var g=Oe({},i,d.attrs);return T(X,Oe({},g,{icon:dt}),null)};W.displayName="MinusOutlined";W.inheritAttrs=!1;var pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};function Ae(u){for(var i=1;i<arguments.length;i++){var d=arguments[i]!=null?Object(arguments[i]):{},g=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(d).filter(function(v){return Object.getOwnPropertyDescriptor(d,v).enumerable}))),g.forEach(function(v){gt(u,v,d[v])})}return u}function gt(u,i,d){return i in u?Object.defineProperty(u,i,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[i]=d,u}var J=function(i,d){var g=Ae({},i,d.attrs);return T(X,Ae({},g,{icon:pt}),null)};J.displayName="PlusOutlined";J.inheritAttrs=!1;const mt={class:"space-y-6"},vt={class:"bg-white shadow rounded-lg p-6"},ft={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},yt=["value"],bt=["value"],ht=["value"],xt={class:"mt-6 flex gap-2"},_t=["disabled"],Ct={key:0},kt={key:1},wt={key:0,class:"bg-white shadow rounded-lg p-6"},St={key:0,class:"flex items-center justify-center min-h-[300px]"},Tt={key:1,class:"text-center text-gray-500"},Ot={key:2,class:"space-y-10"},At={class:"flex items-center justify-between"},$t={class:"space-x-2"},Pt=["disabled"],Vt={key:0},jt={key:1,class:"px-3 py-2"},Dt={key:0,class:"mb-4"},Rt={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Mt={class:"flex items-start space-x-3"},Ut={class:"flex-1"},It={class:"text-sm text-blue-700"},Nt={class:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800"},Et={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4"},Bt={class:"flex items-center justify-between"},qt={key:2,class:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4"},zt={class:"text-sm font-medium text-gray-700 mb-3"},Lt={key:0,class:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},Ft={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},Ht={class:"flex flex-col space-y-1"},Qt={key:0,class:"flex flex-col space-y-1"},Yt={key:1,class:"flex flex-col space-y-1"},Gt=["data-package-config-id"],Wt={class:"flex items-center justify-between"},Jt={class:"font-medium text-gray-900"},Xt={class:"space-x-2"},Zt={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4"},Kt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},es={class:"flex flex-col space-y-2"},ts={class:"flex items-center space-x-2"},ss=["onUpdate:modelValue"],as=["onUpdate:modelValue"],ns=["onClick"],ls=["onClick"],os={key:0,class:"flex flex-col space-y-2"},rs={class:"flex items-center space-x-2"},is=["onUpdate:modelValue"],us=["onUpdate:modelValue"],ds=["onClick"],cs=["onClick"],ps={key:1,class:"flex flex-col space-y-2"},gs={class:"flex items-center space-x-2"},ms=["onUpdate:modelValue"],vs=["onUpdate:modelValue"],fs=["onClick"],ys=["onClick"],bs={style:{"margin-top":"10px"}},hs={class:"overflow-x-auto border rounded-lg"},xs={class:"min-w-full text-sm"},_s={class:"bg-gray-200"},Cs={key:0,class:"px-2 py-2 w-10"},ks=["checked","onChange"],ws=["colspan"],Ss={key:0,class:"px-2 py-2 align-middle w-10"},Ts=["value","onUpdate:modelValue"],Os={class:"px-4 py-2 align-middle whitespace-nowrap font-medium text-gray-800"},As={class:"flex flex-col items-start justify-start w-32"},$s={class:"text-xs text-gray-600"},Ps={key:0,class:"flex items-center rounded-md shadow-sm border border-gray-300 focus-within:ring-2 focus-within:ring-indigo-500"},Vs=["onUpdate:modelValue","onInput"],js=["onClick"],Ds={key:1,class:"mt-1 font-medium"},Rs={key:1,style:{"margin-top":"0"}},Ms={class:"overflow-x-auto border rounded-lg"},Us={class:"min-w-full text-sm"},Is={class:"bg-gray-200"},Ns={class:"px-4 py-2 text-left"},Es={class:"flex items-center gap-2"},Bs=["onClick","title"],qs={class:"px-4 py-3 font-medium text-gray-800 whitespace-nowrap"},zs={key:0,class:"flex"},Ls=["onUpdate:modelValue"],Fs=["onClick"],Hs={key:3,class:"flex items-center justify-end pt-6 border-t"},Qs={class:"space-x-2"},Ys=["disabled"],Gs={key:0},Ws={key:1,class:"px-3 py-2"},Js={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",style:{"margin-top":"0"}},Xs={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-3/4 shadow-lg rounded-md bg-white"},Zs={class:"mt-3"},Ks={class:"space-y-6"},ea={class:"bg-gray-50 p-4 rounded-lg"},ta={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},sa=["value"],aa=["value"],na=["value"],la={class:"bg-green-50 p-4 rounded-lg"},oa={class:"flex items-center justify-between"},ra={class:"text-sm text-gray-500 mr-2"},ia=["onUpdate:modelValue"],ua=["value"],da=["onUpdate:modelValue"],ca=["value"],pa={class:"flex gap-2"},ga=["onUpdate:modelValue"],ma=["value"],va=["onClick"],fa={key:0,class:"bg-green-50 p-4 rounded-lg"},ya={class:"space-y-2 max-h-48 overflow-y-auto"},ba=["id","value"],ha=["for"],xa={class:"text-gray-500"},_a={class:"bg-yellow-50 p-4 rounded-lg"},Ca={class:"space-y-2"},ka={class:"flex items-center"},wa={class:"flex items-center"},Sa={class:"flex justify-end space-x-3 pt-4"},Ta=["disabled"],Oa={key:0},Aa={key:1},$a={__name:"PriceConfigurationRoomTypes",props:{packageId:{type:Number,required:!0},seasonTypes:{type:Array,required:!0},dateTypes:{type:Array,required:!0},packageUniqueRoomTypes:{type:Object,required:!0},allSeasonTypes:{type:Array,required:!0},allDateTypes:{type:Array,required:!0},assignedSeasonTypes:{type:Array,required:!0},assignedDateTypes:{type:Array,required:!0},noChildrenAndInfant:{type:Boolean,default:!1}},setup(u){const i=u,d=h(""),g=h(""),v=h(""),H=h(!1),ae=h(!1),C=h(!1),q=h(!1),z=h(!1),E=h({}),w=h({}),D=h({}),R=h({adult:null,child:null,infant:null}),ne=h(!1),Z=h(!1);h(!1),h(!1);const K=h([]),le=h([]),p=h({sourceSeason:"",sourceDateType:"",sourceRoomType:"",selectedSourceConfig:null,targetConfigurations:[{season:"",dateType:"",roomType:""}],includeBaseCharges:!0,includeSurcharges:!0}),L=h(1),$e=()=>{p.value.targetConfigurations.push({season:"",dateType:"",roomType:""}),L.value++},Pe=n=>{p.value.targetConfigurations.length>1&&(p.value.targetConfigurations.splice(n,1),L.value--)},Ve=()=>{Xe(),ne.value=!0},O=h([]),pe=h({}),je=B(()=>!!d.value&&!!g.value),ge=n=>Number(n??0).toFixed(2);B(()=>p.value.sourceSeason&&p.value.sourceDateType),B(()=>p.value.targetSeason&&p.value.targetDateType),B(()=>d.value&&g.value&&O.value.length>0);const me=B(()=>p.value.targetConfigurations.some(t=>t.season&&t.dateType)?p.value.targetConfigurations.some(t=>t.season===p.value.sourceSeason&&t.dateType===p.value.sourceDateType&&t.roomType===p.value.sourceRoomType)?(V.fire({icon:"error",title:"Error",text:"Source and target cannot be the same"}),!1):!0:!1),De=/^(\d+)_a_(\d+)_c_(\d+)_i$/,Q=n=>{var t;const e=(t=n==null?void 0:n.match)==null?void 0:t.call(n,De);return e?{a:+e[1],c:+e[2],i:+e[3]}:null},ve=n=>{const e=Q(n);if(!e)return n||"";const t=(a,l,m)=>`${a} ${a===1?l:m||l+"s"}`;return`${t(e.a,"Adult")} + ${t(e.c,"Child","Children")} + ${t(e.i,"Infant")}`},Re=n=>[...n].sort((e,t)=>{const a=Q(e)||{a:0,c:0,i:0},l=Q(t)||{a:0,c:0,i:0};return a.a!==l.a?l.a-a.a:a.c!==l.c?l.c-a.c:l.i-a.i}),Me=n=>{const e=Object.keys(n||{});return Re(e).map(a=>[a,n[a]])},Ue=n=>{const e=Q(n);return e?e.c>0||e.i>0:!1},ee=n=>{const e=Me(n);return i.noChildrenAndInfant?e.filter(([t])=>!Ue(t)):e},Ie=n=>n==="a"||n==="c"||n==="i",Ne=n=>{const e=Object.keys(n??{}),t=a=>{const l=a[0],c=!Ie(a)?parseInt(a.slice(1),10)||0:-1;return({a:1,c:2,i:3}[l]||9)*100+c};return e.sort((a,l)=>t(a)-t(l))},Ee=n=>{if(!n)return"";const e=n[0],t=n.slice(1);return e==="a"?`Adult ${t}`:e==="c"?`Child ${t}`:e==="i"?`Infant ${t}`:n},Be=(n,e,t)=>{var c;if(!n||!e||!t)return;const a=(c=n.base)==null?void 0:c[e];if(!a)return;const l=a[t];if(l==null||l==="")return;const m=String(t)[0];Object.keys(a).forEach(f=>{f.startsWith(m)&&(a[f]=Number(l))})},qe=(n,e,t)=>{var m;if(!n||!e||!t)return;const a=(m=n.surch)==null?void 0:m[e];if(!a)return;const l=a[t];l==null||l===""||Object.keys(n.surch).forEach(c=>{const f=n.surch[c];f&&f[t]!==void 0&&(f[t]=Number(l))})},ze=()=>{O.value.forEach(n=>{w.value[n.room_type_id]||(w.value[n.room_type_id]={adult:{value:0,mode:"value"},child:{value:0,mode:"value"},infant:{value:0,mode:"value"}})})},F=(n,e,t)=>{var A;const a=e==="adult"?"a":e==="child"?"c":"i",l=(A=w.value[n.room_type_id])==null?void 0:A[e];if(!l||!l.value||l.value<=0){V.fire({icon:"warning",title:"Invalid Value",text:"Please enter a positive adjustment value",timer:2e3});return}const m=Number(l.value),c=l.mode==="percentage";Object.keys(n.base).forEach($=>{const S=n.base[$];Object.keys(S).forEach(M=>{if(M.startsWith(a)){const I=Number(S[M])||0;let Y;if(c){const Ce=I*(m/100);Y=t==="add"?I+Ce:I-Ce}else Y=t==="add"?I+m:I-m;S[M]=Math.max(0,Math.round(Y*100)/100)}})});const f=e.charAt(0).toUpperCase()+e.slice(1);V.fire({icon:"success",title:"Adjustment Applied",text:`${t==="add"?"Added":"Subtracted"} ${c?m+"%":"MYR "+m} ${t==="add"?"to":"from"} all ${f} base charges`,timer:1500,showConfirmButton:!1})};let fe="",ye=0;const Le=(n,e,t)=>{tt(()=>{Fe(n,e)})},Fe=(n,e)=>{var m;if(z.value)return;const t=(m=n.base)==null?void 0:m[e];if(!t)return;const a=Q(e);if(!a)return;const l=Math.max(a.a,a.c,a.i);for(let c=1;c<=l;c++){const f=[];if(t[`a${c}`]!==void 0&&f.push({type:`Adult ${c}`,price:Number(t[`a${c}`])}),t[`c${c}`]!==void 0&&f.push({type:`Child ${c}`,price:Number(t[`c${c}`])}),t[`i${c}`]!==void 0&&f.push({type:`Infant ${c}`,price:Number(t[`i${c}`])}),f.length<2)continue;const A={};f.forEach(({type:$,price:S})=>{S>0&&(A[S]||(A[S]=[]),A[S].push($))});for(const[$,S]of Object.entries(A))if(S.length>=2){const M=`cross-${n.room_type_id}-${e}-slot${c}-${$}`,I=Date.now();if(M===fe&&I-ye<3e3)return;fe=M,ye=I,V.fire({icon:"warning",title:"Same Price Detected",text:`${S.join(" and ")} have the same price (${$}). Is this intended?`,timer:5e3,showConfirmButton:!0,confirmButtonText:"OK",showDenyButton:!0,denyButtonText:"Don't show again"}).then(Y=>{Y.isDenied&&(z.value=!0)});return}}},te=B(()=>{let n=0;for(const e of Object.values(D.value))n+=(e||[]).length;return n}),be=n=>{const e=ee(n.base);if(!e.length)return!1;const t=D.value[n.room_type_id]||[];return e.every(([a])=>t.includes(a))},He=n=>{const t=ee(n.base).map(([a])=>a);be(n)?D.value[n.room_type_id]=[]:D.value[n.room_type_id]=[...t]},Qe=()=>{if(te.value===0){V.fire({icon:"warning",title:"No Rows Selected",text:"Please check at least one row before applying.",timer:2500});return}const n=R.value.adult,e=R.value.child,t=R.value.infant,a=n!==null&&n!==""&&!isNaN(n),l=e!==null&&e!==""&&!isNaN(e),m=t!==null&&t!==""&&!isNaN(t);if(!a&&!l&&!m){V.fire({icon:"warning",title:"No Price Entered",text:"Please enter at least one price value.",timer:2500});return}O.value.forEach(c=>{(D.value[c.room_type_id]||[]).forEach(A=>{const $=c.base[A];$&&Object.keys($).forEach(S=>{const M=S[0];M==="a"&&a&&($[S]=Number(n)),M==="c"&&l&&($[S]=Number(e)),M==="i"&&m&&($[S]=Number(t))})})});for(const c of Object.keys(D.value))D.value[c]=[];R.value={adult:null,child:null,infant:null},V.fire({icon:"success",title:"Prices Applied",timer:1200,showConfirmButton:!1})},Ye=n=>n==="a"?"Adult (per pax)":n==="c"?"Child (per pax)":"Infant (per pax)",he=B(()=>i.noChildrenAndInfant?["a"]:["a","c","i"]),Ge=n=>{E.value[n]=!E.value[n]},oe=()=>{H.value=!0,ae.value=!0,C.value=!1,ie.post(route("configuration-prices.fetchPricesRoomTypes"),{package_id:i.packageId,season_type_id:d.value,date_type_id:g.value,room_type_id:v.value||void 0}).then(n=>{let e=n==null?void 0:n.data;if(typeof e=="string"){const a=e.replace(/,\s*(?=[}\]])/g,"");try{e=JSON.parse(a)}catch(l){console.error("Failed to parse API string after sanitizing:",l),e=[]}}e=Array.isArray(e)?e:[],pe.value=e.reduce((a,l)=>{var f,A;const m=(l==null?void 0:l.room_type_id)??((f=l==null?void 0:l.room_type)==null?void 0:f.id),c=(A=l==null?void 0:l.room_type)==null?void 0:A.name;return m&&c&&(a[m]=c),a},{}),O.value=e.map(a=>{var m;const l=Array.isArray(a==null?void 0:a.prices)&&a.prices.length?a.prices[0]:null;return{room_type_id:(a==null?void 0:a.room_type_id)??((m=a==null?void 0:a.room_type)==null?void 0:m.id)??0,room_type_capacity:(a==null?void 0:a.room_type_capacity)??0,room_type_name:(a==null?void 0:a.room_type_name)??"",id:(a==null?void 0:a.id)??0,base:(l==null?void 0:l.base)??{},surch:(l==null?void 0:l.surch)??{}}}),e.forEach(a=>{var m;const l=(a==null?void 0:a.room_type_id)??((m=a==null?void 0:a.room_type)==null?void 0:m.id);l&&(E.value[l]=(a==null?void 0:a.default_show_surcharge)??!1)}),ze();const t={};O.value.forEach(a=>{t[a.room_type_id]=[]}),D.value=t}).catch(n=>{console.error(n),V.fire({icon:"error",title:"Error",text:"Failed to fetch price configurations"}),O.value=[]}).finally(()=>{H.value=!1})},We=()=>{d.value="",g.value="",v.value="",O.value=[],pe.value={},ae.value=!1,C.value=!1},xe=()=>{C.value=!1,z.value=!1,oe()},_e=()=>{q.value=!0;const n=O.value.map(t=>({package_configuration_id:Number(t.id)||null,room_type_id:Number(t.room_type_id)||null,base:t.base??{},surch:t.surch??{}})),e={package_id:i.packageId,season_type_id:d.value,date_type_id:g.value,rooms:n};ie.put(route("configuration-prices.updateRoomTypePrices"),e).then(()=>{C.value=!1,z.value=!1,V.fire({icon:"success",title:"Saved",timer:1200,showConfirmButton:!1}),oe()}).catch(t=>{var a,l;console.error(t),V.fire({icon:"error",title:"Error",text:((l=(a=t.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to save"})}).finally(()=>{q.value=!1})},re=()=>{ne.value=!1,K.value=[],le.value=[],p.value={sourceSeason:"",sourceDateType:"",sourceRoomType:"",selectedSourceConfig:null,targetConfigurations:[{season:"",dateType:"",roomType:""}],includeBaseCharges:!0,includeSurcharges:!0},L.value=1},Je=n=>{let e=0;return Object.values(n??{}).forEach(t=>{Object.keys(t??{}).forEach(a=>{const l=parseInt(a.slice(1),10);isNaN(l)||(e=Math.max(e,l))})}),e+1},Xe=()=>{p.value.sourceSeason=d.value,p.value.sourceDateType=g.value,p.value.sourceRoomType=v.value,K.value=O.value.map(n=>({id:n.id,room_type_id:n.room_type_id,room_type_capacity:n.room_type_capacity,room_type_name:n.room_type_name,base:n.base,surch:n.surch})),K.value.length===1&&(p.value.selectedSourceConfig=K.value[0])},Ze=async()=>{var n,e;if(me.value){Z.value=!0;try{const t=p.value.targetConfigurations.filter(l=>l.season&&l.dateType),a={package_id:i.packageId,source_season_type_id:p.value.sourceSeason,source_date_type_id:p.value.sourceDateType,source_room_type_id:p.value.sourceRoomType,target_configurations:t.map(l=>({season_type_id:l.season,date_type_id:l.dateType,room_type_id:l.roomType})),include_base_charges:p.value.includeBaseCharges,include_surcharges:p.value.includeSurcharges};await ie.post(route("configuration-prices.duplicateToMultiple"),a),await V.fire({icon:"success",title:"Duplication Successful",text:`Price configuration duplicated to ${t.length} target configuration(s)`,timer:2e3,showConfirmButton:!1}),re()}catch(t){console.error("Duplication error:",t),await V.fire({icon:"error",title:"Duplication Failed",text:((e=(n=t.response)==null?void 0:n.data)==null?void 0:e.message)||"Failed to duplicate price configuration"})}finally{Z.value=!1}}};return(n,e)=>(o(),r("div",mt,[s("div",vt,[s("div",ft,[s("div",null,[e[15]||(e[15]=s("label",{class:"block text-sm font-medium text-gray-700"},"Season",-1)),y(s("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[14]||(e[14]=s("option",{value:""},"Select Season",-1)),(o(!0),r(_,null,k(u.assignedSeasonTypes,t=>(o(),r("option",{key:t.id,value:t.id},b(t.name),9,yt))),128))],512),[[P,d.value]])]),s("div",null,[e[17]||(e[17]=s("label",{class:"block text-sm font-medium text-gray-700"},"Date Type",-1)),y(s("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>g.value=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[16]||(e[16]=s("option",{value:""},"Select Date Type",-1)),(o(!0),r(_,null,k(u.assignedDateTypes,t=>(o(),r("option",{key:t.id,value:t.id},b(t.name),9,bt))),128))],512),[[P,g.value]])]),s("div",null,[e[19]||(e[19]=s("label",{class:"block text-sm font-medium text-gray-700"},"Room Type (Optional)",-1)),y(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>v.value=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[18]||(e[18]=s("option",{value:""},"All Room Types",-1)),(o(!0),r(_,null,k(u.packageUniqueRoomTypes,(t,a)=>(o(),r("option",{key:a,value:a},b(t),9,ht))),128))],512),[[P,v.value]])])]),s("div",xt,[s("button",{onClick:oe,disabled:!je.value||H.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs disabled:opacity-50 disabled:cursor-not-allowed"},[H.value?(o(),r("span",Ct,"Loading...")):(o(),r("span",kt,"Search Prices"))],8,_t),s("button",{onClick:We,class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-xs"}," Reset ")])]),ae.value?(o(),r("div",wt,[H.value?(o(),r("div",St,[T(st)])):O.value.length?(o(),r("div",Ot,[s("div",At,[e[20]||(e[20]=s("div",null,[s("h2",{class:"text-lg font-semibold"},"Price Matrix"),s("p",{class:"text-xs text-gray-500"}," Base charge applies to each slot (Adult 1, Adult 2, Child 1, …). Surcharge applies per person (Adult / Child / Infant). ")],-1)),s("div",$t,[C.value?(o(),r(_,{key:0},[s("button",{onClick:xe,class:"px-3 py-2 rounded bg-gray-100 text-gray-700 text-sm"}," Cancel "),s("button",{onClick:_e,class:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",disabled:q.value},[q.value?(o(),r("span",Vt,"Saving...")):(o(),r("span",jt,"Save"))],8,Pt)],64)):x("",!0)])]),C.value?(o(),r("div",Dt,[s("div",Rt,[s("div",Mt,[e[30]||(e[30]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),s("div",Ut,[e[28]||(e[28]=s("h3",{class:"text-sm font-medium text-blue-800 mb-1"}," Quick Copy Feature ",-1)),s("p",It,[e[22]||(e[22]=U(" Click the ")),s("span",Nt,[T(j(G),{class:"h-3 w-3 mr-1"}),e[21]||(e[21]=U(" copy icon "))]),e[23]||(e[23]=U(" next to any price to instantly apply that same value across matching fields. The copy behavior differs slightly between ")),e[24]||(e[24]=s("strong",null,"Base Charge",-1)),e[25]||(e[25]=U(" and ")),e[26]||(e[26]=s("strong",null,"Surcharges",-1)),e[27]||(e[27]=U(": "))]),e[29]||(e[29]=Ke('<ul class="mt-3 text-xs text-blue-700 list-disc list-inside space-y-3" data-v-b2baa8e8><li data-v-b2baa8e8><span class="font-semibold text-blue-800" data-v-b2baa8e8>Base Charge:</span> Copies the value to all fields with the same <strong data-v-b2baa8e8>person type</strong> (e.g. Adults, Children) within the <strong data-v-b2baa8e8>same row</strong>. <div class="mt-1 text-blue-600" data-v-b2baa8e8><span class="font-medium" data-v-b2baa8e8>Example:</span> Clicking the copy icon beside <strong data-v-b2baa8e8>Adult 1</strong> in the row “4 Adults + 0 Children + 0 Infants” will automatically copy that price to <strong data-v-b2baa8e8>Adult 2</strong>, <strong data-v-b2baa8e8>Adult 3</strong>, and <strong data-v-b2baa8e8>Adult 4</strong> in that same row. </div></li><li data-v-b2baa8e8><span class="font-semibold text-blue-800" data-v-b2baa8e8>Surcharges:</span> Copies the value to all fields with the same <strong data-v-b2baa8e8>person type</strong> within the <strong data-v-b2baa8e8>same room</strong>. <div class="mt-1 text-blue-600" data-v-b2baa8e8><span class="font-medium" data-v-b2baa8e8>Example:</span> Clicking the copy icon beside <strong data-v-b2baa8e8>Adult 1</strong> under “Room A” will automatically copy that surcharge value to all the adults surcharge within that same room. </div></li></ul><div class="mt-3 text-xs text-blue-600" data-v-b2baa8e8><span class="font-bold" data-v-b2baa8e8>Remember:</span> Always click <em data-v-b2baa8e8>Save</em> after copying values to confirm your changes. </div>',2))])])])])):x("",!0),C.value&&z.value?(o(),r("div",Et,[s("div",Bt,[e[31]||(e[31]=s("span",{class:"text-sm text-yellow-800"}," Same price alerts are currently hidden. ",-1)),s("button",{onClick:e[3]||(e[3]=t=>z.value=!1),class:"px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700"}," Show alerts again ")])])):x("",!0),C.value?(o(),r("div",qt,[s("h4",zt,[e[32]||(e[32]=U(" Set Price for Selected Rows ")),e[33]||(e[33]=s("span",{class:"text-xs text-gray-500 font-normal ml-2"}," (Replaces base charge prices for checked rows across all rooms) ",-1)),te.value>0?(o(),r("span",Lt,b(te.value)+" row"+b(te.value===1?"":"s")+" selected ",1)):x("",!0)]),s("div",Ft,[s("div",Ht,[e[34]||(e[34]=s("label",{class:"text-xs font-medium text-gray-600"},"Adult",-1)),y(s("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":e[4]||(e[4]=t=>R.value.adult=t),class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Leave blank to skip"},null,512),[[N,R.value.adult,void 0,{number:!0}]])]),u.noChildrenAndInfant?x("",!0):(o(),r("div",Qt,[e[35]||(e[35]=s("label",{class:"text-xs font-medium text-gray-600"},"Child",-1)),y(s("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":e[5]||(e[5]=t=>R.value.child=t),class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Leave blank to skip"},null,512),[[N,R.value.child,void 0,{number:!0}]])])),u.noChildrenAndInfant?x("",!0):(o(),r("div",Yt,[e[36]||(e[36]=s("label",{class:"text-xs font-medium text-gray-600"},"Infant",-1)),y(s("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":e[6]||(e[6]=t=>R.value.infant=t),class:"w-full rounded-md border-gray-300 text-sm",placeholder:"Leave blank to skip"},null,512),[[N,R.value.infant,void 0,{number:!0}]])])),s("div",null,[s("button",{onClick:Qe,class:"px-4 py-2 bg-green-600 text-white rounded-md text-sm hover:bg-green-700 w-full"}," Apply to Selected ")])])])):x("",!0),(o(!0),r(_,null,k(O.value,t=>(o(),r("div",{key:t.room_type_id,class:"space-y-8","data-package-config-id":t.id},[s("div",Wt,[s("h3",Jt,b(t.room_type_name)+" ( "+b(t.room_type_capacity)+" pax ) ",1),s("div",Xt,[C.value?x("",!0):(o(),r("button",{key:0,onClick:e[7]||(e[7]=a=>C.value=!0),class:"px-5 py-2 rounded bg-indigo-600 text-white text-sm"}," Edit All Prices ")),!C.value&&O.value.length>0?(o(),r("button",{key:1,onClick:Ve,class:"px-5 py-2 rounded bg-green-600 text-white text-sm hover:bg-green-700"}," Duplicate to Multiple ")):x("",!0)])]),C.value&&w.value[t.room_type_id]?(o(),r("div",Zt,[e[43]||(e[43]=s("h4",{class:"text-sm font-medium text-gray-700 mb-3"},[U(" Global Price Adjustments "),s("span",{class:"text-xs text-gray-500 font-normal ml-2"},"(Apply to all base charges in this room)")],-1)),s("div",Kt,[s("div",es,[e[38]||(e[38]=s("label",{class:"text-xs font-medium text-gray-600"},"Adult",-1)),s("div",ts,[y(s("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":a=>w.value[t.room_type_id].adult.value=a,class:"w-20 rounded-md border-gray-300 text-sm",placeholder:"0"},null,8,ss),[[N,w.value[t.room_type_id].adult.value,void 0,{number:!0}]]),y(s("select",{"onUpdate:modelValue":a=>w.value[t.room_type_id].adult.mode=a,class:"rounded-md border-gray-300 text-xs"},e[37]||(e[37]=[s("option",{value:"value"},"MYR",-1),s("option",{value:"percentage"},"%",-1)]),8,as),[[P,w.value[t.room_type_id].adult.mode]]),s("button",{onClick:a=>F(t,"adult","add"),class:"px-2 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",title:"Add to all adult prices"},[T(j(J))],8,ns),s("button",{onClick:a=>F(t,"adult","subtract"),class:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",title:"Subtract from all adult prices"},[T(j(W))],8,ls)])]),u.noChildrenAndInfant?x("",!0):(o(),r("div",os,[e[40]||(e[40]=s("label",{class:"text-xs font-medium text-gray-600"},"Child",-1)),s("div",rs,[y(s("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":a=>w.value[t.room_type_id].child.value=a,class:"w-20 rounded-md border-gray-300 text-sm",placeholder:"0"},null,8,is),[[N,w.value[t.room_type_id].child.value,void 0,{number:!0}]]),y(s("select",{"onUpdate:modelValue":a=>w.value[t.room_type_id].child.mode=a,class:"rounded-md border-gray-300 text-xs"},e[39]||(e[39]=[s("option",{value:"value"},"MYR",-1),s("option",{value:"percentage"},"%",-1)]),8,us),[[P,w.value[t.room_type_id].child.mode]]),s("button",{onClick:a=>F(t,"child","add"),class:"px-2 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",title:"Add to all child prices"},[T(j(J))],8,ds),s("button",{onClick:a=>F(t,"child","subtract"),class:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",title:"Subtract from all child prices"},[T(j(W))],8,cs)])])),u.noChildrenAndInfant?x("",!0):(o(),r("div",ps,[e[42]||(e[42]=s("label",{class:"text-xs font-medium text-gray-600"},"Infant",-1)),s("div",gs,[y(s("input",{type:"number",step:"0.01",min:"0","onUpdate:modelValue":a=>w.value[t.room_type_id].infant.value=a,class:"w-20 rounded-md border-gray-300 text-sm",placeholder:"0"},null,8,ms),[[N,w.value[t.room_type_id].infant.value,void 0,{number:!0}]]),y(s("select",{"onUpdate:modelValue":a=>w.value[t.room_type_id].infant.mode=a,class:"rounded-md border-gray-300 text-xs"},e[41]||(e[41]=[s("option",{value:"value"},"MYR",-1),s("option",{value:"percentage"},"%",-1)]),8,vs),[[P,w.value[t.room_type_id].infant.mode]]),s("button",{onClick:a=>F(t,"infant","add"),class:"px-2 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",title:"Add to all infant prices"},[T(j(J))],8,fs),s("button",{onClick:a=>F(t,"infant","subtract"),class:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",title:"Subtract from all infant prices"},[T(j(W))],8,ys)])]))])])):x("",!0),s("section",bs,[s("div",hs,[s("table",xs,[s("thead",_s,[s("tr",null,[C.value?(o(),r("th",Cs,[s("input",{type:"checkbox",checked:be(t),onChange:a=>He(t),class:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded",title:"Select / deselect all rows"},null,40,ks)])):x("",!0),s("th",{class:"px-4 py-2 text-left",colspan:Je(t.base)}," Base Charge ",8,ws)])]),s("tbody",null,[(o(!0),r(_,null,k(ee(t.base),([a,l],m)=>(o(),r("tr",{key:a,class:ue(m%2?"bg-white":"bg-gray-50")},[C.value?(o(),r("td",Ss,[y(s("input",{type:"checkbox",value:a,"onUpdate:modelValue":c=>D.value[t.room_type_id]=c,class:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"},null,8,Ts),[[se,D.value[t.room_type_id]]])])):x("",!0),s("td",Os,b(ve(a)),1),(o(!0),r(_,null,k(Ne(l),c=>(o(),r("td",{class:"px-4 py-2",key:c},[s("div",As,[s("span",$s,b(Ee(c)),1),C.value?(o(),r("div",Ps,[y(s("input",{type:"number",step:"0.01",class:"w-full rounded-l-md border-none focus:ring-0 px-3 py-2","onUpdate:modelValue":f=>t.base[a][c]=f,onInput:f=>Le(t,a)},null,40,Vs),[[N,t.base[a][c],void 0,{number:!0}]]),s("button",{type:"button",class:"flex items-center justify-center px-2 border-l border-gray-300 text-gray-500 hover:text-indigo-600 hover:bg-gray-50 rounded-r-md",title:"Copy this pax type's value across this row",onClick:f=>Be(t,a,c)},[T(j(G),{class:"h-5 w-5"})],8,js)])):(o(),r("span",Ds,"MYR "+b(ge(t.base[a][c])),1))])]))),128))],2))),128))])])])]),t.surch&&Object.keys(t.surch||{}).length?(o(),r("section",Rs,[s("div",Ms,[s("table",Us,[s("thead",Is,[s("tr",null,[s("th",Ns,[s("div",Es,[e[44]||(e[44]=s("span",null,"Surcharge",-1)),s("button",{type:"button",onClick:a=>Ge(t.room_type_id),class:ue(["p-1 rounded",E.value[t.room_type_id]?"text-indigo-600 hover:bg-indigo-50":"text-gray-400 hover:bg-gray-100"]),title:E.value[t.room_type_id]?"Hide surcharge table":"Show surcharge table"},[E.value[t.room_type_id]?(o(),ke(j(ce),{key:0,class:"h-4 w-4"})):(o(),ke(j(de),{key:1,class:"h-4 w-4"}))],10,Bs)])]),(o(!0),r(_,null,k(he.value,a=>(o(),r("th",{key:a,class:"px-4 py-2 text-left"},b(Ye(a)),1))),128))])]),y(s("tbody",null,[(o(!0),r(_,null,k(ee(t.surch),([a,l],m)=>(o(),r("tr",{key:a,class:ue(m%2?"bg-white":"bg-gray-50")},[s("td",qs,b(ve(a)),1),(o(!0),r(_,null,k(he.value,c=>(o(),r("td",{key:c,class:"px-4 py-2"},[l[c]!==void 0?(o(),r(_,{key:0},[C.value?(o(),r("div",zs,[y(s("input",{type:"number",step:"0.01",class:"w-24 rounded-l-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500","onUpdate:modelValue":f=>t.surch[a][c]=f},null,8,Ls),[[N,t.surch[a][c],void 0,{number:!0}]]),s("button",{type:"button",class:"flex items-center justify-center px-2 border-l border-gray-300 text-gray-500 hover:text-indigo-600 hover:bg-gray-50 rounded-r-md",title:"Copy this surcharge value to all rows",onClick:f=>qe(t,a,c)},[T(j(G),{class:"h-5 w-5"})],8,Fs)])):(o(),r(_,{key:1},[U(" MYR "+b(ge(l[c])),1)],64))],64)):x("",!0)]))),128))],2))),128))],512),[[et,E.value[t.room_type_id]]])])])])):x("",!0)],8,Gt))),128)),C.value?(o(),r("div",Hs,[s("div",Qs,[s("button",{onClick:xe,class:"px-3 py-2 rounded bg-gray-100 text-gray-700 text-sm"}," Cancel "),s("button",{onClick:_e,class:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",disabled:q.value},[q.value?(o(),r("span",Gs,"Saving...")):(o(),r("span",Ws,"Save"))],8,Ys)])])):x("",!0)])):(o(),r("div",Tt," No price configurations found for the selected filters. "))])):x("",!0),ne.value?(o(),r("div",Js,[s("div",Xs,[s("div",Zs,[s("div",{class:"flex items-center justify-between"},[e[46]||(e[46]=s("h3",{class:"text-lg font-medium text-gray-900"},"Duplicate Price Configuration",-1)),s("button",{onClick:re,class:"text-gray-400 hover:text-gray-600"},e[45]||(e[45]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e[65]||(e[65]=s("small",{class:"text-gray-500 mb-4 block"},' If you wish to duplicate to all room types, please select "All Room Types" for both target room type and source room type. ',-1)),s("div",Ks,[s("div",ea,[e[53]||(e[53]=s("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Source Configuration (Copy From)",-1)),s("div",ta,[s("div",null,[e[48]||(e[48]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Season",-1)),y(s("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>p.value.sourceSeason=t),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[47]||(e[47]=s("option",{value:""},"Select Season",-1)),(o(!0),r(_,null,k(u.assignedSeasonTypes,t=>(o(),r("option",{key:t.id,value:t.id},b(t.name),9,sa))),128))],512),[[P,p.value.sourceSeason]])]),s("div",null,[e[50]||(e[50]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Type",-1)),y(s("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>p.value.sourceDateType=t),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[49]||(e[49]=s("option",{value:""},"Select Date Type",-1)),(o(!0),r(_,null,k(u.assignedDateTypes,t=>(o(),r("option",{key:t.id,value:t.id},b(t.name),9,aa))),128))],512),[[P,p.value.sourceDateType]])]),s("div",null,[e[52]||(e[52]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Room Type (Optional)",-1)),y(s("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>p.value.sourceRoomType=t),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[51]||(e[51]=s("option",{value:""},"All Room Types",-1)),(o(!0),r(_,null,k(u.packageUniqueRoomTypes,(t,a)=>(o(),r("option",{key:a,value:a},b(t),9,na))),128))],512),[[P,p.value.sourceRoomType]])])])]),s("div",la,[s("div",oa,[e[54]||(e[54]=s("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Target Configuration (Copy To)",-1)),s("div",null,[s("span",ra,"Target Count: "+b(L.value),1),s("button",{onClick:$e,class:"px-2 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 text-xs"}," Add Target ")])]),(o(!0),r(_,null,k(L.value,t=>(o(),r("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",key:t},[s("div",null,[e[56]||(e[56]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Season",-1)),y(s("select",{"onUpdate:modelValue":a=>p.value.targetConfigurations[t-1].season=a,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[55]||(e[55]=s("option",{value:""},"Select Season",-1)),(o(!0),r(_,null,k(u.assignedSeasonTypes,a=>(o(),r("option",{key:a.id,value:a.id},b(a.name),9,ua))),128))],8,ia),[[P,p.value.targetConfigurations[t-1].season]])]),s("div",null,[e[58]||(e[58]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Type",-1)),y(s("select",{"onUpdate:modelValue":a=>p.value.targetConfigurations[t-1].dateType=a,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[57]||(e[57]=s("option",{value:""},"Select Date Type",-1)),(o(!0),r(_,null,k(u.assignedDateTypes,a=>(o(),r("option",{key:a.id,value:a.id},b(a.name),9,ca))),128))],8,da),[[P,p.value.targetConfigurations[t-1].dateType]])]),s("div",null,[e[60]||(e[60]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Room Type (Optional)",-1)),s("div",pa,[y(s("select",{"onUpdate:modelValue":a=>p.value.targetConfigurations[t-1].roomType=a,class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[59]||(e[59]=s("option",{value:""},"All Room Types",-1)),(o(!0),r(_,null,k(u.packageUniqueRoomTypes,(a,l)=>(o(),r("option",{key:l,value:l},b(a),9,ma))),128))],8,ga),[[P,p.value.targetConfigurations[t-1].roomType]]),L.value>1?(o(),r("button",{key:0,onClick:a=>Pe(t-1),class:"px-2 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 text-xs",title:"Remove this target"}," × ",8,va)):x("",!0)])])]))),128))]),le.value.length>0?(o(),r("div",fa,[e[61]||(e[61]=s("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Target Configurations to Update",-1)),s("div",ya,[(o(!0),r(_,null,k(le.value,t=>(o(),r("div",{key:`${t.room_type_id}-${t.id}`,class:"flex items-center"},[y(s("input",{type:"checkbox",id:`target-${t.room_type_id}-${t.id}`,value:t,"onUpdate:modelValue":e[11]||(e[11]=a=>p.value.selectedTargetConfigs=a),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,ba),[[se,p.value.selectedTargetConfigs]]),s("label",{for:`target-${t.room_type_id}-${t.id}`,class:"ml-2 text-sm text-gray-700"},[U(b(t.room_type_name)+" ("+b(t.room_type_capacity)+" pax) ",1),s("span",xa,"- ID: "+b(t.id),1)],8,ha)]))),128))])])):x("",!0),s("div",_a,[e[64]||(e[64]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Duplicate Options",-1)),s("div",Ca,[s("label",ka,[y(s("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>p.value.includeBaseCharges=t),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:""},null,512),[[se,p.value.includeBaseCharges]]),e[62]||(e[62]=s("span",{class:"ml-2 text-sm text-gray-700"},"Include Base Charges",-1))]),s("label",wa,[y(s("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=t=>p.value.includeSurcharges=t),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:""},null,512),[[se,p.value.includeSurcharges]]),e[63]||(e[63]=s("span",{class:"ml-2 text-sm text-gray-700"},"Include Surcharges",-1))])])]),s("div",Sa,[s("button",{onClick:re,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400"}," Cancel "),s("button",{onClick:Ze,disabled:!me.value||Z.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[Z.value?(o(),r("span",Oa,"Duplicating...")):(o(),r("span",Aa,"Duplicate Configuration"))],8,Ta)])])])])])):x("",!0)]))}},Ma=at($a,[["__scopeId","data-v-b2baa8e8"]]);export{Ma as default};
