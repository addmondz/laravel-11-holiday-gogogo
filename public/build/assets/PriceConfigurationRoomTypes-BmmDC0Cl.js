import{a as I,r as f,i as O,g as n,o as l,b as s,h as C,j as x,x as S,F as p,y as v,M as we,f as D,u as H,t as c,v as W,z as Q,n as ne,q as le,I as De}from"./app-C8e-8fZa.js";import{S as $}from"./sweetalert2.esm.all-B0Dix5B2.js";import{L as $e}from"./LoadingComponent-xtTyANow.js";import{_ as Ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as Re}from"./AntdIcon-Y9KPS17H.js";var Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};function re(g){for(var b=1;b<arguments.length;b++){var m=arguments[b]!=null?Object(arguments[b]):{},h=Object.keys(m);typeof Object.getOwnPropertySymbols=="function"&&(h=h.concat(Object.getOwnPropertySymbols(m).filter(function(T){return Object.getOwnPropertyDescriptor(m,T).enumerable}))),h.forEach(function(T){Oe(g,T,m[T])})}return g}function Oe(g,b,m){return b in g?Object.defineProperty(g,b,{value:m,enumerable:!0,configurable:!0,writable:!0}):g[b]=m,g}var M=function(b,m){var h=re({},b,m.attrs);return I(Re,re({},h,{icon:Ve}),null)};M.displayName="CopyOutlined";M.inheritAttrs=!1;const Ie={class:"space-y-6"},Me={class:"bg-white shadow rounded-lg p-6"},je={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Pe=["value"],Ue=["value"],Ne=["value"],Be={class:"mt-6 flex gap-2"},Ee=["disabled"],qe={key:0},Le={key:1},ze={key:0,class:"bg-white shadow rounded-lg p-6"},Fe={key:0,class:"flex items-center justify-center min-h-[300px]"},He={key:1,class:"text-center text-gray-500"},We={key:2,class:"space-y-10"},Qe={class:"flex items-center justify-between"},Ye={class:"space-x-2"},Ge=["disabled"],Je={key:0},Xe={key:1,class:"px-3 py-2"},Ze={key:0,class:"mb-4"},Ke={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},et={class:"flex items-start space-x-3"},tt={class:"flex-1"},st={class:"text-sm text-blue-700"},at={class:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800"},ot=["data-package-config-id"],nt={class:"flex items-center justify-between"},lt={class:"font-medium text-gray-900"},rt={class:"space-x-2"},it={style:{"margin-top":"10px"}},dt={class:"overflow-x-auto border rounded-lg"},ut={class:"min-w-full text-sm"},ct={class:"bg-gray-200"},pt=["colspan"],gt={class:"px-4 py-2 align-middle whitespace-nowrap font-medium text-gray-800"},mt={class:"flex flex-col items-start justify-start w-32"},yt={class:"text-xs text-gray-600"},ft={key:0,class:"flex items-center rounded-md shadow-sm border border-gray-300 focus-within:ring-2 focus-within:ring-indigo-500"},vt=["onUpdate:modelValue","onInput"],bt=["onClick"],ht={key:1,class:"mt-1 font-medium"},xt={key:0,style:{"margin-top":"0"}},_t={class:"overflow-x-auto border rounded-lg"},Ct={class:"min-w-full text-sm"},Tt={class:"bg-gray-200"},kt={class:"px-4 py-3 font-medium text-gray-800 whitespace-nowrap"},St={key:0,class:"flex"},wt=["onUpdate:modelValue"],Dt=["onClick"],$t={key:1,class:"flex items-center justify-end pt-6 border-t"},At={class:"space-x-2"},Rt=["disabled"],Vt={key:0},Ot={key:1,class:"px-3 py-2"},It={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",style:{"margin-top":"0"}},Mt={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-3/4 shadow-lg rounded-md bg-white"},jt={class:"mt-3"},Pt={class:"space-y-6"},Ut={class:"bg-gray-50 p-4 rounded-lg"},Nt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Bt=["value"],Et=["value"],qt=["value"],Lt={class:"bg-green-50 p-4 rounded-lg"},zt={class:"flex items-center justify-between"},Ft={class:"text-sm text-gray-500 mr-2"},Ht=["onUpdate:modelValue"],Wt=["value"],Qt=["onUpdate:modelValue"],Yt=["value"],Gt={class:"flex gap-2"},Jt=["onUpdate:modelValue"],Xt=["value"],Zt=["onClick"],Kt={key:0,class:"bg-green-50 p-4 rounded-lg"},es={class:"space-y-2 max-h-48 overflow-y-auto"},ts=["id","value"],ss=["for"],as={class:"text-gray-500"},os={class:"bg-yellow-50 p-4 rounded-lg"},ns={class:"space-y-2"},ls={class:"flex items-center"},rs={class:"flex items-center"},is={class:"flex justify-end space-x-3 pt-4"},ds=["disabled"],us={key:0},cs={key:1},ps={__name:"PriceConfigurationRoomTypes",props:{packageId:{type:Number,required:!0},seasonTypes:{type:Array,required:!0},dateTypes:{type:Array,required:!0},packageUniqueRoomTypes:{type:Object,required:!0},allSeasonTypes:{type:Array,required:!0},allDateTypes:{type:Array,required:!0},assignedSeasonTypes:{type:Array,required:!0},assignedDateTypes:{type:Array,required:!0}},setup(g){const b=g,m=f(""),h=f(""),T=f(""),V=f(!1),E=f(!1),_=f(!1),A=f(!1),q=f(!1),j=f(!1);f(!1),f(!1);const P=f([]),L=f([]),i=f({sourceSeason:"",sourceDateType:"",sourceRoomType:"",selectedSourceConfig:null,targetConfigurations:[{season:"",dateType:"",roomType:""}],includeBaseCharges:!0,includeSurcharges:!0}),R=f(1),ie=()=>{i.value.targetConfigurations.push({season:"",dateType:"",roomType:""}),R.value++},de=o=>{i.value.targetConfigurations.length>1&&(i.value.targetConfigurations.splice(o,1),R.value--)},ue=()=>{ke(),q.value=!0},k=f([]),Y=f({}),ce=O(()=>!!m.value&&!!h.value),G=o=>Number(o??0).toFixed(2);O(()=>i.value.sourceSeason&&i.value.sourceDateType),O(()=>i.value.targetSeason&&i.value.targetDateType),O(()=>m.value&&h.value&&k.value.length>0);const J=O(()=>i.value.targetConfigurations.some(e=>e.season&&e.dateType)?i.value.targetConfigurations.some(e=>e.season===i.value.sourceSeason&&e.dateType===i.value.sourceDateType&&e.roomType===i.value.sourceRoomType)?($.fire({icon:"error",title:"Error",text:"Source and target cannot be the same"}),!1):!0:!1),pe=/^(\d+)_a_(\d+)_c_(\d+)_i$/,U=o=>{var e;const t=(e=o==null?void 0:o.match)==null?void 0:e.call(o,pe);return t?{a:+t[1],c:+t[2],i:+t[3]}:null},X=o=>{const t=U(o);if(!t)return o||"";const e=(a,r,y)=>`${a} ${a===1?r:y||r+"s"}`;return`${e(t.a,"Adult")} + ${e(t.c,"Child","Children")} + ${e(t.i,"Infant")}`},ge=o=>[...o].sort((t,e)=>{const a=U(t)||{a:0,c:0,i:0},r=U(e)||{a:0,c:0,i:0};return a.a!==r.a?r.a-a.a:a.c!==r.c?r.c-a.c:r.i-a.i}),Z=o=>{const t=Object.keys(o||{});return ge(t).map(a=>[a,o[a]])},me=o=>o==="a"||o==="c"||o==="i",ye=o=>{const t=Object.keys(o??{}),e=a=>{const r=a[0],d=!me(a)?parseInt(a.slice(1),10)||0:-1;return({a:1,c:2,i:3}[r]||9)*100+d};return t.sort((a,r)=>e(a)-e(r))},fe=o=>{if(!o)return"";const t=o[0],e=o.slice(1);return t==="a"?`Adult ${e}`:t==="c"?`Child ${e}`:t==="i"?`Infant ${e}`:o},ve=(o,t,e)=>{var d;if(!o||!t||!e)return;const a=(d=o.base)==null?void 0:d[t];if(!a)return;const r=a[e];if(r==null||r==="")return;const y=String(e)[0];Object.keys(a).forEach(u=>{u.startsWith(y)&&(a[u]=Number(r))})},be=(o,t,e)=>{var y;if(!o||!t||!e)return;const a=(y=o.surch)==null?void 0:y[t];if(!a)return;const r=a[e];r==null||r===""||Object.keys(o.surch).forEach(d=>{const u=o.surch[d];u&&u[e]!==void 0&&(u[e]=Number(r))})};let K="",ee=0;const he=(o,t,e)=>{De(()=>{xe(o,t)})},xe=(o,t)=>{var y;const e=(y=o.base)==null?void 0:y[t];if(!e)return;const a=U(t);if(!a)return;const r=Math.max(a.a,a.c,a.i);for(let d=1;d<=r;d++){const u=[];if(e[`a${d}`]!==void 0&&u.push({type:`Adult ${d}`,price:Number(e[`a${d}`])}),e[`c${d}`]!==void 0&&u.push({type:`Child ${d}`,price:Number(e[`c${d}`])}),e[`i${d}`]!==void 0&&u.push({type:`Infant ${d}`,price:Number(e[`i${d}`])}),u.length<2)continue;const N={};u.forEach(({type:B,price:w})=>{w>0&&(N[w]||(N[w]=[]),N[w].push(B))});for(const[B,w]of Object.entries(N))if(w.length>=2){const ae=`cross-${o.room_type_id}-${t}-slot${d}-${B}`,oe=Date.now();if(ae===K&&oe-ee<3e3)return;K=ae,ee=oe,$.fire({icon:"warning",title:"Same Price Detected",text:`${w.join(" and ")} have the same price (${B}). Is this intended?`,timer:5e3,showConfirmButton:!0,confirmButtonText:"OK"});return}}},_e=o=>o==="a"?"Adult (per pax)":o==="c"?"Child (per pax)":"Infant (per pax)",z=()=>{V.value=!0,E.value=!0,_.value=!1,Q.post(route("configuration-prices.fetchPricesRoomTypes"),{package_id:b.packageId,season_type_id:m.value,date_type_id:h.value,room_type_id:T.value||void 0}).then(o=>{let t=o==null?void 0:o.data;if(typeof t=="string"){const e=t.replace(/,\s*(?=[}\]])/g,"");try{t=JSON.parse(e)}catch(a){console.error("Failed to parse API string after sanitizing:",a),t=[]}}t=Array.isArray(t)?t:[],Y.value=t.reduce((e,a)=>{var d,u;const r=(a==null?void 0:a.room_type_id)??((d=a==null?void 0:a.room_type)==null?void 0:d.id),y=(u=a==null?void 0:a.room_type)==null?void 0:u.name;return r&&y&&(e[r]=y),e},{}),k.value=t.map(e=>{var r;const a=Array.isArray(e==null?void 0:e.prices)&&e.prices.length?e.prices[0]:null;return{room_type_id:(e==null?void 0:e.room_type_id)??((r=e==null?void 0:e.room_type)==null?void 0:r.id)??0,room_type_capacity:(e==null?void 0:e.room_type_capacity)??0,room_type_name:(e==null?void 0:e.room_type_name)??"",id:(e==null?void 0:e.id)??0,base:(a==null?void 0:a.base)??{},surch:(a==null?void 0:a.surch)??{}}})}).catch(o=>{console.error(o),$.fire({icon:"error",title:"Error",text:"Failed to fetch price configurations"}),k.value=[]}).finally(()=>{V.value=!1})},Ce=()=>{m.value="",h.value="",T.value="",k.value=[],Y.value={},E.value=!1,_.value=!1},te=()=>{_.value=!1,z()},se=()=>{A.value=!0;const o=k.value.map(e=>({package_configuration_id:Number(e.id)||null,room_type_id:Number(e.room_type_id)||null,base:e.base??{},surch:e.surch??{}})),t={package_id:b.packageId,season_type_id:m.value,date_type_id:h.value,rooms:o};Q.put(route("configuration-prices.updateRoomTypePrices"),t).then(()=>{_.value=!1,$.fire({icon:"success",title:"Saved",timer:1200,showConfirmButton:!1}),z()}).catch(e=>{var a,r;console.error(e),$.fire({icon:"error",title:"Error",text:((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to save"})}).finally(()=>{A.value=!1})},F=()=>{q.value=!1,P.value=[],L.value=[],i.value={sourceSeason:"",sourceDateType:"",sourceRoomType:"",selectedSourceConfig:null,targetConfigurations:[{season:"",dateType:"",roomType:""}],includeBaseCharges:!0,includeSurcharges:!0},R.value=1},Te=o=>{let t=0;return Object.values(o??{}).forEach(e=>{Object.keys(e??{}).forEach(a=>{const r=parseInt(a.slice(1),10);isNaN(r)||(t=Math.max(t,r))})}),t+1},ke=()=>{i.value.sourceSeason=m.value,i.value.sourceDateType=h.value,i.value.sourceRoomType=T.value,P.value=k.value.map(o=>({id:o.id,room_type_id:o.room_type_id,room_type_capacity:o.room_type_capacity,room_type_name:o.room_type_name,base:o.base,surch:o.surch})),P.value.length===1&&(i.value.selectedSourceConfig=P.value[0])},Se=async()=>{var o,t;if(J.value){j.value=!0;try{const e=i.value.targetConfigurations.filter(r=>r.season&&r.dateType),a={package_id:b.packageId,source_season_type_id:i.value.sourceSeason,source_date_type_id:i.value.sourceDateType,source_room_type_id:i.value.sourceRoomType,target_configurations:e.map(r=>({season_type_id:r.season,date_type_id:r.dateType,room_type_id:r.roomType})),include_base_charges:i.value.includeBaseCharges,include_surcharges:i.value.includeSurcharges};await Q.post(route("configuration-prices.duplicateToMultiple"),a),await $.fire({icon:"success",title:"Duplication Successful",text:`Price configuration duplicated to ${e.length} target configuration(s)`,timer:2e3,showConfirmButton:!1}),F()}catch(e){console.error("Duplication error:",e),await $.fire({icon:"error",title:"Duplication Failed",text:((t=(o=e.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to duplicate price configuration"})}finally{j.value=!1}}};return(o,t)=>(l(),n("div",Ie,[s("div",Me,[s("div",je,[s("div",null,[t[11]||(t[11]=s("label",{class:"block text-sm font-medium text-gray-700"},"Season",-1)),x(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[10]||(t[10]=s("option",{value:""},"Select Season",-1)),(l(!0),n(p,null,v(g.assignedSeasonTypes,e=>(l(),n("option",{key:e.id,value:e.id},c(e.name),9,Pe))),128))],512),[[S,m.value]])]),s("div",null,[t[13]||(t[13]=s("label",{class:"block text-sm font-medium text-gray-700"},"Date Type",-1)),x(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>h.value=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[12]||(t[12]=s("option",{value:""},"Select Date Type",-1)),(l(!0),n(p,null,v(g.assignedDateTypes,e=>(l(),n("option",{key:e.id,value:e.id},c(e.name),9,Ue))),128))],512),[[S,h.value]])]),s("div",null,[t[15]||(t[15]=s("label",{class:"block text-sm font-medium text-gray-700"},"Room Type (Optional)",-1)),x(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>T.value=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[14]||(t[14]=s("option",{value:""},"All Room Types",-1)),(l(!0),n(p,null,v(g.packageUniqueRoomTypes,(e,a)=>(l(),n("option",{key:a,value:a},c(e),9,Ne))),128))],512),[[S,T.value]])])]),s("div",Be,[s("button",{onClick:z,disabled:!ce.value||V.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs disabled:opacity-50 disabled:cursor-not-allowed"},[V.value?(l(),n("span",qe,"Loading...")):(l(),n("span",Le,"Search Prices"))],8,Ee),s("button",{onClick:Ce,class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-xs"}," Reset ")])]),E.value?(l(),n("div",ze,[V.value?(l(),n("div",Fe,[I($e)])):k.value.length?(l(),n("div",We,[s("div",Qe,[t[16]||(t[16]=s("div",null,[s("h2",{class:"text-lg font-semibold"},"Price Matrix"),s("p",{class:"text-xs text-gray-500"}," Base charge applies to each slot (Adult 1, Adult 2, Child 1, …). Surcharge applies per person (Adult / Child / Infant). ")],-1)),s("div",Ye,[_.value?(l(),n(p,{key:0},[s("button",{onClick:te,class:"px-3 py-2 rounded bg-gray-100 text-gray-700 text-sm"}," Cancel "),s("button",{onClick:se,class:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",disabled:A.value},[A.value?(l(),n("span",Je,"Saving...")):(l(),n("span",Xe,"Save"))],8,Ge)],64)):C("",!0)])]),_.value?(l(),n("div",Ze,[s("div",Ke,[s("div",et,[t[26]||(t[26]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),s("div",tt,[t[24]||(t[24]=s("h3",{class:"text-sm font-medium text-blue-800 mb-1"}," Quick Copy Feature ",-1)),s("p",st,[t[18]||(t[18]=D(" Click the ")),s("span",at,[I(H(M),{class:"h-3 w-3 mr-1"}),t[17]||(t[17]=D(" copy icon "))]),t[19]||(t[19]=D(" next to any price to instantly apply that same value across matching fields. The copy behavior differs slightly between ")),t[20]||(t[20]=s("strong",null,"Base Charge",-1)),t[21]||(t[21]=D(" and ")),t[22]||(t[22]=s("strong",null,"Surcharges",-1)),t[23]||(t[23]=D(": "))]),t[25]||(t[25]=we('<ul class="mt-3 text-xs text-blue-700 list-disc list-inside space-y-3" data-v-6c1df7ac><li data-v-6c1df7ac><span class="font-semibold text-blue-800" data-v-6c1df7ac>Base Charge:</span> Copies the value to all fields with the same <strong data-v-6c1df7ac>person type</strong> (e.g. Adults, Children) within the <strong data-v-6c1df7ac>same row</strong>. <div class="mt-1 text-blue-600" data-v-6c1df7ac><span class="font-medium" data-v-6c1df7ac>Example:</span> Clicking the copy icon beside <strong data-v-6c1df7ac>Adult 1</strong> in the row “4 Adults + 0 Children + 0 Infants” will automatically copy that price to <strong data-v-6c1df7ac>Adult 2</strong>, <strong data-v-6c1df7ac>Adult 3</strong>, and <strong data-v-6c1df7ac>Adult 4</strong> in that same row. </div></li><li data-v-6c1df7ac><span class="font-semibold text-blue-800" data-v-6c1df7ac>Surcharges:</span> Copies the value to all fields with the same <strong data-v-6c1df7ac>person type</strong> within the <strong data-v-6c1df7ac>same room</strong>. <div class="mt-1 text-blue-600" data-v-6c1df7ac><span class="font-medium" data-v-6c1df7ac>Example:</span> Clicking the copy icon beside <strong data-v-6c1df7ac>Adult 1</strong> under “Room A” will automatically copy that surcharge value to all the adults surcharge within that same room. </div></li></ul><div class="mt-3 text-xs text-blue-600" data-v-6c1df7ac><span class="font-bold" data-v-6c1df7ac>Remember:</span> Always click <em data-v-6c1df7ac>Save</em> after copying values to confirm your changes. </div>',2))])])])])):C("",!0),(l(!0),n(p,null,v(k.value,e=>(l(),n("div",{key:e.room_type_id,class:"space-y-8","data-package-config-id":e.id},[s("div",nt,[s("h3",lt,c(e.room_type_name)+" ( "+c(e.room_type_capacity)+" pax ) ",1),s("div",rt,[_.value?C("",!0):(l(),n("button",{key:0,onClick:t[3]||(t[3]=a=>_.value=!0),class:"px-5 py-2 rounded bg-indigo-600 text-white text-sm"}," Edit All Prices ")),!_.value&&k.value.length>0?(l(),n("button",{key:1,onClick:ue,class:"px-5 py-2 rounded bg-green-600 text-white text-sm hover:bg-green-700"}," Duplicate to Multiple ")):C("",!0)])]),s("section",it,[s("div",dt,[s("table",ut,[s("thead",ct,[s("tr",null,[s("th",{class:"px-4 py-2 text-left",colspan:Te(e.base)}," Base Charge ",8,pt)])]),s("tbody",null,[(l(!0),n(p,null,v(Z(e.base),([a,r],y)=>(l(),n("tr",{key:a,class:ne(y%2?"bg-white":"bg-gray-50")},[s("td",gt,c(X(a)),1),(l(!0),n(p,null,v(ye(r),d=>(l(),n("td",{class:"px-4 py-2",key:d},[s("div",mt,[s("span",yt,c(fe(d)),1),_.value?(l(),n("div",ft,[x(s("input",{type:"number",step:"0.01",class:"w-full rounded-l-md border-none focus:ring-0 px-3 py-2","onUpdate:modelValue":u=>e.base[a][d]=u,onInput:u=>he(e,a)},null,40,vt),[[le,e.base[a][d],void 0,{number:!0}]]),s("button",{type:"button",class:"flex items-center justify-center px-2 border-l border-gray-300 text-gray-500 hover:text-indigo-600 hover:bg-gray-50 rounded-r-md",title:"Copy this pax type's value across this row",onClick:u=>ve(e,a,d)},[I(H(M),{class:"h-5 w-5"})],8,bt)])):(l(),n("span",ht,"MYR "+c(G(e.base[a][d])),1))])]))),128))],2))),128))])])])]),e.surch&&Object.keys(e.surch||{}).length?(l(),n("section",xt,[s("div",_t,[s("table",Ct,[s("thead",Tt,[s("tr",null,[t[27]||(t[27]=s("th",{class:"px-4 py-2 text-left"},"Surcharge",-1)),(l(),n(p,null,v(["a","c","i"],a=>s("th",{key:a,class:"px-4 py-2 text-left"},c(_e(a)),1)),64))])]),s("tbody",null,[(l(!0),n(p,null,v(Z(e.surch),([a,r],y)=>(l(),n("tr",{key:a,class:ne(y%2?"bg-white":"bg-gray-50")},[s("td",kt,c(X(a)),1),(l(),n(p,null,v(["a","c","i"],d=>s("td",{key:d,class:"px-4 py-2"},[r[d]!==void 0?(l(),n(p,{key:0},[_.value?(l(),n("div",St,[x(s("input",{type:"number",step:"0.01",class:"w-24 rounded-l-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500","onUpdate:modelValue":u=>e.surch[a][d]=u},null,8,wt),[[le,e.surch[a][d],void 0,{number:!0}]]),s("button",{type:"button",class:"flex items-center justify-center px-2 border-l border-gray-300 text-gray-500 hover:text-indigo-600 hover:bg-gray-50 rounded-r-md",title:"Copy this surcharge value to all rows",onClick:u=>be(e,a,d)},[I(H(M),{class:"h-5 w-5"})],8,Dt)])):(l(),n(p,{key:1},[D(" MYR "+c(G(r[d])),1)],64))],64)):C("",!0)])),64))],2))),128))])])])])):C("",!0)],8,ot))),128)),_.value?(l(),n("div",$t,[s("div",At,[s("button",{onClick:te,class:"px-3 py-2 rounded bg-gray-100 text-gray-700 text-sm"}," Cancel "),s("button",{onClick:se,class:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",disabled:A.value},[A.value?(l(),n("span",Vt,"Saving...")):(l(),n("span",Ot,"Save"))],8,Rt)])])):C("",!0)])):(l(),n("div",He," No price configurations found for the selected filters. "))])):C("",!0),q.value?(l(),n("div",It,[s("div",Mt,[s("div",jt,[s("div",{class:"flex items-center justify-between"},[t[29]||(t[29]=s("h3",{class:"text-lg font-medium text-gray-900"},"Duplicate Price Configuration",-1)),s("button",{onClick:F,class:"text-gray-400 hover:text-gray-600"},t[28]||(t[28]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t[48]||(t[48]=s("small",{class:"text-gray-500 mb-4 block"},' If you wish to duplicate to all room types, please select "All Room Types" for both target room type and source room type. ',-1)),s("div",Pt,[s("div",Ut,[t[36]||(t[36]=s("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Source Configuration (Copy From)",-1)),s("div",Nt,[s("div",null,[t[31]||(t[31]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Season",-1)),x(s("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.value.sourceSeason=e),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[30]||(t[30]=s("option",{value:""},"Select Season",-1)),(l(!0),n(p,null,v(g.assignedSeasonTypes,e=>(l(),n("option",{key:e.id,value:e.id},c(e.name),9,Bt))),128))],512),[[S,i.value.sourceSeason]])]),s("div",null,[t[33]||(t[33]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Type",-1)),x(s("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.value.sourceDateType=e),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[32]||(t[32]=s("option",{value:""},"Select Date Type",-1)),(l(!0),n(p,null,v(g.assignedDateTypes,e=>(l(),n("option",{key:e.id,value:e.id},c(e.name),9,Et))),128))],512),[[S,i.value.sourceDateType]])]),s("div",null,[t[35]||(t[35]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Room Type (Optional)",-1)),x(s("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.value.sourceRoomType=e),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[34]||(t[34]=s("option",{value:""},"All Room Types",-1)),(l(!0),n(p,null,v(g.packageUniqueRoomTypes,(e,a)=>(l(),n("option",{key:a,value:a},c(e),9,qt))),128))],512),[[S,i.value.sourceRoomType]])])])]),s("div",Lt,[s("div",zt,[t[37]||(t[37]=s("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Target Configuration (Copy To)",-1)),s("div",null,[s("span",Ft,"Target Count: "+c(R.value),1),s("button",{onClick:ie,class:"px-2 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 text-xs"}," Add Target ")])]),(l(!0),n(p,null,v(R.value,e=>(l(),n("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",key:e},[s("div",null,[t[39]||(t[39]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Season",-1)),x(s("select",{"onUpdate:modelValue":a=>i.value.targetConfigurations[e-1].season=a,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[38]||(t[38]=s("option",{value:""},"Select Season",-1)),(l(!0),n(p,null,v(g.assignedSeasonTypes,a=>(l(),n("option",{key:a.id,value:a.id},c(a.name),9,Wt))),128))],8,Ht),[[S,i.value.targetConfigurations[e-1].season]])]),s("div",null,[t[41]||(t[41]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Type",-1)),x(s("select",{"onUpdate:modelValue":a=>i.value.targetConfigurations[e-1].dateType=a,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[40]||(t[40]=s("option",{value:""},"Select Date Type",-1)),(l(!0),n(p,null,v(g.assignedDateTypes,a=>(l(),n("option",{key:a.id,value:a.id},c(a.name),9,Yt))),128))],8,Qt),[[S,i.value.targetConfigurations[e-1].dateType]])]),s("div",null,[t[43]||(t[43]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Room Type (Optional)",-1)),s("div",Gt,[x(s("select",{"onUpdate:modelValue":a=>i.value.targetConfigurations[e-1].roomType=a,class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[42]||(t[42]=s("option",{value:""},"All Room Types",-1)),(l(!0),n(p,null,v(g.packageUniqueRoomTypes,(a,r)=>(l(),n("option",{key:r,value:r},c(a),9,Xt))),128))],8,Jt),[[S,i.value.targetConfigurations[e-1].roomType]]),R.value>1?(l(),n("button",{key:0,onClick:a=>de(e-1),class:"px-2 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 text-xs",title:"Remove this target"}," × ",8,Zt)):C("",!0)])])]))),128))]),L.value.length>0?(l(),n("div",Kt,[t[44]||(t[44]=s("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Target Configurations to Update",-1)),s("div",es,[(l(!0),n(p,null,v(L.value,e=>(l(),n("div",{key:`${e.room_type_id}-${e.id}`,class:"flex items-center"},[x(s("input",{type:"checkbox",id:`target-${e.room_type_id}-${e.id}`,value:e,"onUpdate:modelValue":t[7]||(t[7]=a=>i.value.selectedTargetConfigs=a),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,ts),[[W,i.value.selectedTargetConfigs]]),s("label",{for:`target-${e.room_type_id}-${e.id}`,class:"ml-2 text-sm text-gray-700"},[D(c(e.room_type_name)+" ("+c(e.room_type_capacity)+" pax) ",1),s("span",as,"- ID: "+c(e.id),1)],8,ss)]))),128))])])):C("",!0),s("div",os,[t[47]||(t[47]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Duplicate Options",-1)),s("div",ns,[s("label",ls,[x(s("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>i.value.includeBaseCharges=e),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:""},null,512),[[W,i.value.includeBaseCharges]]),t[45]||(t[45]=s("span",{class:"ml-2 text-sm text-gray-700"},"Include Base Charges",-1))]),s("label",rs,[x(s("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>i.value.includeSurcharges=e),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:""},null,512),[[W,i.value.includeSurcharges]]),t[46]||(t[46]=s("span",{class:"ml-2 text-sm text-gray-700"},"Include Surcharges",-1))])])]),s("div",is,[s("button",{onClick:F,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400"}," Cancel "),s("button",{onClick:Se,disabled:!J.value||j.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[j.value?(l(),n("span",us,"Duplicating...")):(l(),n("span",cs,"Duplicate Configuration"))],8,ds)])])])])])):C("",!0)]))}},bs=Ae(ps,[["__scopeId","data-v-6c1df7ac"]]);export{bs as default};
