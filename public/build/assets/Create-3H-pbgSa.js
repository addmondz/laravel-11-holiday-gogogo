import{C as S,l as R,x as B,i as G,g as d,o as n,a as k,u as o,m as z,w as U,b as e,e as N,j as g,h as m,n as f,k as p,t as u,F as h,s as v,v as T,P as F,f as A}from"./app-oI5Bu5d3.js";import{A as q}from"./AuthenticatedLayout-D1eChwYi.js";import{S as x}from"./sweetalert2.esm.all-B0Dix5B2.js";import{_ as J}from"./BreadcrumbComponent-DGNxhV2e.js";import"./ApplicationLogo-Sx9L2W9f.js";import"./LoadingComponent-BpjGMBTh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AntdIcon-CCDwBwOk.js";const K={class:"pb-12 pt-6"},W={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Q={class:"p-6 text-gray-900"},X={class:"grid grid-cols-1 gap-6"},Y={key:0,class:"mt-1 text-sm text-red-600"},Z={key:0,class:"mt-1 text-sm text-red-600"},ee={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},te={class:"space-y-1 text-center"},se={key:0,class:"flex gap-4 mb-4"},oe=["src"],re=["onClick"],ae={class:"text-sm text-gray-600"},ie={class:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},de={key:0,class:"mt-1 text-sm text-red-600"},ne={class:"grid grid-cols-3 gap-6"},le={key:0,class:"mt-1 text-sm text-red-600"},ce={class:"grid grid-cols-2 gap-6"},me={key:0,class:"mt-1 text-sm text-red-600"},ue={key:0,class:"mt-1 text-sm text-red-600"},ge={key:0,class:"mt-1 text-sm text-red-600"},pe={class:"grid grid-cols-7 gap-2"},_e=["id","value"],fe=["for"],ye={key:0,class:"mt-1 text-sm text-red-600"},xe={key:0,class:"mt-1 text-sm text-red-600"},be={key:0,class:"mt-1 text-sm text-red-600"},he={class:"grid grid-cols-2 gap-6"},ke=["max"],ve={key:0,class:"mt-1 text-sm text-red-600"},we=["min"],Ue={key:0,class:"mt-1 text-sm text-red-600"},Pe={key:1,class:"mt-1 text-sm text-red-600"},Ce={class:"mt-6 border-t border-gray-600 pt-6"},Re={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},Ve={class:"text-sm text-red-600"},je={class:"overflow-x-auto"},$e={class:"min-w-full divide-y divide-gray-200"},De={class:"bg-white divide-y divide-gray-200"},Me={class:"px-6 py-4 whitespace-nowrap"},Ee=["onUpdate:modelValue"],Ie={key:0,class:"mt-1 text-sm text-red-600"},Le={class:"px-6 py-4 whitespace-nowrap"},Oe=["onUpdate:modelValue"],Se={key:0,class:"mt-1 text-sm text-red-600"},Be={class:"px-6 py-4"},Ge=["onUpdate:modelValue"],ze={class:"px-6 py-4"},Ne={class:"space-y-2"},Te={key:0,class:"flex flex-wrap gap-2"},Fe=["src"],Ae=["onClick"],qe={class:"flex justify-center border-2 border-gray-300 border-dashed rounded-md"},Je={class:"space-y-1 text-center"},Ke={class:"text-sm text-gray-600"},We=["for"],He=["id","onChange"],Qe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Xe=["onClick"],Ye={class:"mt-6 flex justify-end"},Ze=["disabled"],lt={__name:"Create",setup(et){const t=S({name:"",description:"",images:[],display_price_adult:null,display_price_child:0,display_price_infant:0,adult_surcharge:0,child_surcharge:0,infant_surcharge:0,infant_max_age_desc:"",child_max_age_desc:"",package_days:2,weekend_days:[0,6],terms_and_conditions:"",location:"",package_start_date:"",package_end_date:"",room_types:[{name:"",max_occupancy:2,description:"",images:[],imagePreviews:[]}]}),y=R(""),b=R([]),V=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],j=()=>{t.room_types.push({name:"",max_occupancy:2,description:"",images:[],imagePreviews:[]})},$=c=>{t.room_types.splice(c,1)},D=c=>{const s=Array.from(c.target.files),r=10*1024*1024,a=["image/jpeg","image/png","image/gif"],l=[];if(s.forEach(i=>{a.includes(i.type)||l.push(`${i.name} is not a valid image file. Only JPG, PNG, and GIF are allowed.`),i.size>r&&l.push(`${i.name} is too large. Maximum file size is 10MB.`)}),l.length>0){x.fire({title:"Invalid Images",html:l.join("<br>"),icon:"error",confirmButtonText:"OK"});return}t.images=[...t.images,...s],s.forEach(i=>{b.value.push(URL.createObjectURL(i))})},M=c=>{t.images.splice(c,1),URL.revokeObjectURL(b.value[c]),b.value.splice(c,1)},E=(c,s)=>{const r=Array.from(c.target.files),a=10*1024*1024,l=["image/jpeg","image/png","image/gif"],i=[];if(r.forEach(_=>{l.includes(_.type)||i.push(`${_.name} is not a valid image file. Only JPG, PNG, and GIF are allowed.`),_.size>a&&i.push(`${_.name} is too large. Maximum file size is 10MB.`)}),i.length>0){x.fire({title:"Invalid Images",html:i.join("<br>"),icon:"error",confirmButtonText:"OK"});return}t.room_types[s].images=[...t.room_types[s].images||[],...r],r.forEach(_=>{t.room_types[s].imagePreviews||(t.room_types[s].imagePreviews=[]),t.room_types[s].imagePreviews.push(URL.createObjectURL(_))})},I=(c,s)=>{t.room_types[c].images.splice(s,1),URL.revokeObjectURL(t.room_types[c].imagePreviews[s]),t.room_types[c].imagePreviews.splice(s,1)};B(()=>{t.room_types.forEach(c=>{c.imagePreviews&&c.imagePreviews.forEach(s=>URL.revokeObjectURL(s))}),b.value.forEach(c=>URL.revokeObjectURL(c))});const P=()=>{if(y.value="",t.package_start_date&&t.package_end_date){const c=new Date(t.package_start_date),s=new Date(t.package_end_date),r=Math.abs(s-c),a=Math.ceil(r/(1e3*60*60*24));s<=c?y.value="End date must be after start date":a<1&&(y.value="End date must be at least one day after start date")}},L=()=>{const s=["image/jpeg","image/png","image/gif"],r=[];if(t.images.forEach(l=>{s.includes(l.type)||r.push(`${l.name} is not a valid image file. Only JPG, PNG, and GIF are allowed.`),l.size>10485760&&r.push(`${l.name} is too large. Maximum file size is 10MB.`)}),r.length>0){x.fire({title:"Invalid Images",html:r.join("<br>"),icon:"error",confirmButtonText:"OK"});return}if(P(),y.value){x.fire({title:"Validation Error",text:y.value,icon:"error",confirmButtonText:"OK"});return}const a=[];if(t.room_types.forEach((l,i)=>{var _;(_=l.name)!=null&&_.trim()||a.push(`Room type ${i+1}: Name is required`),(!l.max_occupancy||l.max_occupancy<1)&&a.push(`Room type ${i+1}: Maximum occupancy must be at least 1`),l.images&&l.images.forEach((w,C)=>{s.includes(w.type)||a.push(`Room type ${i+1}, Image ${C+1}: Invalid file type. Only JPG, PNG, and GIF are allowed.`),w.size>10485760&&a.push(`Room type ${i+1}, Image ${C+1}: File too large. Maximum size is 10MB.`)})}),a.length>0){x.fire({title:"Validation Error",html:a.join("<br>"),icon:"error",confirmButtonText:"OK"});return}t.post(route("packages.store"),{onSuccess:()=>{x.fire({icon:"success",title:"Success",text:"Package created successfully"})},onError:l=>{console.log("Validation errors:",l)}})},O=G(()=>[{title:"Packages",link:route("packages.index")},{title:"Create Package"}]);return(c,s)=>(n(),d(h,null,[k(o(z),{title:"Create Package"}),k(q,null,{header:U(()=>s[11]||(s[11]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},null,-1)])),default:U(()=>[e("div",K,[e("div",W,[e("div",H,[e("div",Q,[k(J,{breadcrumbs:O.value,class:"mb-9"},null,8,["breadcrumbs"]),e("form",{onSubmit:N(L,["prevent"])},[e("div",X,[e("div",null,[s[12]||(s[12]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),g(e("input",{type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=r=>o(t).name=r),class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.name}]),required:""},null,2),[[p,o(t).name]]),o(t).errors.name?(n(),d("div",Y,u(o(t).errors.name),1)):m("",!0)]),e("div",null,[s[13]||(s[13]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),g(e("textarea",{id:"description","onUpdate:modelValue":s[1]||(s[1]=r=>o(t).description=r),rows:"3",class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.description}])},null,2),[[p,o(t).description]]),o(t).errors.description?(n(),d("div",Z,u(o(t).errors.description),1)):m("",!0)]),e("div",null,[s[17]||(s[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"Package Images",-1)),e("div",ee,[e("div",te,[o(t).images&&o(t).images.length>0?(n(),d("div",se,[(n(!0),d(h,null,v(b.value,(r,a)=>(n(),d("div",{key:a,class:"relative group"},[e("img",{src:r,class:"h-24 w-full object-cover rounded-lg"},null,8,oe),e("button",{type:"button",onClick:l=>M(a),class:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity"},s[14]||(s[14]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,re)]))),128))])):m("",!0),e("div",ae,[e("label",ie,[s[15]||(s[15]=e("span",null,"Upload Images",-1)),e("input",{type:"file",onChange:D,accept:"image/*",multiple:"",class:"sr-only"},null,32)])]),s[16]||(s[16]=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])]),o(t).errors.images?(n(),d("div",de,u(o(t).errors.images),1)):m("",!0)]),e("div",ne,[e("div",null,[s[18]||(s[18]=e("label",{for:"display_price_adult",class:"block text-sm font-medium text-gray-700"},"Display Price",-1)),g(e("input",{type:"number",id:"display_price_adult","onUpdate:modelValue":s[2]||(s[2]=r=>o(t).display_price_adult=r),step:"0.01",class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.display_price_adult}])},null,2),[[p,o(t).display_price_adult]]),o(t).errors.display_price_adult?(n(),d("div",le,u(o(t).errors.display_price_adult),1)):m("",!0)])]),e("div",ce,[e("div",null,[s[19]||(s[19]=e("label",{for:"infant_max_age_desc",class:"block text-sm font-medium text-gray-700"},"Infant Age Description",-1)),g(e("input",{type:"text",id:"infant_max_age_desc","onUpdate:modelValue":s[3]||(s[3]=r=>o(t).infant_max_age_desc=r),class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.infant_max_age_desc}]),placeholder:"e.g. 0 - 11 months old"},null,2),[[p,o(t).infant_max_age_desc]]),o(t).errors.infant_max_age_desc?(n(),d("div",me,u(o(t).errors.infant_max_age_desc),1)):m("",!0)]),e("div",null,[s[20]||(s[20]=e("label",{for:"child_max_age_desc",class:"block text-sm font-medium text-gray-700"},"Child Age Description",-1)),g(e("input",{type:"text",id:"child_max_age_desc","onUpdate:modelValue":s[4]||(s[4]=r=>o(t).child_max_age_desc=r),class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.child_max_age_desc}]),placeholder:"e.g. 1 - 12 years old"},null,2),[[p,o(t).child_max_age_desc]]),o(t).errors.child_max_age_desc?(n(),d("div",ue,u(o(t).errors.child_max_age_desc),1)):m("",!0)]),e("div",null,[s[21]||(s[21]=e("label",{for:"package_days",class:"block text-sm font-medium text-gray-700"},"Package Duration (Nights)",-1)),g(e("input",{type:"number",id:"package_days","onUpdate:modelValue":s[5]||(s[5]=r=>o(t).package_days=r),class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.package_days}]),required:""},null,2),[[p,o(t).package_days]]),o(t).errors.package_days?(n(),d("div",ge,u(o(t).errors.package_days),1)):m("",!0)])]),e("div",null,[s[22]||(s[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Weekend Days",-1)),e("div",pe,[(n(),d(h,null,v(V,(r,a)=>e("div",{key:a,class:"flex items-center"},[g(e("input",{type:"checkbox",id:"day-"+a,value:a,"onUpdate:modelValue":s[6]||(s[6]=l=>o(t).weekend_days=l),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,_e),[[T,o(t).weekend_days]]),e("label",{for:"day-"+a,class:"ml-2 text-sm text-gray-700"},u(r),9,fe)])),64))]),s[23]||(s[23]=e("p",{class:"mt-1 text-sm text-gray-500"},"Select which days are considered weekends for pricing purposes.",-1)),o(t).errors.weekend_days?(n(),d("div",ye,u(o(t).errors.weekend_days),1)):m("",!0)]),e("div",null,[s[24]||(s[24]=e("label",{for:"terms_and_conditions",class:"block text-sm font-medium text-gray-700"},"Terms and Conditions",-1)),g(e("textarea",{id:"terms_and_conditions","onUpdate:modelValue":s[7]||(s[7]=r=>o(t).terms_and_conditions=r),rows:"3",class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.terms_and_conditions}])},null,2),[[p,o(t).terms_and_conditions]]),o(t).errors.terms_and_conditions?(n(),d("div",xe,u(o(t).errors.terms_and_conditions),1)):m("",!0)]),e("div",null,[s[25]||(s[25]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Location",-1)),g(e("input",{type:"text",id:"location","onUpdate:modelValue":s[8]||(s[8]=r=>o(t).location=r),class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.location}])},null,2),[[p,o(t).location]]),o(t).errors.location?(n(),d("div",be,u(o(t).errors.location),1)):m("",!0)]),e("div",he,[e("div",null,[s[26]||(s[26]=e("label",{for:"package_start_date",class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),g(e("input",{type:"date",id:"package_start_date","onUpdate:modelValue":s[9]||(s[9]=r=>o(t).package_start_date=r),max:o(t).package_end_date?o(t).package_end_date:void 0,class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.package_start_date||o(t).errors.package_end_date}]),required:"",onChange:P},null,42,ke),[[p,o(t).package_start_date]]),o(t).errors.package_start_date?(n(),d("div",ve,u(o(t).errors.package_start_date),1)):m("",!0)]),e("div",null,[s[27]||(s[27]=e("label",{for:"package_end_date",class:"block text-sm font-medium text-gray-700"},"End Date",-1)),g(e("input",{type:"date",id:"package_end_date","onUpdate:modelValue":s[10]||(s[10]=r=>o(t).package_end_date=r),min:o(t).package_start_date?new Date(new Date(o(t).package_start_date).getTime()+864e5).toISOString().split("T")[0]:void 0,class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.package_end_date}]),required:""},null,10,we),[[p,o(t).package_end_date]]),o(t).errors.package_end_date?(n(),d("div",Ue,u(o(t).errors.package_end_date),1)):m("",!0),y.value?(n(),d("div",Pe,u(y.value),1)):m("",!0)])]),e("div",Ce,[e("div",{class:"flex justify-between items-center mb-4"},[s[28]||(s[28]=e("h3",{class:"text-lg font-medium text-gray-900"},"Room Types",-1)),e("button",{type:"button",onClick:j,class:"px-4 py-2 text-xs bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200"}," Add Room Type ")]),o(t).errors.room_types?(n(),d("div",Re,[e("div",Ve,u(o(t).errors.room_types),1)])):m("",!0),e("div",je,[e("table",$e,[s[32]||(s[32]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Room Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Max Occupancy"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Images"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",De,[(n(!0),d(h,null,v(o(t).room_types,(r,a)=>{var l;return n(),d("tr",{key:a},[e("td",Me,[g(e("input",{type:"text","onUpdate:modelValue":i=>r.name=i,class:f(["block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors[`room_types.${a}.name`]}]),placeholder:"Room Type Name",required:""},null,10,Ee),[[p,r.name]]),o(t).errors[`room_types.${a}.name`]?(n(),d("div",Ie,u(o(t).errors[`room_types.${a}.name`]),1)):m("",!0)]),e("td",Le,[g(e("input",{type:"number","onUpdate:modelValue":i=>r.max_occupancy=i,class:f(["block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors[`room_types.${a}.max_occupancy`]}]),min:"1",required:""},null,10,Oe),[[p,r.max_occupancy]]),o(t).errors[`room_types.${a}.max_occupancy`]?(n(),d("div",Se,u(o(t).errors[`room_types.${a}.max_occupancy`]),1)):m("",!0)]),e("td",Be,[g(e("input",{type:"text","onUpdate:modelValue":i=>r.description=i,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Description"},null,8,Ge),[[p,r.description]])]),e("td",ze,[e("div",Ne,[(l=r.imagePreviews)!=null&&l.length?(n(),d("div",Te,[(n(!0),d(h,null,v(r.imagePreviews,(i,_)=>(n(),d("div",{key:_,class:"relative"},[e("img",{src:i,class:"h-20 w-20 object-cover rounded"},null,8,Fe),e("button",{type:"button",onClick:w=>I(a,_),class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"},s[29]||(s[29]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ae)]))),128))])):m("",!0),e("div",qe,[e("div",Je,[e("div",Ke,[e("label",{for:"room-type-images-"+a,class:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},[s[30]||(s[30]=e("span",null,"Upload images",-1)),e("input",{id:"room-type-images-"+a,type:"file",multiple:"",accept:"image/*",class:"sr-only",onChange:i=>E(i,a)},null,40,He)],8,We),s[31]||(s[31]=e("p",{class:"pl-1"},"or drag and drop",-1))])])])])]),e("td",Qe,[e("button",{type:"button",onClick:i=>$(a),class:"text-red-600 hover:text-red-900"}," Remove ",8,Xe)])])}),128))])])])])]),e("div",Ye,[k(o(F),{href:c.route("packages.index"),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 mr-3 text-xs"},{default:U(()=>s[33]||(s[33]=[A(" Cancel ")])),_:1},8,["href"]),e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-xs",disabled:o(t).processing}," Create Package ",8,Ze)])],32)])])])])]),_:1})],64))}};export{lt as default};
