import{l as _,W as b,g as a,o as l,a as h,u as w,m as V,w as k,b as t,t as o,j as S,k as L,q as Y,F as D,p as U,n as C,h as u}from"./app-BFBr3gDz.js";import{A as $}from"./AuthenticatedLayout-Dynw024O.js";import{P as z}from"./Pagination-DbOjxaV_.js";import{_ as H}from"./Modal.vue_vue_type_script_setup_true_lang-EAHWiodm.js";import{d as O}from"./debounce-B7fjexkm.js";import{h as q}from"./moment-C5S46NFB.js";import"./ApplicationLogo-D_728tXo.js";import"./LoadingComponent-YScQFL9D.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AntdIcon-k0x3QrDy.js";const R={class:"pb-12 pt-6"},W={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},E={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},G={class:"p-6 text-gray-900"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},K={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200"},Q={class:"p-4"},X={class:"flex items-center"},Z={class:"ml-4"},tt={class:"text-lg font-semibold text-gray-900"},et={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200"},st={class:"p-4"},ot={class:"flex items-center"},it={class:"ml-4"},nt={class:"text-lg font-semibold text-gray-900"},at={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200"},lt={class:"p-4"},rt={class:"flex items-center"},dt={class:"ml-4"},ut={class:"text-lg font-semibold text-gray-900"},mt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200"},ct={class:"p-4"},gt={class:"flex items-center"},xt={class:"ml-4"},pt={class:"text-lg font-semibold text-gray-900"},ft={class:"mb-6"},vt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},yt={class:"md:col-span-2"},ht={class:"overflow-x-auto"},_t={class:"min-w-full divide-y divide-gray-200"},bt={class:"bg-white divide-y divide-gray-200"},wt={key:0},kt={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"text-sm font-medium text-gray-900"},Mt={class:"text-sm text-gray-500"},jt={class:"px-6 py-4 whitespace-nowrap"},At={class:"text-sm font-medium text-gray-900"},Nt={class:"text-sm text-gray-500"},Bt={class:"px-6 py-4 whitespace-nowrap"},Pt={class:"text-sm text-gray-900"},St={class:"text-sm text-gray-500"},Dt={class:"px-6 py-4 whitespace-nowrap"},Ft={class:"text-sm text-gray-900"},It={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"text-sm font-medium text-gray-900"},Vt={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"px-6 py-4 whitespace-nowrap"},Yt={class:"text-sm text-gray-900"},Ut={key:0,class:"text-sm text-gray-500"},$t={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},zt={class:"flex items-center space-x-3"},Ht=["onClick"],Ot=["href"],qt={class:"mt-6"},Rt={key:0,class:"p-6"},Wt={class:"flex items-center justify-between mb-4"},Et={class:"space-y-4"},Gt={class:"flex items-center space-x-3"},Jt={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},Kt={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},Qt={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},Xt={class:"text-lg font-medium text-gray-900"},Zt={class:"text-sm text-gray-500"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ee={class:"space-y-2 text-sm"},se={class:"ml-2 font-medium"},oe={class:"ml-2 font-medium"},ie={class:"ml-2 font-medium"},ne={class:"ml-2 font-medium"},ae={class:"space-y-2 text-sm"},le={class:"ml-2 font-medium text-lg text-gray-900"},re={class:"ml-2 font-medium"},de={class:"ml-2 font-medium"},ue={key:0},me={class:"ml-2 font-medium"},ce={key:0},ge={class:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md"},xe={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},pe=["href"],je={__name:"Index",props:{transactions:Object,summary:Object,filters:Object},setup(d){const v=d,m=_(!1),i=_(null),r=_({search:v.filters.search||"",status:v.filters.status||"all",date_from:v.filters.date_from||"",date_to:v.filters.date_to||""}),M=O(n=>{b.get(route("payments.index"),{search:n.target.value,status:r.value.status,date_from:r.value.date_from,date_to:r.value.date_to},{preserveState:!0,preserveScroll:!0})},500),F=()=>{b.get(route("payments.index"),{search:r.value.search,status:r.value.status,date_from:r.value.date_from,date_to:r.value.date_to},{preserveState:!0,preserveScroll:!0})},I=()=>{r.value={search:"",status:"all",date_from:"",date_to:""},b.get(route("payments.index"),{},{preserveState:!0,preserveScroll:!0})},j=n=>{switch(n){case"completed":return{bg:"bg-green-100",icon:"text-green-600"};case"failed":return{bg:"bg-red-100",icon:"text-red-600"};case"pending":return{bg:"bg-yellow-100",icon:"text-yellow-600"};default:return{bg:"bg-gray-100",icon:"text-gray-600"}}},A=n=>n.charAt(0).toUpperCase()+n.slice(1),N=n=>n?n.charAt(0).toUpperCase()+n.slice(1):"N/A",B=n=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n),y=n=>q(n).format("DD MMM YYYY, HH:mm"),T=n=>{i.value=n,m.value=!0};return(n,e)=>(l(),a(D,null,[h(w(V),{title:"Payments"}),h($,null,{header:k(()=>e[6]||(e[6]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Payments ",-1)])),default:k(()=>[t("div",R,[t("div",W,[t("div",E,[t("div",G,[e[18]||(e[18]=t("div",{class:"flex justify-between items-center mb-6"},[t("h3",{class:"text-lg font-medium"},"Payment History")],-1)),t("div",J,[t("div",K,[t("div",Q,[t("div",X,[e[8]||(e[8]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),t("div",Z,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Transactions",-1)),t("p",tt,o(d.summary.total),1)])])])]),t("div",et,[t("div",st,[t("div",ot,[e[10]||(e[10]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])])],-1)),t("div",it,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-500"},"Completed",-1)),t("p",nt,o(d.summary.completed),1)])])])]),t("div",at,[t("div",lt,[t("div",rt,[e[12]||(e[12]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])])],-1)),t("div",dt,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-500"},"Failed",-1)),t("p",ut,o(d.summary.failed),1)])])])]),t("div",mt,[t("div",ct,[t("div",gt,[e[14]||(e[14]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",xt,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-500"},"Pending",-1)),t("p",pt,o(d.summary.pending),1)])])])])]),t("div",ft,[t("div",vt,[t("div",yt,[S(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>r.value.search=s),placeholder:"Search payments...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onInput:e[1]||(e[1]=(...s)=>w(M)&&w(M)(...s))},null,544),[[L,r.value.search]])]),t("div",null,[S(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.status=s),onChange:F,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},e[15]||(e[15]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"failed"},"Failed",-1),t("option",{value:"pending"},"Pending",-1)]),544),[[Y,r.value.status]])]),t("div",null,[t("button",{onClick:I,class:"w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Clear Filters ")])])]),t("div",ht,[t("table",_t,[e[17]||(e[17]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Transaction ID "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Package "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Payment Method "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",bt,[d.transactions.data.length===0?(l(),a("tr",wt,e[16]||(e[16]=[t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No transactions found ",-1)]))):(l(!0),a(D,{key:1},U(d.transactions.data,s=>{var c,g,x,p,f;return l(),a("tr",{key:s.id},[t("td",kt,[t("div",Ct,o(s.transaction_id||"-"),1),t("div",Mt," Booking ID: "+o(s.order_id||"N/A"),1)]),t("td",jt,[t("div",At,o(((c=s.booking)==null?void 0:c.booking_name)||"N/A"),1),t("div",Nt,o(((g=s.booking)==null?void 0:g.phone_number)||"N/A"),1)]),t("td",Bt,[t("div",Pt,o(((p=(x=s.booking)==null?void 0:x.package)==null?void 0:p.name)||"N/A"),1),t("div",St," Booking #"+o(((f=s.booking)==null?void 0:f.uuid)||"N/A"),1)]),t("td",Dt,[t("div",Ft,o(N(s.payment_method)),1)]),t("td",It,[t("div",Tt," MYR "+o(B(s.amount)),1)]),t("td",Vt,[t("span",{class:C(["px-3 py-1 text-xs font-semibold rounded-full",s.status==="completed"?"bg-green-100 text-green-800":s.status==="failed"?"bg-red-100 text-red-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},o(A(s.status)),3)]),t("td",Lt,[t("div",Yt,o(y(s.created_at)),1),s.processed_at?(l(),a("div",Ut," Processed: "+o(y(s.processed_at)),1)):u("",!0)]),t("td",$t,[t("div",zt,[t("button",{onClick:P=>T(s),class:"text-indigo-600 hover:text-indigo-900"}," View ",8,Ht),s.booking?(l(),a("a",{key:0,href:n.route("bookings.show",s.booking.id),class:"text-blue-600 hover:text-blue-900"}," Booking ",8,Ot)):u("",!0)])])])}),128))])])]),t("div",qt,[h(z,{links:d.transactions.links,from:d.transactions.from,to:d.transactions.to,total:d.transactions.total},null,8,["links","from","to","total"])])])])])]),h(H,{show:m.value,onClose:e[5]||(e[5]=s=>m.value=!1)},{default:k(()=>{var s,c,g,x,p,f;return[i.value?(l(),a("div",Rt,[t("div",Wt,[e[20]||(e[20]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Transaction Details",-1)),t("button",{onClick:e[3]||(e[3]=P=>m.value=!1),class:"text-gray-400 hover:text-gray-600"},e[19]||(e[19]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",Et,[t("div",Gt,[t("div",{class:C(["w-12 h-12 rounded-full flex items-center justify-center",j(i.value.status).bg])},[(l(),a("svg",{class:C(["w-6 h-6",j(i.value.status).icon]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i.value.status==="completed"?(l(),a("path",Jt)):i.value.status==="failed"?(l(),a("path",Kt)):(l(),a("path",Qt))],2))],2),t("div",null,[t("h4",Xt,o(A(i.value.status)),1),t("p",Zt," Transaction ID: "+o(i.value.transaction_id||"-"),1)])]),t("div",te,[t("div",null,[e[25]||(e[25]=t("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Booking Information",-1)),t("div",ee,[t("div",null,[e[21]||(e[21]=t("span",{class:"text-gray-500"},"Booking ID:",-1)),t("span",se,o(((s=i.value.booking)==null?void 0:s.id)||"N/A"),1)]),t("div",null,[e[22]||(e[22]=t("span",{class:"text-gray-500"},"Customer:",-1)),t("span",oe,o(((c=i.value.booking)==null?void 0:c.booking_name)||"N/A"),1)]),t("div",null,[e[23]||(e[23]=t("span",{class:"text-gray-500"},"Package:",-1)),t("span",ie,o(((x=(g=i.value.booking)==null?void 0:g.package)==null?void 0:x.name)||"N/A"),1)]),t("div",null,[e[24]||(e[24]=t("span",{class:"text-gray-500"},"Phone:",-1)),t("span",ne,o(((p=i.value.booking)==null?void 0:p.phone_number)||"N/A"),1)])])]),t("div",null,[e[30]||(e[30]=t("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Payment Information",-1)),t("div",ae,[t("div",null,[e[26]||(e[26]=t("span",{class:"text-gray-500"},"Amount:",-1)),t("span",le," MYR "+o(B(i.value.amount)),1)]),t("div",null,[e[27]||(e[27]=t("span",{class:"text-gray-500"},"Method:",-1)),t("span",re,o(N(i.value.payment_method)),1)]),t("div",null,[e[28]||(e[28]=t("span",{class:"text-gray-500"},"Created:",-1)),t("span",de,o(y(i.value.created_at)),1)]),i.value.processed_at?(l(),a("div",ue,[e[29]||(e[29]=t("span",{class:"text-gray-500"},"Processed:",-1)),t("span",me,o(y(i.value.processed_at)),1)])):u("",!0)])])]),i.value.message?(l(),a("div",ce,[e[31]||(e[31]=t("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Message",-1)),t("p",ge,o(i.value.message),1)])):u("",!0),t("div",xe,[t("button",{onClick:e[4]||(e[4]=P=>m.value=!1),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Close "),i.value.booking?(l(),a("a",{key:0,href:n.route("quotation.with-hash",(f=i.value.booking.package)==null?void 0:f.uuid)+"?booking="+i.value.booking.uuid,class:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," View Booking ",8,pe)):u("",!0)])])])):u("",!0)]}),_:1},8,["show"])]),_:1})],64))}};export{je as default};
