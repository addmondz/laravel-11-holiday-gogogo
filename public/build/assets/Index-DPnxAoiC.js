import{r as k,W as h,g as r,o as l,a as b,u as w,m as $,w as _,b as t,t as o,j as F,q as L,x as Y,F as I,y as U,n as C,h as u}from"./app-BmNEnxY4.js";import{A as z}from"./AuthenticatedLayout-zkQNdKcM.js";import{P as H}from"./Pagination-jckWjzPl.js";import{_ as O}from"./Modal.vue_vue_type_script_setup_true_lang-B14CsuW5.js";import{d as q}from"./debounce-6Lz44Ey7.js";import{h as R}from"./moment-C5S46NFB.js";import"./ApplicationLogo-Dsx1L0hJ.js";import"./LoadingComponent-gIjZmpOF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AntdIcon-toTKoqR9.js";const W={class:"pb-12 pt-6"},E={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6 text-gray-900"},K={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},Q={class:"p-4"},X={class:"flex items-center"},Z={class:"ml-4"},tt={class:"text-lg font-semibold text-gray-900"},et={class:"p-4"},st={class:"flex items-center"},ot={class:"ml-4"},it={class:"text-lg font-semibold text-gray-900"},nt={class:"p-4"},rt={class:"flex items-center"},lt={class:"ml-4"},at={class:"text-lg font-semibold text-gray-900"},dt={class:"p-4"},ut={class:"flex items-center"},mt={class:"ml-4"},ct={class:"text-lg font-semibold text-gray-900"},gt={class:"mb-6"},pt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},xt={class:"md:col-span-2"},vt={class:"overflow-x-auto"},ft={class:"min-w-full divide-y divide-gray-200"},yt={class:"bg-white divide-y divide-gray-200"},ht={key:0},bt={class:"px-6 py-4 whitespace-nowrap"},kt={class:"text-sm font-medium text-gray-900"},wt={class:"text-sm text-gray-500"},_t={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"text-sm font-medium text-gray-900"},Mt={class:"text-sm text-gray-500"},jt={class:"px-6 py-4 whitespace-nowrap"},At={class:"text-sm text-gray-900"},St={class:"text-sm text-gray-500"},Nt={class:"px-6 py-4 whitespace-nowrap"},Bt={class:"text-sm text-gray-900"},Pt={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"text-sm font-medium text-gray-900"},Ft={class:"px-6 py-4 whitespace-nowrap"},It={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"text-sm text-gray-900"},Vt={key:0,class:"text-sm text-gray-500"},$t={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Lt={class:"flex items-center space-x-3"},Yt=["onClick"],Ut=["href"],zt={class:"mt-6"},Ht={key:0,class:"p-6"},Ot={class:"flex items-center justify-between mb-4"},qt={class:"space-y-4"},Rt={class:"flex items-center space-x-3"},Wt={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},Et={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},Gt={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},Jt={class:"text-lg font-medium text-gray-900"},Kt={class:"text-sm text-gray-500"},Qt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xt={class:"space-y-2 text-sm"},Zt={class:"ml-2 font-medium"},te={class:"ml-2 font-medium"},ee={class:"ml-2 font-medium"},se={class:"ml-2 font-medium"},oe={class:"space-y-2 text-sm"},ie={class:"ml-2 font-medium text-lg text-gray-900"},ne={class:"ml-2 font-medium"},re={class:"ml-2 font-medium"},le={key:0},ae={class:"ml-2 font-medium"},de={key:0},ue={class:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md"},me={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},ce=["href"],_e={__name:"Index",props:{transactions:Object,summary:Object,filters:Object},setup(a){const M=a,m=k(!1),i=k(null),d=k({search:M.filters.search||"",status:M.filters.status||"all"}),j=q(n=>{h.get(route("payments.index"),{search:n.target.value,status:d.value.status},{preserveState:!0,preserveScroll:!0})},500),A=()=>{h.get(route("payments.index"),{search:d.value.search,status:d.value.status},{preserveState:!0,preserveScroll:!0})},T=()=>{d.value={search:"",status:"all"},h.get(route("payments.index"),{},{preserveState:!0,preserveScroll:!0})},S=n=>{switch(n){case"completed":return{bg:"bg-green-100",icon:"text-green-600"};case"failed":return{bg:"bg-red-100",icon:"text-red-600"};case"pending":return{bg:"bg-yellow-100",icon:"text-yellow-600"};default:return{bg:"bg-gray-100",icon:"text-gray-600"}}},N=n=>n.charAt(0).toUpperCase()+n.slice(1),B=n=>n?n.charAt(0).toUpperCase()+n.slice(1):"N/A",P=n=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n),f=n=>R(n).format("DD MMM YYYY, HH:mm"),V=n=>{i.value=n,m.value=!0},y=n=>{d.value.status=n,A(),h.get(route("payments.index"),{status:n},{preserveState:!0,preserveScroll:!0})};return(n,e)=>(l(),r(I,null,[b(w($),{title:"Payments"}),b(z,null,{header:_(()=>e[10]||(e[10]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Payments ",-1)])),default:_(()=>[t("div",W,[t("div",E,[t("div",G,[t("div",J,[e[22]||(e[22]=t("div",{class:"flex justify-between items-center mb-6"},[t("h3",{class:"text-lg font-medium"},"Payment History")],-1)),t("div",K,[t("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 cursor-pointer hover:border-indigo-500",onClick:e[0]||(e[0]=s=>y("all"))},[t("div",Q,[t("div",X,[e[12]||(e[12]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),t("div",Z,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Transactions",-1)),t("p",tt,o(a.summary.total),1)])])])]),t("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 cursor-pointer hover:border-indigo-500",onClick:e[1]||(e[1]=s=>y("completed"))},[t("div",et,[t("div",st,[e[14]||(e[14]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])])],-1)),t("div",ot,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-500"},"Completed",-1)),t("p",it,o(a.summary.completed),1)])])])]),t("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 cursor-pointer hover:border-indigo-500",onClick:e[2]||(e[2]=s=>y("failed"))},[t("div",nt,[t("div",rt,[e[16]||(e[16]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])])],-1)),t("div",lt,[e[15]||(e[15]=t("p",{class:"text-sm font-medium text-gray-500"},"Failed",-1)),t("p",at,o(a.summary.failed),1)])])])]),t("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 cursor-pointer hover:border-indigo-500",onClick:e[3]||(e[3]=s=>y("pending"))},[t("div",dt,[t("div",ut,[e[18]||(e[18]=t("div",{class:"flex-shrink-0"},[t("div",{class:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),t("div",mt,[e[17]||(e[17]=t("p",{class:"text-sm font-medium text-gray-500"},"Pending",-1)),t("p",ct,o(a.summary.pending),1)])])])])]),t("div",gt,[t("div",pt,[t("div",xt,[F(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>d.value.search=s),placeholder:"Search payments...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onInput:e[5]||(e[5]=(...s)=>w(j)&&w(j)(...s))},null,544),[[L,d.value.search]])]),t("div",null,[F(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>d.value.status=s),onChange:A,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},e[19]||(e[19]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"failed"},"Failed",-1),t("option",{value:"pending"},"Pending",-1)]),544),[[Y,d.value.status]])]),t("div",null,[t("button",{onClick:T,class:"w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Clear Filters ")])])]),t("div",vt,[t("table",ft,[e[21]||(e[21]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Transaction ID "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Package "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Payment Method "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",yt,[a.transactions.data.length===0?(l(),r("tr",ht,e[20]||(e[20]=[t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No transactions found ",-1)]))):(l(!0),r(I,{key:1},U(a.transactions.data,s=>{var c,g,p,x,v;return l(),r("tr",{key:s.id},[t("td",bt,[t("div",kt,o(s.transaction_id||"-"),1),t("div",wt," Booking ID: "+o(s.order_id||"N/A"),1)]),t("td",_t,[t("div",Ct,o(((c=s.booking)==null?void 0:c.booking_name)||"N/A"),1),t("div",Mt,o(((g=s.booking)==null?void 0:g.phone_number)||"N/A"),1)]),t("td",jt,[t("div",At,o(((x=(p=s.booking)==null?void 0:p.package)==null?void 0:x.name)||"N/A"),1),t("div",St," Booking #"+o(((v=s.booking)==null?void 0:v.uuid)||"N/A"),1)]),t("td",Nt,[t("div",Bt,o(B(s.payment_method)),1)]),t("td",Pt,[t("div",Dt," MYR "+o(P(s.amount)),1)]),t("td",Ft,[t("span",{class:C(["px-3 py-1 text-xs font-semibold rounded-full",s.status==="completed"?"bg-green-100 text-green-800":s.status==="failed"?"bg-red-100 text-red-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},o(N(s.status)),3)]),t("td",It,[t("div",Tt,o(f(s.created_at)),1),s.processed_at?(l(),r("div",Vt," Processed: "+o(f(s.processed_at)),1)):u("",!0)]),t("td",$t,[t("div",Lt,[t("button",{onClick:D=>V(s),class:"text-indigo-600 hover:text-indigo-900"}," View ",8,Yt),s.booking?(l(),r("a",{key:0,href:n.route("bookings.show",s.booking.id),class:"text-blue-600 hover:text-blue-900"}," Booking ",8,Ut)):u("",!0)])])])}),128))])])]),t("div",zt,[b(H,{links:a.transactions.links,from:a.transactions.from,to:a.transactions.to,total:a.transactions.total},null,8,["links","from","to","total"])])])])])]),b(O,{show:m.value,onClose:e[9]||(e[9]=s=>m.value=!1)},{default:_(()=>{var s,c,g,p,x,v;return[i.value?(l(),r("div",Ht,[t("div",Ot,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Transaction Details",-1)),t("button",{onClick:e[7]||(e[7]=D=>m.value=!1),class:"text-gray-400 hover:text-gray-600"},e[23]||(e[23]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",qt,[t("div",Rt,[t("div",{class:C(["w-12 h-12 rounded-full flex items-center justify-center",S(i.value.status).bg])},[(l(),r("svg",{class:C(["w-6 h-6",S(i.value.status).icon]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i.value.status==="completed"?(l(),r("path",Wt)):i.value.status==="failed"?(l(),r("path",Et)):(l(),r("path",Gt))],2))],2),t("div",null,[t("h4",Jt,o(N(i.value.status)),1),t("p",Kt," Transaction ID: "+o(i.value.transaction_id||"-"),1)])]),t("div",Qt,[t("div",null,[e[29]||(e[29]=t("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Booking Information",-1)),t("div",Xt,[t("div",null,[e[25]||(e[25]=t("span",{class:"text-gray-500"},"Booking ID:",-1)),t("span",Zt,o(((s=i.value.booking)==null?void 0:s.id)||"N/A"),1)]),t("div",null,[e[26]||(e[26]=t("span",{class:"text-gray-500"},"Customer:",-1)),t("span",te,o(((c=i.value.booking)==null?void 0:c.booking_name)||"N/A"),1)]),t("div",null,[e[27]||(e[27]=t("span",{class:"text-gray-500"},"Package:",-1)),t("span",ee,o(((p=(g=i.value.booking)==null?void 0:g.package)==null?void 0:p.name)||"N/A"),1)]),t("div",null,[e[28]||(e[28]=t("span",{class:"text-gray-500"},"Phone:",-1)),t("span",se,o(((x=i.value.booking)==null?void 0:x.phone_number)||"N/A"),1)])])]),t("div",null,[e[34]||(e[34]=t("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Payment Information",-1)),t("div",oe,[t("div",null,[e[30]||(e[30]=t("span",{class:"text-gray-500"},"Amount:",-1)),t("span",ie," MYR "+o(P(i.value.amount)),1)]),t("div",null,[e[31]||(e[31]=t("span",{class:"text-gray-500"},"Method:",-1)),t("span",ne,o(B(i.value.payment_method)),1)]),t("div",null,[e[32]||(e[32]=t("span",{class:"text-gray-500"},"Created:",-1)),t("span",re,o(f(i.value.created_at)),1)]),i.value.processed_at?(l(),r("div",le,[e[33]||(e[33]=t("span",{class:"text-gray-500"},"Processed:",-1)),t("span",ae,o(f(i.value.processed_at)),1)])):u("",!0)])])]),i.value.message?(l(),r("div",de,[e[35]||(e[35]=t("h5",{class:"text-sm font-medium text-gray-700 mb-2"},"Message",-1)),t("p",ue,o(i.value.message),1)])):u("",!0),t("div",me,[t("button",{onClick:e[8]||(e[8]=D=>m.value=!1),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Close "),i.value.booking?(l(),r("a",{key:0,href:n.route("quotation.with-hash",(v=i.value.booking.package)==null?void 0:v.uuid)+"?booking="+i.value.booking.uuid,class:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," View Booking ",8,ce)):u("",!0)])])])):u("",!0)]}),_:1},8,["show"])]),_:1})],64))}};export{_e as default};
