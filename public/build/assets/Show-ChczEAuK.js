import{i as L,g as r,o as l,a as B,u as C,m as J,w as M,b as t,h as x,n as _,t as n,f,P as G,F as w,y as v,W as I}from"./app-cJX5cAi_.js";import{A as Q}from"./AuthenticatedLayout-DUP5uskr.js";import{_ as Z}from"./BreadcrumbComponent-XeBKV3gx.js";import{S as k}from"./sweetalert2.esm.all-B0Dix5B2.js";import{h as O}from"./moment-C5S46NFB.js";import"./ApplicationLogo-N8AQnLmt.js";import"./LoadingComponent-By_4E5Rn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AntdIcon-mdrxhE1B.js";const tt={class:"flex justify-between items-center"},et={class:"pb-12 pt-6"},st={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},ot={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},nt={class:"p-6 text-gray-900"},it={class:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200"},at={class:"flex items-center justify-between"},rt={class:"flex items-center"},lt={class:"flex-shrink-0"},dt={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},ct={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},ut={class:"ml-4"},gt={class:"text-lg font-semibold text-gray-900"},mt={key:0,class:"mt-1"},xt={class:"text-xs text-gray-500"},pt={class:"font-medium"},ht={key:0,class:"ml-1"},bt={key:0,class:"flex items-center gap-3"},yt={key:1,class:"flex items-center"},ft={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8"},kt={class:"space-y-4"},wt={class:"mt-1 text-sm text-gray-900"},_t={class:"mt-1 text-sm text-gray-900"},vt={class:"mt-1 text-sm text-gray-900"},Bt={key:0},Mt={class:"mt-1 text-sm text-gray-900"},At={key:1},Ct={class:"mt-1 text-sm text-gray-900"},jt={key:2},Rt={class:"mt-1 text-sm text-gray-900 flex items-center gap-2"},Pt={class:"space-y-4"},St={class:"mt-1 flex items-center gap-2"},Dt={class:"text-sm text-gray-900"},Tt={key:0,class:"relative group"},Yt={class:"mt-1 text-sm text-gray-900"},Nt={class:"mt-1 text-sm text-gray-900"},Et={key:0},Ft={class:"mt-1 text-sm font-medium text-gray-900"},Lt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-8"},Gt={class:"p-6 text-gray-900"},It={class:"overflow-x-auto"},zt={class:"min-w-full divide-y divide-gray-200"},qt={class:"bg-white divide-y divide-gray-200"},Ut={class:"px-6 py-4 whitespace-nowrap"},Vt={class:"text-sm font-medium text-gray-900"},Wt={key:0,class:"text-xs text-indigo-600 bg-indigo-50 px-2 py-1 rounded whitespace-nowrap"},$t={class:"px-6 py-4 whitespace-nowrap"},Ht={class:"text-sm text-gray-900"},Kt={class:"px-6 py-4 whitespace-nowrap"},Xt={class:"text-sm text-gray-900"},Jt={class:"px-6 py-4 whitespace-nowrap"},Qt={class:"text-sm text-gray-900"},Zt={class:"px-6 py-4 whitespace-nowrap"},Ot={class:"text-sm text-gray-900"},te={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-8"},ee={class:"p-6 text-gray-900"},se={class:"space-y-4"},oe={class:"border-b border-gray-200 pb-2"},ne={class:"font-semibold text-gray-900"},ie={class:"space-y-3"},ae={class:"flex items-center gap-2 mb-2"},re={class:"text-gray-900 font-medium"},le={class:"pl-2 space-y-1 text-xs"},de={class:"text-gray-700"},ce={class:"flex-1 text-gray-500"},ue={class:"flex-1 text-gray-700 text-right"},ge={class:"flex justify-between font-medium pt-1 mt-1 bg-indigo-50 -mx-2 px-2 py-1 rounded"},me={class:"text-indigo-700"},xe={class:"text-indigo-900"},pe={class:"flex justify-between pt-2 border-t border-gray-200"},he={class:"font-bold text-indigo-600"},be={class:"mt-6 bg-indigo-50 rounded-lg p-4 border border-indigo-200"},ye={class:"flex justify-between items-center"},fe={class:"font-bold text-indigo-900 text-xl"},ke={key:0,class:"mt-2 text-sm text-indigo-700"},we={key:1,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-8"},_e={class:"p-6 text-gray-900"},ve={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Be={class:"flex items-start gap-2 text-yellow-800"},Me={key:0,class:"text-xs mt-1 text-yellow-700"},Ae={key:1,class:"text-xs mt-1 text-yellow-700"},Ce={key:2,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-8"},je={class:"p-6 text-gray-900"},Re={class:"overflow-x-auto"},Pe={class:"min-w-full divide-y divide-gray-200"},Se={class:"bg-white divide-y divide-gray-200"},De={class:"px-6 py-4 whitespace-nowrap"},Te={class:"text-sm font-medium text-gray-900"},Ye={class:"px-6 py-4"},Ne={class:"text-sm text-gray-900"},Ee={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"text-sm text-gray-900"},Le={class:"px-6 py-4 whitespace-nowrap"},Ge={class:"text-sm text-gray-900"},Ie={class:"px-6 py-4 whitespace-nowrap"},ze={class:"text-sm text-gray-900"},qe={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"text-sm text-gray-600 space-y-1"},Ve={key:0},We={key:1},$e={key:2},He={class:"px-6 py-4 whitespace-nowrap"},Ke={class:"text-sm font-medium text-gray-900"},Xe={class:"bg-gray-50"},Je={class:"px-6 py-4 whitespace-nowrap"},Qe={class:"text-sm font-medium text-gray-900"},Ze={key:3,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-8"},Oe={class:"p-6 text-gray-900"},ts={class:"overflow-x-auto"},es={class:"min-w-full divide-y divide-gray-200"},ss={class:"bg-white divide-y divide-gray-200"},os={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ns={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},is={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},as={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},rs={class:"px-6 py-4 whitespace-nowrap"},bs={__name:"Show",props:{booking:Object,sstPercent:{type:Number,default:0},priceBreakdown:{type:Object,default:null},priceBreakdownError:{type:String,default:null}},setup(o){const h=o,b=i=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(i),y=i=>{const e=i*(1+h.sstPercent/100);return Math.floor(e)},z=i=>O(i).format("DD MMM YYYY, h:mm A"),j=L(()=>{var g;if(!((g=h.priceBreakdown)!=null&&g.guest_breakdown))return[];const i=Object.values(h.priceBreakdown.guest_breakdown),e={};return i.forEach(c=>{const u=c.room_number;e[u]||(e[u]={room_number:u,room_type_name:c.room_type_name,nights:c.nights,guests:[],total:0}),e[u].guests.push(c),e[u].total+=c.total}),Object.values(e)}),q=(i,e)=>{var s,a,d,m,p;if(!((s=h.priceBreakdown)!=null&&s.rooms))return 0;const g=e-1,c=h.priceBreakdown.rooms[g];if(!((a=c==null?void 0:c.summary)!=null&&a.surcharges))return 0;const u=c.summary.surcharges;return i==="adult"&&c.adults>0?(((d=u.adult)==null?void 0:d.total)||0)/c.adults:i==="child"&&c.children>0?(((m=u.child)==null?void 0:m.total)||0)/c.children:i==="infant"&&c.infants>0?(((p=u.infant)==null?void 0:p.total)||0)/c.infants:0},A=i=>{var s;const e=((s=i.base_charge)==null?void 0:s.total)||0,g=q(i.guest_type,i.room_number),c=h.sstPercent||0,u=(e+g)*(c/100);return e+g+u},R=(i,e,g)=>{var s,a;if(!((a=(s=h.priceBreakdown)==null?void 0:s.add_ons)!=null&&a.length))return 0;const c=h.priceBreakdown.add_ons.filter(d=>Number(d.room_number)===Number(i));let u=0;return c.forEach(d=>{e==="adult"&&d.adults>=g?u+=Math.floor(parseFloat(d.adult_price)||0):e==="child"&&d.children>=g?u+=Math.floor(parseFloat(d.child_price)||0):e==="infant"&&d.infants>=g&&(u+=Math.floor(parseFloat(d.infant_price)||0))}),u},P=(i,e,g)=>{var s,a;if(!((a=(s=h.priceBreakdown)==null?void 0:s.add_ons)!=null&&a.length))return[];const c=h.priceBreakdown.add_ons.filter(d=>Number(d.room_number)===Number(i)),u=[];return c.forEach(d=>{let m=0,p=!1;e==="adult"&&d.adults>=g?(m=Math.floor(parseFloat(d.adult_price)||0),p=!0):e==="child"&&d.children>=g?(m=Math.floor(parseFloat(d.child_price)||0),p=!0):e==="infant"&&d.infants>=g&&(m=Math.floor(parseFloat(d.infant_price)||0),p=!0),p&&m>0&&u.push({name:d.name,price:m})}),u},S=i=>{var g;if(!((g=i.guests)!=null&&g.length))return 0;let e=0;return i.guests.forEach(c=>{const u=Math.floor(A(c)),s=Math.floor(R(i.room_number,c.guest_type,c.guest_number));e+=u+s}),e},U=i=>{switch(i){case"adult":return"bg-indigo-100 text-indigo-800";case"child":return"bg-green-100 text-green-800";case"infant":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},V=L(()=>[{title:"Bookings",link:route("bookings.index")},{title:"Booking Details"}]),D=i=>{switch(i){case 0:return{bg:"bg-yellow-100",icon:"text-yellow-600"};case 1:return{bg:"bg-green-100",icon:"text-green-600"};case 2:return{bg:"bg-red-100",icon:"text-red-600"};case 3:return{bg:"bg-blue-100",icon:"text-blue-600"};case 4:return{bg:"bg-white",icon:"text-slate-600"};default:return{bg:"bg-gray-100",icon:"text-gray-600"}}},T=i=>{switch(i){case 0:return"Pending Approval";case 1:return"Approved";case 2:return"Rejected";case 3:return"Payment Completed";case 4:return"Refunded";default:return""}},W=i=>{navigator.clipboard.writeText(i),alert("Link copied to clipboard")},$=()=>{k.fire({title:"Are you sure?",text:"Are you sure you want to approve this booking?",icon:"question",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, approve it!",cancelButtonText:"Cancel"}).then(i=>{i.isConfirmed&&K()})},H=()=>{k.fire({title:"Are you sure?",text:"Are you sure you want to reject this booking?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, reject it!",cancelButtonText:"Cancel"}).then(i=>{i.isConfirmed&&X()})},K=async()=>{try{const e=await(await fetch(route("bookings.approve",h.booking.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();e.success?k.fire("Approved!","Booking has been approved successfully.","success").then(()=>{I.reload()}):k.fire("Error!",e.message||"Failed to approve booking.","error")}catch{k.fire("Error!","An error occurred while approving the booking.","error")}},X=async()=>{try{const e=await(await fetch(route("bookings.reject",h.booking.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();e.success?k.fire("Rejected!","Booking has been rejected successfully.","success").then(()=>{I.reload()}):k.fire("Error!",e.message||"Failed to reject booking.","error")}catch{k.fire("Error!","An error occurred while rejecting the booking.","error")}};return(i,e)=>(l(),r(w,null,[B(C(J),{title:"Booking Details"}),B(Q,null,{header:M(()=>[t("div",tt,[e[2]||(e[2]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Booking Details",-1)),B(C(G),{href:i.route("bookings.edit",o.booking.id),class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"},{default:M(()=>e[1]||(e[1]=[f(" Edit Booking ")])),_:1},8,["href"])])]),default:M(()=>{var g,c,u;return[t("div",et,[t("div",st,[t("div",ot,[t("div",nt,[B(Z,{breadcrumbs:V.value,class:"mb-6"},null,8,["breadcrumbs"]),t("div",it,[t("div",at,[t("div",rt,[t("div",lt,[t("div",{class:_(["w-12 h-12 rounded-full flex items-center justify-center",D(o.booking.status).bg])},[(l(),r("svg",{class:_(["w-6 h-6",D(o.booking.status).icon]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[[2,4].includes(o.booking.status)?(l(),r("path",dt)):(l(),r("path",ct))],2))],2)]),t("div",ut,[e[3]||(e[3]=t("p",{class:"text-sm font-medium text-gray-600"},"Booking Status",-1)),t("p",gt,n(T(o.booking.status)),1),o.booking.approval_status&&o.booking.approval_status!=="pending"?(l(),r("div",mt,[t("p",xt,[f(n(o.booking.approval_status==="approved"?"Approved":"Rejected")+" by ",1),t("span",pt,n(((g=o.booking.approver)==null?void 0:g.name)||"Admin"),1),o.booking.approval_date?(l(),r("span",ht," on "+n(z(o.booking.approval_date)),1)):x("",!0)])])):x("",!0)])]),o.booking.status===0?(l(),r("div",bt,[t("button",{onClick:$,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"},e[4]||(e[4]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),f(" Approve Booking ")])),t("button",{onClick:H,class:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200"},e[5]||(e[5]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),f(" Reject Booking ")]))])):(l(),r("div",yt,[t("span",{class:_(["px-4 py-2 text-sm font-semibold rounded-full",o.booking.status==0?"bg-yellow-100 text-yellow-800":o.booking.status==1?"bg-green-100 text-green-800":o.booking.status==2?"bg-red-100 text-red-800":o.booking.status==3?"bg-blue-100 text-blue-800":o.booking.status==4?"bg-slate-100 text-slate-800":"bg-gray-100 text-gray-800"])},n(T(o.booking.status)),3)]))])]),t("div",ft,[t("div",null,[e[14]||(e[14]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Booking Information",-1)),t("div",kt,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Booking Name",-1)),t("p",wt,n(o.booking.booking_name),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Phone Number",-1)),t("p",_t,n(o.booking.phone_number),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Tin Number",-1)),t("p",vt,n(o.booking.booking_ic||"-"),1)]),o.booking.special_remarks?(l(),r("div",Bt,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"Special Remarks",-1)),t("p",Mt,n(o.booking.special_remarks||"-"),1)])):x("",!0),o.booking.uuid?(l(),r("div",At,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"Booking Reference",-1)),t("p",Ct,n(o.booking.uuid||"-"),1)])):x("",!0),o.booking.package?(l(),r("div",jt,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700"},"Pay now / view payment",-1)),t("div",Rt,[B(C(G),{href:i.route("quotation.with-hash",o.booking.package.uuid)+"?booking="+o.booking.uuid,class:"text-indigo-600 hover:text-indigo-900 mr-2"},{default:M(()=>e[11]||(e[11]=[f(" Go to payment page ")])),_:1},8,["href"]),t("button",{onClick:e[0]||(e[0]=s=>W(i.route("quotation.with-hash",o.booking.package.uuid)+"?booking="+o.booking.uuid)),class:"flex items-center gap-2 bg-gray-100 px-2 rounded-sm border border-gray-300"},e[12]||(e[12]=[f(" copy link "),t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]))])])):x("",!0)])]),t("div",null,[e[20]||(e[20]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Package Details",-1)),t("div",Pt,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700"},"Package",-1)),t("div",St,[t("span",Dt,n(((c=o.booking.package)==null?void 0:c.name)||"N/A"),1),o.booking.package?x("",!0):(l(),r("div",Tt,e[15]||(e[15]=[t("svg",{class:"w-4 h-4 text-amber-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("div",{class:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 hidden group-hover:block z-50 w-56 p-3 text-xs text-white bg-gray-800 rounded-lg shadow-xl whitespace-normal"},[f(" Package might be deleted. Please check with admin. "),t("div",{class:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"})],-1)])))])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700"},"Dates",-1)),t("p",Yt,n(new Date(o.booking.start_date).toLocaleDateString())+" - "+n(new Date(o.booking.end_date).toLocaleDateString())+" ("+n(Math.ceil((new Date(o.booking.end_date)-new Date(o.booking.start_date))/(1e3*60*60*24)))+" nights) ",1)]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700"},"Total Guests",-1)),t("p",Nt,[f(n(o.booking.adults)+" Adult"+n(o.booking.adults>1?"s":"")+" ",1),o.booking.children>0?(l(),r("span",Et," , "+n(o.booking.children)+" Child"+n(o.booking.children>1?"ren":""),1)):x("",!0)])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700"},"Total Price",-1)),t("p",Ft,"MYR "+n(b(o.booking.total_price)),1)])])])])])]),t("div",Lt,[t("div",Gt,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Room Details",-1)),t("div",It,[t("table",zt,[e[21]||(e[21]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Room Type"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Adults"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Children"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Infants"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Guests")])],-1)),t("tbody",qt,[(l(!0),r(w,null,v(o.booking.rooms,s=>{var a,d;return l(),r("tr",{key:s.id},[t("td",Ut,[t("div",Vt,[f(n(((a=s.room_type)==null?void 0:a.name)||"N/A")+" ",1),(d=s.room_type)!=null&&d.max_occupancy?(l(),r("span",Wt," Max "+n(s.room_type.max_occupancy)+" pax ",1)):x("",!0)])]),t("td",$t,[t("div",Ht,n(s.adults),1)]),t("td",Kt,[t("div",Xt,n(s.children),1)]),t("td",Jt,[t("div",Qt,n(s.infants),1)]),t("td",Zt,[t("div",Ot,n(s.adults+s.children+s.infants),1)])])}),128))])])])])]),(u=o.priceBreakdown)!=null&&u.guest_breakdown?(l(),r("div",te,[t("div",ee,[e[26]||(e[26]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Pricing Breakdown",-1)),t("div",se,[(l(!0),r(w,null,v(j.value,s=>(l(),r("div",{key:s.room_number,class:"bg-gray-50 rounded-lg border border-gray-200 p-4 space-y-3"},[t("div",oe,[t("div",ne,"Room "+n(s.room_number)+" - "+n(s.room_type_name),1)]),t("div",ie,[(l(!0),r(w,null,v(s.guests,a=>(l(),r("div",{key:`${a.guest_type}_${a.guest_number}`,class:"text-sm py-2 bg-white rounded-lg p-3"},[t("div",ae,[t("span",{class:_(["px-2 py-0.5 text-xs font-semibold rounded-full",U(a.guest_type)])},n(a.guest_type.charAt(0).toUpperCase()+a.guest_type.slice(1)),3),t("span",re,n(a.guest_type.charAt(0).toUpperCase()+a.guest_type.slice(1))+" "+n(a.guest_number),1)]),t("div",le,[t("div",{class:_(["flex","justify-between","pb-1",P(s.room_number,a.guest_type,a.guest_number).length>0?"border-b border-gray-200":""])},[e[23]||(e[23]=t("span",{class:"text-gray-500"},"Package:",-1)),t("span",de,"MYR "+n(b(A(a))),1)],2),(l(!0),r(w,null,v(P(s.room_number,a.guest_type,a.guest_number),(d,m)=>(l(),r("div",{key:"addon-"+m,class:"flex pb-1"},[t("span",ce,n(d.name)+":",1),t("span",ue,"MYR "+n(b(d.price)),1)]))),128)),t("div",ge,[t("span",me,"Total for "+n(a.guest_type.charAt(0).toUpperCase()+a.guest_type.slice(1))+" "+n(a.guest_number)+":",1),t("span",xe,"MYR "+n(b(Math.floor(A(a))+Math.floor(R(s.room_number,a.guest_type,a.guest_number)))),1)])])]))),128))]),t("div",pe,[e[24]||(e[24]=t("span",{class:"font-semibold text-gray-900"},"Room Total:",-1)),t("span",he,"MYR "+n(b(S(s))),1)])]))),128))]),t("div",be,[t("div",ye,[e[25]||(e[25]=t("span",{class:"font-semibold text-indigo-900 text-lg"},"Grand Total:",-1)),t("span",fe,"MYR "+n(b(j.value.reduce((s,a)=>s+S(a),0))),1)]),o.priceBreakdown.sst>0?(l(),r("div",ke," (Includes SST "+n(o.sstPercent)+"%) ",1)):x("",!0)])])])):o.booking.package?(l(),r("div",we,[t("div",_e,[e[29]||(e[29]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Pricing Breakdown",-1)),t("div",ve,[t("div",Be,[e[28]||(e[28]=t("svg",{class:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",null,[e[27]||(e[27]=t("span",{class:"text-sm"},"Detailed pricing breakdown is not available for this booking.",-1)),o.priceBreakdownError?(l(),r("p",Me," Reason: "+n(o.priceBreakdownError),1)):(l(),r("p",Ae," This may occur if the package configuration has been modified. "))])])])])])):x("",!0),o.booking.add_ons&&o.booking.add_ons.length>0?(l(),r("div",Ce,[t("div",je,[e[32]||(e[32]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Add-ons Details",-1)),t("div",Re,[t("table",Pe,[e[31]||(e[31]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Add-on Name"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Adults"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Children"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Infants"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prices"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total")])],-1)),t("tbody",Se,[(l(!0),r(w,null,v(o.booking.add_ons,s=>{var a,d,m,p,Y,N,E,F;return l(),r("tr",{key:s.id},[t("td",De,[t("div",Te,n(((a=s.package_add_on)==null?void 0:a.name)||"N/A"),1)]),t("td",Ye,[t("div",Ne,n(((d=s.package_add_on)==null?void 0:d.description)||"-"),1)]),t("td",Ee,[t("div",Fe,n(s.adults),1)]),t("td",Le,[t("div",Ge,n(s.children),1)]),t("td",Ie,[t("div",ze,n(s.infants),1)]),t("td",qe,[t("div",Ue,[(m=s.package_add_on)!=null&&m.adult_price?(l(),r("div",Ve," Adult: MYR "+n(b(y(s.package_add_on.adult_price))),1)):x("",!0),(p=s.package_add_on)!=null&&p.child_price?(l(),r("div",We," Child: MYR "+n(b(y(s.package_add_on.child_price))),1)):x("",!0),(Y=s.package_add_on)!=null&&Y.infant_price?(l(),r("div",$e," Infant: MYR "+n(b(y(s.package_add_on.infant_price))),1)):x("",!0)])]),t("td",He,[t("div",Ke," MYR "+n(b(s.adults*y(((N=s.package_add_on)==null?void 0:N.adult_price)||0)+s.children*y(((E=s.package_add_on)==null?void 0:E.child_price)||0)+s.infants*y(((F=s.package_add_on)==null?void 0:F.infant_price)||0))),1)])])}),128)),t("tr",Xe,[e[30]||(e[30]=t("td",{colspan:"6",class:"px-6 py-4 whitespace-nowrap"},[t("div",{class:"text-sm font-medium text-gray-900"},"Add-ons Total")],-1)),t("td",Je,[t("div",Qe," MYR "+n(b(o.booking.add_ons.reduce((s,a)=>{var d,m,p;return s+a.adults*y(((d=a.package_add_on)==null?void 0:d.adult_price)||0)+a.children*y(((m=a.package_add_on)==null?void 0:m.child_price)||0)+a.infants*y(((p=a.package_add_on)==null?void 0:p.infant_price)||0)},0))),1)])])])])])])])):x("",!0),o.booking.transactions&&o.booking.transactions.length>0?(l(),r("div",Ze,[t("div",Oe,[t("div",null,[e[34]||(e[34]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Transaction History",-1)),t("div",ts,[t("table",es,[e[33]||(e[33]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transaction ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Payment Method"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),t("tbody",ss,[(l(!0),r(w,null,v(o.booking.transactions,s=>(l(),r("tr",{key:s.id},[t("td",os,n(new Date(s.created_at).toLocaleDateString()),1),t("td",ns,n(s.transaction_id),1),t("td",is,n(s.payment_method),1),t("td",as," MYR "+n(b(s.amount)),1),t("td",rs,[t("span",{class:_(["px-2 py-1 text-sm font-semibold rounded-full",s.status==="completed"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},n(s.status.charAt(0).toUpperCase()+s.status.slice(1)),3)])]))),128))])])])])])])):x("",!0)])])]}),_:1})],64))}};export{bs as default};
